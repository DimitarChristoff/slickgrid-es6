{"version":3,"sources":["webpack:///webpack/bootstrap fc1fcdbba78514f7b176","webpack:///../src/slick.core.js","webpack:///external \"jquery\"","webpack:///../plugins/slick.cellrangedecorator/slick.cellrangedecorator.js","webpack:///../plugins/slick.cellrangeselector/slick.cellrangeselector.js","webpack:///../src/interact.js","webpack:///../plugins/index.js","webpack:///../plugins/slick.autotooltips/index.js","webpack:///../plugins/slick.autotooltips/slick.autotooltips.js","webpack:///../plugins/slick.cellcopymanager/index.js","webpack:///../plugins/slick.cellcopymanager/slick.cellcopymanager.js","webpack:///../plugins/slick.cellrangedecorator/index.js","webpack:///../plugins/slick.cellrangeselector/index.js","webpack:///../plugins/slick.cellselectionmodel/index.js","webpack:///../plugins/slick.cellselectionmodel/slick.cellselectionmodel.js","webpack:///../plugins/slick.checkboxselectcolumn/index.js","webpack:///../plugins/slick.checkboxselectcolumn/slick.checkboxselectcolumn.js","webpack:///../plugins/slick.headerbuttons/index.js","webpack:///../plugins/slick.headerbuttons/slick.headerbuttons.js","webpack:///../plugins/slick.headermenu/index.js","webpack:///../plugins/slick.headermenu/slick.headermenu.js","webpack:///../plugins/slick.rowmovemanager/index.js","webpack:///../plugins/slick.rowmovemanager/slick.rowmovemanager.js","webpack:///../plugins/slick.rowselectionmodel/index.js","webpack:///../plugins/slick.rowselectionmodel/slick.rowselectionmodel.js","webpack:///../src/index.js","webpack:///../src/slick-frozen.grid.js","webpack:///../src/slick.dataview.js","webpack:///../src/slick.editors.js","webpack:///../src/slick.formatters.js","webpack:///../src/slick.grid.js","webpack:///external \"flatpickr\""],"names":["Slick","Event","EventData","EventHandler","Range","NonDataRow","NonDataItem","Group","GroupTotals","EditorLock","GlobalEditorLock","TreeColumns","keyCode","BACKSPACE","DELETE","DOWN","END","ENTER","ESCAPE","HOME","INSERT","LEFT","PAGE_DOWN","PAGE_UP","RIGHT","TAB","UP","global","isPropagationStopped","isImmediatePropagationStopped","stopPropagation","stopImmediatePropagation","handlers","subscribe","fn","push","unsubscribe","i","length","splice","notify","args","e","scope","returnValue","call","event","handler","unsubscribeAll","fromRow","fromCell","toRow","toCell","undefined","Math","min","max","isSingleRow","isSingleCell","contains","row","cell","toString","__nonDataRow","__group","level","count","value","title","collapsed","totals","rows","groups","groupingKey","prototype","equals","group","__groupTotals","initialized","activeEditController","isActive","editController","activate","commitCurrentEdit","cancelCurrentEdit","deactivate","treeColumns","columnsById","init","mapToId","columns","forEach","column","id","filter","node","condition","valid","sort","grid","a","b","indexA","getOrDefault","getColumnIndex","indexB","getDepth","getColumnsInDepth","depth","current","n","extractColumns","concat","result","hasOwnProperty","cloneTreeColumns","$","extend","hasDepth","getTreeColumns","getColumnsInGroup","visibleColumns","visible","reOrder","getById","getInIds","ids","map","CellRangeDecorator","options","_elem","_defaults","selectionCssClass","selectionCss","zIndex","border","Object","assign","show","range","css","addClass","appendTo","getCanvasNode","from","getCellNodeBox","to","top","left","height","bottom","width","right","hide","remove","CellRangeSelector","_grid","_canvas","_dragging","_decorator","_range","_self","_handler","onDragInit","handleDragInit","onDragStart","handleDragStart","onDrag","handleDrag","onDragEnd","handleDragEnd","destroy","dd","jqueryEvent","interactEvent","getCellFromEvent","originalEvent","onBeforeCellRangeSelected","canCellBeSelected","focus","start","getCellFromPoint","x0","offset","y0","end","pageX","pageY","onCellRangeSelected","realWindow","window","el","document","createTextNode","ownerDocument","wrap","DocumentFragment","blank","SVGElement","SVGSVGElement","SVGElementInstance","HTMLElement","Element","PointerEvent","MSPointerEvent","pEventTypes","hypot","x","y","sqrt","tmpXY","documents","interactables","interactions","dynamicDrop","delegatedEvents","defaultOptions","base","accept","actionChecker","styleCursor","preventDefault","origin","deltaSource","allowFrom","ignoreFrom","_context","dropChecker","drag","enabled","manualStart","Infinity","maxPerElement","snap","restrict","inertia","autoScroll","axis","drop","overlap","resize","square","preserveAspectRatio","margin","NaN","edges","invert","gesture","perAction","endOnly","targets","offsets","relativePoints","container","speed","resistance","minSpeed","endSpeed","allowResume","zeroResumeDelta","smoothEndDuration","_holdDuration","interaction","scroll","target","prepared","name","getWindow","element","now","Date","getTime","dtx","prevTimeX","dty","prevTimeY","vx","vy","sx","sy","velocity","isWindow","scrollBy","scrollLeft","scrollTop","isScrolling","cancelFrame","reqFrame","stop","supportsTouch","DocumentTouch","supportsPointerEvent","pointerMoveTolerance","prevTouchTime","maxInteractions","actionCursors","all","atob","resizex","resizey","resizexy","resizetop","resizeleft","resizebottom","resizeright","resizetopleft","resizebottomright","resizetopright","resizebottomleft","actionIsEnabled","wheelEvent","eventTypes","globalEvents","isOperaMobile","navigator","appName","userAgent","match","isIOS7","test","platform","appVersion","prefixedMatchesSelector","ie8MatchesSelector","requestAnimationFrame","cancelAnimationFrame","events","useAttachEvent","addEvent","removeEvent","on","elements","attachedListeners","add","type","listener","useCapture","elementIndex","indexOf","typeCount","supplied","wrapped","useCount","ret","listeners","listenerIndex","immediatePropagationStopped","srcElement","currentTarget","preventDef","stopProp","stopImmProp","clientX","documentElement","clientY","Boolean","len","cancelBubble","_elements","_targets","_attachedListeners","isElement","o","_window","nodeType","nodeName","thing","Window","isDocFrag","isArray","isObject","isFunction","isNumber","isBool","isString","trySelector","querySelector","dest","source","prop","prefixedPropREs","webkit","pointerExtend","deprecated","vendor","copyCoords","src","page","client","timeStamp","setEventXY","targetObj","pointers","pointer","pointerAverage","getPageXY","getClientXY","setEventDeltas","prev","cur","dt","isNativePointer","Touch","getXY","xy","scrollX","scrollY","getScrollXY","win","getPointerId","pointerId","identifier","getActualElement","correspondingUseElement","rootNode","defaultView","parentWindow","getElementClientRect","clientRect","getBoundingClientRect","getClientRects","getElementRect","getTouchPair","touches","changedTouches","average","screenX","screenY","touchBBox","minX","minY","maxX","maxY","touchDistance","sourceX","sourceY","dx","dy","touchAngle","prevAngle","angle","atan","PI","dr","drClamped","getOriginXY","interactable","parentElement","getRect","closest","_getQBezierValue","t","p1","p2","p3","iT","getQuadraticCurvePoint","startX","startY","cpX","cpY","endX","endY","position","easeOutQuad","c","d","nodeContains","parent","child","parentNode","selector","matchesSelector","host","inContext","testIgnore","interactableElement","matchesUpTo","testAllow","checkAxis","thisAxis","checkSnap","action","checkRestrict","checkAutoScroll","withinInteractionLimit","maxActions","activeInteractions","targetCount","targetElementCount","otherAction","active","interacting","indexOfDeepestElement","dropzone","deepestZone","index","deepestZoneParents","dropzoneParents","unshift","ownerSVGElement","parents","lastChild","previousSibling","Interaction","dropTarget","dropElement","prevDropTarget","prevDropElement","matches","matchElements","inertiaStatus","smoothEnd","ending","startEvent","upCoords","xe","ye","t0","vx0","vys","duration","resumeDx","resumeDy","lambda_v0","one_ve_v0","Function","bind","boundInertiaFrame","inertiaFrame","boundSmoothEndFrame","smoothEndFrame","that","activeDrops","dropzones","rects","pointerIds","downTargets","downTimes","holdTimers","prevCoords","curCoords","startCoords","pointerDelta","downEvent","downPointer","_eventTarget","_curEventTarget","prevEvent","tapTime","prevTap","startOffset","restrictOffset","snapOffsets","startDistance","prevDistance","distance","scale","startAngle","snapStatus","realX","realY","snappedX","snappedY","locked","changed","restrictStatus","restrictedX","restrictedY","restricted","pointerIsDown","pointerWasMoved","gesturing","dragging","resizing","resizeAxes","mouse","ptr","pointerOver","eventTarget","curMatches","curMatchElements","prevTargetElement","addPointer","elementInteractable","get","elementAction","validateAction","getAction","pushCurMatches","forEachSelector","validateSelector","pointerHover","move","curEventTarget","_doc","style","cursor","getActionCursor","checkAndPreventDefault","pointerOut","selectorDown","eventCopy","pointerIndex","setTimeout","pointerHold","collectEventTargets","pushMatches","context","querySelectorAll","pointerDown","forceAction","_element","newAction","setModifications","coords","preEnd","shouldMove","shouldSnap","shouldRestrict","setSnapping","setRestriction","setStartOffsets","rect","snapOffset","elementRect","pointerMove","pageUp","clientUp","inertiaPosition","recordPointer","duplicateMove","clearTimeout","InteractEvent","absX","abs","absY","targetAxis","thisInteraction","getDraggable","selectorInteractable","starting","autoScrollMove","dragStart","dragEvent","fire","setActiveDrops","dropEvents","getDropEvents","fireActiveDrops","dragMove","draggableElement","getDrop","leave","enter","resizeStart","resizeEvent","startRect","linkedEdges","_linkedEdges","resizeStartAspectRatio","resizeRects","previous","delta","deltaRect","resizeMove","invertible","originalEdges","swap","edge","gestureStart","gestureEvent","ds","gestureMove","isNaN","pointerUp","pointerEnd","removePointer","pointerCancel","ie8Dblclick","endEvent","inertiaOptions","pointerSpeed","inertiaPossible","endSnap","endRestrict","snapRestrict","vy0","v0","calcInertia","statusObject","useStatusXY","modifiedXe","modifiedYe","collectDrops","drops","dropElements","j","currentElement","prevElement","dragElement","possibleDrops","validDrops","dropCheck","dropIndex","pointerEvent","relatedTarget","draggable","dragLeave","prevDropzone","dragEnter","dragmove","currentAction","clearTargets","lambda","te","progress","exp","quadPoint","eventType","collectSelectors","els","_iEvents","interact","isSet","firePointers","interval","createNewDoubleTap","preventOriginalDefault","originalPointer","pointerType","double","propagationStopped","doubleTap","matchElement","pageCoords","status","relIndex","relative","inRange","snapChanged","restriction","prevent","inertiaDur","log","innerWidth","innerHeight","_updateEventTargets","getInteractionFromPointer","mouseEvent","doOnInteractions","method","path","phase","related","clientX0","clientY0","ctrlKey","altKey","shiftKey","metaKey","button","buttons","detail","axes","box","da","prevScale","velocityX","velocityY","atan2","up","down","swipe","cursorKey","edgeNames","checkResizeEdge","defaultActionChecker","shouldResize","resizeEdges","resizeOptions","actionName","interactionListeners","delegateListener","fakeEvent","delegated","selectors","contexts","delegateUseCapture","indexOfElement","interactableGet","callback","Interactable","Node","listenToDocument","set","setOnEvents","phases","ondrop","ondropactivate","ondropdeactivate","ondragenter","ondragleave","ondropmove","onstart","onmove","onend","oninertiastart","setPerAction","option","checker","dropped","dropOverlap","horizontal","vertical","dragRect","cx","cy","overlapArea","overlapRatio","newValue","resizable","squareResize","gesturable","actions","setOptions","thisOption","mode","createSnapGrid","gridOffset","anchors","paths","elementOrigin","allActions","rectCheck","rectChecker","iEvent","onEvent","funcName","search","trim","split","off","eventList","matchFound","useCap","methods","perActions","settings","setting","unset","warnOnce","message","warned","console","warn","apply","arguments","enableDragging","enableResizing","enableGesturing","debug","downTime","getPointerAverage","getTouchBBox","getTouchDistance","getTouchAngle","newvalue","offsetX","offsetY","gridx","round","gridy","newX","newY","endAllInteractions","doc","over","out","cancel","frameElement","parentDoc","error","windowParentError","array","nodeList","replace","limit","elems","lastTime","vendors","currTime","timeToCall","module","exports","define","amd","AutoTooltips","CellCopyManager","CellSelectionModel","CheckboxSelectColum","HeaderButtons","HeaderMenu","RowMoveManager","RowSelectionModel","enableForCells","enableForHeaderCells","maxToolTipLength","onMouseEnter","handleMouseEnter","onHeaderMouseEnter","handleHeaderMouseEnter","$node","getCellNode","text","scrollWidth","substr","attr","toolTip","_copiedRanges","onKeyDown","handleKeyDown","ranges","getEditorLock","which","clearCopySelection","onCopyCancelled","getSelectionModel","getSelectedRanges","markCopySelection","onCopyCells","onPasteCells","getColumns","hash","k","setCellCssStyles","removeCellCssStyles","selectActiveCell","_ranges","_selector","_options","onActiveCellChanged","handleActiveCellChange","registerPlugin","handleCellRangeSelected","handleBeforeCellRangeSelected","unregisterPlugin","removeInvalidRanges","r","setSelectedRanges","onSelectedRangesChanged","last","getActiveCell","pop","dRow","dCell","dirRow","dirCell","new_last","viewRow","viewCell","scrollRowIntoView","scrollCellIntoView","CheckboxSelectColumn","_selectedRowsLookup","columnId","cssClass","onSelectedRowsChanged","handleSelectedRowsChanged","onClick","handleClick","onHeaderClick","handleHeaderClick","selectedRows","getSelectedRows","lookup","invalidateRow","render","getDataLength","updateColumnHeader","toggleRowSelection","is","setSelectedRows","grep","getColumnDefinition","field","sortable","formatter","checkboxSelectionFormatter","columnDef","dataContext","buttonCssClass","onHeaderCellRendered","handleHeaderCellRendered","onBeforeHeaderCellDestroy","handleBeforeHeaderCellDestroy","setColumns","header","btn","data","showOnHover","image","tooltip","command","handleButtonClick","classList","find","onCommand","buttonImage","$menu","$activeHeaderColumn","body","handleBodyMouseDown","unbind","hideMenu","removeClass","menu","$el","showMenu","$menuButton","onBeforeMenuShow","getContainerNode","empty","items","item","$li","handleMenuItemClick","disabled","$icon","iconCssClass","iconImage","cancelEditOnDrag","behavior","inArray","rowHeight","getOptions","selectionProxy","guide","insertBefore","eventData","onBeforeMoveRows","canMove","onMoveRows","_inHandler","selectActiveRow","wrapHandler","rangesToRows","rowsToRanges","lastCell","getRowsRange","activeRow","canCellBeActive","multiSelect","selection","idx","setActiveCell","Editors","Formatters","Data","Grid","FrozenGrid","Plugins","SlickGrid","scrollbarDimensions","maxSupportedCssHeight","defaults","explicitInitialization","defaultColumnWidth","enableAddRow","leaveSpaceForNewRows","editable","autoEdit","enableCellNavigation","enableColumnReorder","asyncEditorLoading","asyncEditorLoadDelay","forceFitColumns","enableAsyncPostRender","asyncPostRenderDelay","autoHeight","editorLock","showHeaderRow","headerRowHeight","showFooterRow","footerRowHeight","showTopPanel","topPanelHeight","formatterFactory","editorFactory","cellFlashingCssClass","selectedCellCssClass","enableTextSelectionOnCells","dataItemColumnValueExtractor","frozenBottom","frozenColumn","frozenRow","fullWidthRows","multiColumnSort","defaultFormatter","forceSyncScrolling","addNewRowCssClass","columnDefaults","minWidth","rerenderOnResize","headerCssClass","defaultSortAsc","focusable","selectable","th","h","ph","cj","vScrollDir","$container","uid","random","self","$focusSink","$focusSink2","$groupHeaders","$headerScroller","$headers","$headerRow","$headerRowScroller","$headerRowSpacerL","$headerRowSpacerR","$footerRow","$footerRowScroller","$footerRowSpacerL","$footerRowSpacerR","$topPanelScroller","$topPanel","$viewport","$canvas","$style","$boundAncestors","stylesheet","columnCssRulesL","columnCssRulesR","viewportH","viewportW","canvasWidth","canvasWidthL","canvasWidthR","headersWidth","headersWidthL","headersWidthR","viewportHasHScroll","viewportHasVScroll","headerColumnWidthDiff","headerColumnHeightDiff","cellWidthDiff","cellHeightDiff","absoluteColumnMinWidth","hasFrozenRows","frozenRowsHeight","actualFrozenRow","paneTopH","paneBottomH","viewportTopH","viewportBottomH","topPanelH","headerRowH","footerRowH","tabbingDirection","$activeCanvasNode","$activeViewportNode","activePosX","activeCell","activeCellNode","currentEditor","serializedEditorValue","rowsCache","renderedRows","numVisibleRows","prevScrollTop","lastRenderedScrollTop","lastRenderedScrollLeft","prevScrollLeft","selectionModel","plugins","cellCssClasses","sortColumns","columnPosLeft","columnPosRight","h_editorLoader","h_render","h_postrender","postProcessedRows","postProcessToRow","postProcessFromRow","counter_rows_rendered","counter_rows_removed","rowNodeFromLastMouseWheelEvent","zombieRowNodeFromLastMouseWheelEvent","$paneHeaderL","$paneHeaderR","$paneTopL","$paneTopR","$paneBottomL","$paneBottomR","$headerScrollerL","$headerScrollerR","$headerL","$headerR","$groupHeadersL","$groupHeadersR","$headerRowScrollerL","$headerRowScrollerR","$footerRowScrollerL","$footerRowScrollerR","$headerRowL","$headerRowR","$footerRowL","$footerRowR","$topPanelScrollerL","$topPanelScrollerR","$topPanelL","$topPanelR","$viewportTopL","$viewportTopR","$viewportBottomL","$viewportBottomR","$canvasTopL","$canvasTopR","$canvasBottomL","$canvasBottomR","$viewportScrollContainerX","$viewportScrollContainerY","$headerScrollContainer","$headerRowScrollContainer","$footerRowScrollContainer","Error","getMaxSupportedCssHeight","measureScrollbar","validateAndEnforceOptions","m","maxWidth","getCanvasWidth","clone","finishInitialization","getViewportWidth","getViewportHeight","measureCellPaddingAndBorder","disableSelection","setFrozenOptions","setPaneVisibility","setScroller","setOverflow","updateColumnCaches","createColumnHeaders","createColumnGroupHeaders","createColumnFooter","setupColumnSort","createCssRules","resizeCanvas","bindAncestorScrollEvents","handleScroll","mousewheel","handleMouseWheel","handleHeaderContextMenu","delegate","handleHeaderMouseLeave","handleHeaderRowScroll","handleFooterRowScroll","handleDblClick","handleContextMenu","handleMouseLeave","toLowerCase","hasFrozenColumns","plugin","setSelectionModel","model","handleSelectedRangesChanged","getActiveCanvasNode","setActiveCanvasNode","getCanvases","getViewportNode","getActiveViewportNode","setActiveViewPortNode","setActiveViewportNode","$c","dim","clientWidth","clientHeight","getHeadersWidth","ii","getHeadersWidthL","getHeadersWidthR","availableWidth","totalRowWidth","updateCanvasWidth","forceColumnWidthsUpdate","oldCanvasWidth","oldCanvasWidthL","oldCanvasWidthR","widthChanged","applyColumnWidths","$target","jquery","supportedHeight","testUpTo","div","elem","scrollHeight","$elem","handleActiveCellPositionChange","unbindAncestorScrollEvents","$header","children","eq","trigger","html","getHeaderRow","getHeaderRowColumn","$headerRowTarget","getFooterRow","getFooterRowColumn","$footerRowTarget","$footer","each","onBeforeFooterRowCellDestroy","footerRowCell","onFooterRowCellRendered","columnsLength","frozenColumnsValid","groupColumns","indexGroup","alert","applyColumnGroupHeaderWidths","onMouseLeave","onBeforeHeaderRowCellDestroy","$headerTarget","append","headerRowCell","onHeaderRowCellRendered","setSortColumns","setupColumnResize","setupColumnReorder","click","hasClass","$col","sortOpts","sortAsc","onSort","sortCol","sortCols","col","currentPositionInHeader","currentPosition","limitPositionInGroup","idColumn","groupColumnOfPreviousPosition","startLimit","endLimit","some","groupColumn","arr","lastIndexOf","columnPositionValidInGroup","$item","positionValid","placeholder","createElement","className","offsetWidth","offsetHeight","after","marginLeft","transform","validPositionInGroup","removeChild","newColumns","removeData","onColumnsReordered","impactedColumns","getImpactedColumns","columnElements","minPageX","maxPageX","firstResizable","lastResizable","$handle","activeColumn","previousWidth","autosizeColumns","applyColumnHeaderWidths","syncColumnCellResize","invalidateAllRows","onColumnsResized","getVBoxDelta","p","val","parseFloat","parseInt","dataLength","v","rules","styleSheet","cssText","join","appendChild","getColumnCssRules","sheets","styleSheets","ownerNode","owningElement","cssRules","columnIdx","selectorText","exec","removeCssRules","onBeforeDestroy","evt","getEditController","widths","shrinkLeeway","total","prevTotal","availWidth","shrinkProportion","absMinWidth","shrinkSize","floor","growProportion","currentWidth","growSize","reRender","$groupHeader","currentColumnIndex","$groupHeaderColumn","$headerColumn","next","outerWidth","headers","w","rule","setSortColumn","ascending","cols","headerColumnEls","columnIndex","getSortColumns","columnDefinitions","_treeColumns","makeActiveCellNormal","setData","newData","scrollToTop","updateRowCount","scrollTo","getData","getLength","getDataLengthIncludingAddNew","getDataItem","getItem","getTopPanel","setTopPanelVisibility","slideDown","slideUp","setHeaderRowVisibility","setFooterRowVisibility","fadeIn","getRowTop","getRowFromPosition","oldOffset","newScrollTop","getVisibleRange","cleanupRows","updateRowPositions","onViewportChanged","getFormatter","rowMetadata","getItemMetadata","columnOverrides","callFormatter","metadata","columnData","getEditor","columnMetadata","editor","getDataItemValueForColumn","appendRowHtml","stringArrayL","stringArrayR","dataLoading","rowCss","cssClasses","frozenRowOffset","getFrozenRowOffset","rowHtml","colspan","leftPx","rightPx","appendCellHtml","stringArray","cellCss","key","cellRenderQueue","cellColSpans","rangeToKeep","removeFrozenRow","removeRowFromCache","invalidate","cacheEntry","rowNode","invalidateRows","rl","updateCell","cellNode","loadValue","innerHTML","invalidatePostProcessingResults","updateRow","ensureCellNodesInRowsCache","cellNodesByColumnIdx","outerHeight","ceil","paneBottomTop","dataLengthIncludingAddNew","numberOfRows","oldH","tempViewportH","oldViewportHasVScroll","l","resetActiveCell","oldScrollTopInRange","viewportTop","viewportLeft","getRenderedRange","buffer","minBuffer","$lastNode","cleanUpCells","totalCellsRemoved","cellsToRemove","cellToRemove","cleanUpAndRenderCells","processedRows","cellsAdded","totalCellsAdded","btm","processedRow","renderRows","needToReselectCell","xRight","firstChild","startPostProcessing","asyncPostProcessRows","rendered","renderedFrozenRows","deltaX","deltaY","$rowNode","$gridCanvas","zombieRow","handled","_handleScroll","isMouseWheel","maxScrollDistanceY","maxScrollDistanceX","hasFrozenCols","vScrollDist","hScrollDist","onScroll","asyncPostRender","updateCellCssStylesOnRenderedRows","addedHash","removedHash","addedRowHash","removedRowHash","addCellCssStyles","onCellCssStylesChanged","prevHash","getCellCssStyles","flashCell","toggleCellClass","times","$cell","queue","toggleClass","dequeue","cellExists","retval","cancelEditAndSetFocus","navigatePageDown","navigatePageUp","navigateLeft","navigateRight","navigateUp","navigateDown","navigateNext","commitEditAndSetFocus","makeActiveCellEditable","navigatePrev","activeElement","setFocus","setActiveCellInternal","onContextMenu","onDblClick","gotoCell","onHeaderMouseLeave","onHeaderContextMenu","getCellFromNode","cls","getRowFromNode","rowOffset","isBottom","y1","y2","x1","x2","doPaging","getColspan","scrollRight","newCell","opt_editMode","activeCellChanged","$activeCellNode","$activeCellOffset","isCellPotentiallyEditable","scrollActiveCellIntoView","clearTextSelection","getSelection","sel","removeAllRanges","cannotTriggerInsert","onBeforeCellEditorDestroy","onBeforeEditCell","gridPosition","absBox","commitChanges","cancelChanges","serializeValue","offsetTop","offsetLeft","offsetParent","getActiveCellPosition","getGridPosition","onActiveCellPositionChanged","cellBox","getCellEditor","getActiveCellNode","viewportScrollH","rowAtTop","rowAtBottom","scrollRowToTop","scrollPage","dir","deltaRows","prevCell","prevActivePosX","findFirstFocusableCell","findLastFocusableCell","lastFocusableCell","gotoRight","posX","gotoLeft","firstFocusableCell","pos","gotoDown","gotoUp","gotoNext","gotoPrev","lastSelectableCell","navigate","tabbingDirections","stepFunctions","stepFn","isAddNewRow","forceEdit","isValueChanged","validationResults","validate","editCommand","serializedValue","prevSerializedValue","execute","applyValue","onCellChange","undo","editCommandHandler","newItem","onAddNewRow","onValidationError","s","eval","expr","Aggregators","Avg","AvgAggregator","Min","MinAggregator","Max","MaxAggregator","Sum","SumAggregator","DataView","groupItemMetadataProvider","inlineFilters","idProperty","idxById","rowsById","updated","suspend","fastSortField","sortComparer","refreshHints","prevRefreshHints","filterArgs","filteredItems","compiledFilter","compiledFilterWithCaching","filterCache","groupingInfoDefaults","getter","comparer","predefinedValues","aggregators","aggregateEmpty","aggregateCollapsed","aggregateChildGroups","displayTotalsRow","lazyTotalsCalculation","groupingInfos","toggledGroupsByLevel","groupingDelimiter","pagesize","pagenum","totalRows","onRowCountChanged","onRowsChanged","onPagingInfoChanged","beginUpdate","endUpdate","refresh","setRefreshHints","hints","setFilterArgs","updateIdxById","startingIndex","ensureIdUniqueness","getItems","setItems","objectIdProperty","setPagingOptions","pageSize","pageNum","getPagingInfo","totalPages","dataView","reverse","fastSort","oldToString","reSort","setFilter","filterFn","compileFilter","compileFilterWithCaching","getGrouping","setGrouping","groupingInfo","GroupItemMetadataProvider","Array","gi","getterIsAFn","compiledAccumulators","compileAccumulatorLoop","groupBy","valueGetter","valueFormatter","setAggregators","groupAggregators","includeCollapsed","getItemByIdx","getIdxById","ensureRowsByIdCache","getRowById","getItemById","mapIdsToRows","idArray","mapRowsToIds","rowArray","updateItem","insertItem","addItem","deleteItem","calculateTotals","getGroupRowMetadata","getTotalsRowMetadata","expandCollapseAllGroups","collapse","collapseAllGroups","expandAllGroups","expandCollapseGroup","collapseGroup","varArgs","slice","arg0","expandGroup","getGroups","extractGroups","parentGroup","groupsByVal","isLeafLevel","agg","storeResult","addGroupTotals","addTotals","groupCollapsed","toggledGroups","g","flattenGroupedRows","groupedRows","gl","jj","getFunctionInfo","fnRegex","params","aggregator","accumulatorInfo","accumulate","displayName","filterInfo","filterPath1","filterPath2","filterBody","tpl","uncompiledFilter","uncompiledFilterWithCaching","cache","getFilteredAndPagedItems","batchFilter","batchFilterWithCaching","isFilterNarrowing","isFilterExpanding","isFilterUnchanged","paged","getRowDiffs","newRows","eitherIsNonData","diff","ignoreDiffsBefore","ignoreDiffsAfter","recalc","_items","countBefore","totalRowsBefore","syncGridSelection","preserveHidden","preserveHiddenOnSelectionChange","inHandler","selectedRowIds","onSelectedRowIdsChanged","setSelectedRowIds","rowIds","update","newSelectedRowIds","existing","syncGridCellCssStyles","hashById","storeCellCssStyles","newHash","field_","count_","nonNullCount_","sum_","groupTotals","avg","min_","max_","sum","Text","TextEditor","Integer","IntegerEditor","Float","FloatEditor","DateEditor","YesNoSelect","YesNoSelectEditor","Checkbox","CheckboxEditor","LongText","LongTextEditor","$input","defaultValue","select","getValue","setValue","state","msg","validator","getDecimalPlaces","rtn","editorFixedDecimalPlaces","DefaultDecimalPlaces","decPlaces","toFixed","flatInstance","defaultDate","date","open","positionCalendar","close","$select","PercentCompleteEditor","$wrapper","save","PercentComplete","PercentCompleteFormatter","PercentCompleteBar","PercentCompleteBarFormatter","YesNo","YesNoFormatter","Checkmark","CheckmarkFormatter","color","enableAsyncPostRenderCleanup","asyncPostRenderCleanupDelay","createFooterRow","$headerRowSpacer","$footerRowSpacer","jQueryNewWidthBehaviour","h_postrenderCleanup","postProcessedCleanupQueue","postProcessgroupId","zombieRowCacheFromLastMouseWheelEvent","zombieRowPostProcessedFromLastMouseWheelEvent","cssShow","visibility","display","$hiddenParents","oldProps","cacheCssForHiddenInit","restoreCssFromHiddenInit","addBack","not","old","rowWidth","verArray","startPostProcessingCleanup","queuePostProcessedRowForCleanup","postProcessedRow","rowIdx","actionType","groupId","detach","queuePostProcessedCellForCleanup","cellnode","asyncPostProcessCleanupRows","processedStatus","entry","shift","asyncPostRenderCleanup","keyCaptureList","useEditor","suppressClearOnEdit"],"mappings":"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","file":"slick.es6.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fc1fcdbba78514f7b176","/** *\n * Contains core SlickGrid classes.\n * @module Core\n * @namespace Slick\n */\nconst Slick = {\n  Event: Event,\n  EventData: EventData,\n  EventHandler: EventHandler,\n  Range: Range,\n  NonDataRow: NonDataItem,\n  Group: Group,\n  GroupTotals: GroupTotals,\n  EditorLock: EditorLock,\n  /** *\n   * A global singleton editor lock.\n   * @class GlobalEditorLock\n   * @static\n   * @constructor\n   */\n  GlobalEditorLock: new EditorLock(),\n  TreeColumns: TreeColumns,\n\n  keyCode: {\n    BACKSPACE: 8,\n    DELETE: 46,\n    DOWN: 40,\n    END: 35,\n    ENTER: 13,\n    ESCAPE: 27,\n    HOME: 36,\n    INSERT: 45,\n    LEFT: 37,\n    PAGE_DOWN: 34,\n    PAGE_UP: 33,\n    RIGHT: 39,\n    TAB: 9,\n    UP: 38\n  }\n};\n\nglobal.Slick = Slick;\nexport default Slick;\n\n/***\n * An event object for passing data to event handlers and letting them control propagation.\n * <p>This is pretty much identical to how W3C and jQuery implement events.</p>\n * @class EventData\n * @constructor\n */\nfunction EventData() {\n  var isPropagationStopped = false;\n  var isImmediatePropagationStopped = false;\n\n  /***\n   * Stops event from propagating up the DOM tree.\n   * @method stopPropagation\n   */\n  this.stopPropagation = function() {\n    isPropagationStopped = true;\n  };\n\n  /***\n   * Returns whether stopPropagation was called on this event object.\n   * @method isPropagationStopped\n   * @return {Boolean}\n   */\n  this.isPropagationStopped = function() {\n    return isPropagationStopped;\n  };\n\n  /***\n   * Prevents the rest of the handlers from being executed.\n   * @method stopImmediatePropagation\n   */\n  this.stopImmediatePropagation = function() {\n    isImmediatePropagationStopped = true;\n  };\n\n  /***\n   * Returns whether stopImmediatePropagation was called on this event object.\\\n   * @method isImmediatePropagationStopped\n   * @return {Boolean}\n   */\n  this.isImmediatePropagationStopped = function() {\n    return isImmediatePropagationStopped;\n  }\n}\n\n/***\n * A simple publisher-subscriber implementation.\n * @class Event\n * @constructor\n */\nfunction Event() {\n  var handlers = [];\n\n  /***\n   * Adds an event handler to be called when the event is fired.\n   * <p>Event handler will receive two arguments - an <code>EventData</code> and the <code>data</code>\n   * object the event was fired with.<p>\n   * @method subscribe\n   * @param fn {Function} Event handler.\n   */\n  this.subscribe = function(fn) {\n    handlers.push(fn);\n  };\n\n  /***\n   * Removes an event handler added with <code>subscribe(fn)</code>.\n   * @method unsubscribe\n   * @param fn {Function} Event handler to be removed.\n   */\n  this.unsubscribe = function(fn) {\n    for (var i = handlers.length - 1; i >= 0; i--) {\n      if (handlers[i] === fn) {\n        handlers.splice(i, 1);\n      }\n    }\n  };\n\n  /***\n   * Fires an event notifying all subscribers.\n   * @method notify\n   * @param args {Object} Additional data object to be passed to all handlers.\n   * @param e {EventData}\n   *      Optional.\n   *      An <code>EventData</code> object to be passed to all handlers.\n   *      For DOM events, an existing W3C/jQuery event object can be passed in.\n   * @param scope {Object}\n   *      Optional.\n   *      The scope (\"this\") within which the handler will be executed.\n   *      If not specified, the scope will be set to the <code>Event</code> instance.\n   */\n  this.notify = function(args, e, scope) {\n    e = e || new EventData();\n    scope = scope || this;\n\n    var returnValue;\n    for (var i = 0; i < handlers.length && !(e.isPropagationStopped() || e.isImmediatePropagationStopped()); i++) {\n      returnValue = handlers[i].call(scope, e, args);\n    }\n\n    return returnValue;\n  };\n}\n\nfunction EventHandler() {\n  var handlers = [];\n\n  this.subscribe = function(event, handler) {\n    handlers.push({\n      event: event,\n      handler: handler\n    });\n    event.subscribe(handler);\n\n    return this; // allow chaining\n  };\n\n  this.unsubscribe = function(event, handler) {\n    var i = handlers.length;\n    while (i--) {\n      if (handlers[i].event === event && handlers[i].handler === handler) {\n        handlers.splice(i, 1);\n        event.unsubscribe(handler);\n        return;\n      }\n    }\n\n    return this; // allow chaining\n  };\n\n  this.unsubscribeAll = function() {\n    var i = handlers.length;\n    while (i--) {\n      handlers[i].event.unsubscribe(handlers[i].handler);\n    }\n    handlers = [];\n\n    return this; // allow chaining\n  }\n}\n\n/***\n * A structure containing a range of cells.\n * @class Range\n * @constructor\n * @param fromRow {Integer} Starting row.\n * @param fromCell {Integer} Starting cell.\n * @param toRow {Integer} Optional. Ending row. Defaults to <code>fromRow</code>.\n * @param toCell {Integer} Optional. Ending cell. Defaults to <code>fromCell</code>.\n */\nfunction Range(fromRow, fromCell, toRow, toCell) {\n  if (toRow === undefined && toCell === undefined) {\n    toRow = fromRow;\n    toCell = fromCell;\n  }\n\n  /***\n   * @property fromRow\n   * @type {Integer}\n   */\n  this.fromRow = Math.min(fromRow, toRow);\n\n  /***\n   * @property fromCell\n   * @type {Integer}\n   */\n  this.fromCell = Math.min(fromCell, toCell);\n\n  /***\n   * @property toRow\n   * @type {Integer}\n   */\n  this.toRow = Math.max(fromRow, toRow);\n\n  /***\n   * @property toCell\n   * @type {Integer}\n   */\n  this.toCell = Math.max(fromCell, toCell);\n\n  /***\n   * Returns whether a range represents a single row.\n   * @method isSingleRow\n   * @return {Boolean}\n   */\n  this.isSingleRow = function() {\n    return this.fromRow == this.toRow;\n  };\n\n  /***\n   * Returns whether a range represents a single cell.\n   * @method isSingleCell\n   * @return {Boolean}\n   */\n  this.isSingleCell = function() {\n    return this.fromRow == this.toRow && this.fromCell == this.toCell;\n  };\n\n  /***\n   * Returns whether a range contains a given cell.\n   * @method contains\n   * @param row {Integer}\n   * @param cell {Integer}\n   * @return {Boolean}\n   */\n  this.contains = function(row, cell) {\n    return row >= this.fromRow && row <= this.toRow && cell >= this.fromCell && cell <= this.toCell;\n  };\n\n  /***\n   * Returns a readable representation of a range.\n   * @method toString\n   * @return {String}\n   */\n  this.toString = function() {\n    if (this.isSingleCell()) {\n      return \"(\" + this.fromRow + \":\" + this.fromCell + \")\";\n    } else {\n      return \"(\" + this.fromRow + \":\" + this.fromCell + \" - \" + this.toRow + \":\" + this.toCell + \")\";\n    }\n  }\n}\n\n\n/***\n * A base class that all special / non-data rows (like Group and GroupTotals) derive from.\n * @class NonDataItem\n * @constructor\n */\nfunction NonDataItem() {\n  this.__nonDataRow = true;\n}\n\n\n/***\n * Information about a group of rows.\n * @class Group\n * @extends Slick.NonDataItem\n * @constructor\n */\nfunction Group() {\n  this.__group = true;\n\n  /**\n   * Grouping level, starting with 0.\n   * @property level\n   * @type {Number}\n   */\n  this.level = 0;\n\n  /***\n   * Number of rows in the group.\n   * @property count\n   * @type {Integer}\n   */\n  this.count = 0;\n\n  /***\n   * Grouping value.\n   * @property value\n   * @type {Object}\n   */\n  this.value = null;\n\n  /***\n   * Formatted display value of the group.\n   * @property title\n   * @type {String}\n   */\n  this.title = null;\n\n  /***\n   * Whether a group is collapsed.\n   * @property collapsed\n   * @type {Boolean}\n   */\n  this.collapsed = false;\n\n  /***\n   * GroupTotals, if any.\n   * @property totals\n   * @type {GroupTotals}\n   */\n  this.totals = null;\n\n  /**\n   * Rows that are part of the group.\n   * @property rows\n   * @type {Array}\n   */\n  this.rows = [];\n\n  /**\n   * Sub-groups that are part of the group.\n   * @property groups\n   * @type {Array}\n   */\n  this.groups = null;\n\n  /**\n   * A unique key used to identify the group.  This key can be used in calls to DataView\n   * collapseGroup() or expandGroup().\n   * @property groupingKey\n   * @type {Object}\n   */\n  this.groupingKey = null;\n}\n\nGroup.prototype = new NonDataItem();\n\n/***\n * Compares two Group instances.\n * @method equals\n * @return {Boolean}\n * @param group {Group} Group instance to compare to.\n */\nGroup.prototype.equals = function(group) {\n  return this.value === group.value && this.count === group.count && this.collapsed === group.collapsed && this.title === group.title;\n};\n\n/***\n * Information about group totals.\n * An instance of GroupTotals will be created for each totals row and passed to the aggregators\n * so that they can store arbitrary data in it.  That data can later be accessed by group totals\n * formatters during the display.\n * @class GroupTotals\n * @extends Slick.NonDataItem\n * @constructor\n */\nfunction GroupTotals() {\n  this.__groupTotals = true;\n\n  /***\n   * Parent Group.\n   * @param group\n   * @type {Group}\n   */\n  this.group = null;\n\n  /***\n   * Whether the totals have been fully initialized / calculated.\n   * Will be set to false for lazy-calculated group totals.\n   * @param initialized\n   * @type {Boolean}\n   */\n  this.initialized = false;\n}\n\nGroupTotals.prototype = new NonDataItem();\n\n/***\n * A locking helper to track the active edit controller and ensure that only a single controller\n * can be active at a time.  This prevents a whole class of state and validation synchronization\n * issues.  An edit controller (such as SlickGrid) can query if an active edit is in progress\n * and attempt a commit or cancel before proceeding.\n * @class EditorLock\n * @constructor\n */\nfunction EditorLock() {\n  var activeEditController = null;\n\n  /***\n   * Returns true if a specified edit controller is active (has the edit lock).\n   * If the parameter is not specified, returns true if any edit controller is active.\n   * @method isActive\n   * @param editController {EditController}\n   * @return {Boolean}\n   */\n  this.isActive = function(editController) {\n    return (editController ? activeEditController === editController : activeEditController !== null);\n  };\n\n  /***\n   * Sets the specified edit controller as the active edit controller (acquire edit lock).\n   * If another edit controller is already active, and exception will be thrown.\n   * @method activate\n   * @param editController {EditController} edit controller acquiring the lock\n   */\n  this.activate = function(editController) {\n    if (editController === activeEditController) { // already activated?\n      return;\n    }\n    if (activeEditController !== null) {\n      throw \"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController\";\n    }\n    if (!editController.commitCurrentEdit) {\n      throw \"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()\";\n    }\n    if (!editController.cancelCurrentEdit) {\n      throw \"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()\";\n    }\n    activeEditController = editController;\n  };\n\n  /***\n   * Unsets the specified edit controller as the active edit controller (release edit lock).\n   * If the specified edit controller is not the active one, an exception will be thrown.\n   * @method deactivate\n   * @param editController {EditController} edit controller releasing the lock\n   */\n  this.deactivate = function(editController) {\n    if (activeEditController !== editController) {\n      throw \"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one\";\n    }\n    activeEditController = null;\n  };\n\n  /***\n   * Attempts to commit the current edit by calling \"commitCurrentEdit\" method on the active edit\n   * controller and returns whether the commit attempt was successful (commit may fail due to validation\n   * errors, etc.).  Edit controller's \"commitCurrentEdit\" must return true if the commit has succeeded\n   * and false otherwise.  If no edit controller is active, returns true.\n   * @method commitCurrentEdit\n   * @return {Boolean}\n   */\n  this.commitCurrentEdit = function() {\n    return (activeEditController ? activeEditController.commitCurrentEdit() : true);\n  };\n\n  /***\n   * Attempts to cancel the current edit by calling \"cancelCurrentEdit\" method on the active edit\n   * controller and returns whether the edit was successfully cancelled.  If no edit controller is\n   * active, returns true.\n   * @method cancelCurrentEdit\n   * @return {Boolean}\n   */\n  this.cancelCurrentEdit = function cancelCurrentEdit() {\n    return (activeEditController ? activeEditController.cancelCurrentEdit() : true);\n  };\n}\n\n/**\n *\n * @param {Array} treeColumns Array com levels of columns\n * @returns {{hasDepth: 'hasDepth', getTreeColumns: 'getTreeColumns', extractColumns: 'extractColumns', getDepth: 'getDepth', getColumnsInDepth: 'getColumnsInDepth', getColumnsInGroup: 'getColumnsInGroup', visibleColumns: 'visibleColumns', filter: 'filter', reOrder: reOrder}}\n * @constructor\n */\nfunction TreeColumns(treeColumns) {\n\n  var columnsById = {};\n\n  function init() {\n    mapToId(treeColumns);\n  }\n\n  function mapToId(columns) {\n    columns.forEach(function(column) {\n      columnsById[column.id] = column;\n\n      if (column.columns) mapToId(column.columns);\n    });\n  }\n\n  function filter(node, condition) {\n\n    return node.filter(function(column) {\n\n      var valid = condition.call(column);\n\n      if (valid && column.columns) column.columns = filter(column.columns, condition);\n\n      return valid && (!column.columns || column.columns.length);\n    });\n\n  }\n\n  function sort(columns, grid) {\n    columns.sort(function(a, b) {\n      var indexA = getOrDefault(grid.getColumnIndex(a.id)),\n        indexB = getOrDefault(grid.getColumnIndex(b.id));\n\n      return indexA - indexB;\n    })\n      .forEach(function(column) {\n        if (column.columns) sort(column.columns, grid);\n      });\n  }\n\n  function getOrDefault(value) {\n    return typeof value === 'undefined' ? -1 : value;\n  }\n\n  function getDepth(node) {\n    if (node.length) for (var i in node)\n      return getDepth(node[i]);\n    else if (node.columns) return 1 + getDepth(node.columns);\n    else return 1;\n  }\n\n  function getColumnsInDepth(node, depth, current) {\n    var columns = [];\n    current = current || 0;\n\n    if (depth == current) {\n\n      if (node.length) node.forEach(function(n) {\n        if (n.columns) n.extractColumns = function() {\n          return extractColumns(n);\n        };\n      });\n\n      return node;\n    } else for (var i in node)\n      if (node[i].columns) {\n        columns = columns.concat(getColumnsInDepth(node[i].columns, depth, current + 1));\n      }\n\n    return columns;\n  }\n\n  function extractColumns(node) {\n    var result = [];\n\n    if (node.hasOwnProperty('length')) {\n\n      for (var i = 0; i < node.length; i++)\n        result = result.concat(extractColumns(node[i]));\n\n    } else {\n\n      if (node.hasOwnProperty('columns'))\n\n        result = result.concat(extractColumns(node.columns));\n\n      else return node;\n\n    }\n\n    return result;\n  }\n\n  function cloneTreeColumns() {\n    return $.extend(true, [], treeColumns);\n  }\n\n  init();\n\n  this.hasDepth = function() {\n\n    for (var i in treeColumns)\n      if (treeColumns[i].hasOwnProperty('columns')) return true;\n\n    return false;\n  };\n\n  this.getTreeColumns = function() {\n    return treeColumns;\n  };\n\n  this.extractColumns = function() {\n    return this.hasDepth() ? extractColumns(treeColumns) : treeColumns;\n  };\n\n  this.getDepth = function() {\n    return getDepth(treeColumns);\n  };\n\n  this.getColumnsInDepth = function(depth) {\n    return getColumnsInDepth(treeColumns, depth);\n  };\n\n  this.getColumnsInGroup = function(groups) {\n    return extractColumns(groups);\n  };\n\n  this.visibleColumns = function() {\n    return filter(cloneTreeColumns(), function() {\n      return this.visible;\n    });\n  };\n\n  this.filter = function(condition) {\n    return filter(cloneTreeColumns(), condition);\n  };\n\n  this.reOrder = function(grid) {\n    return sort(treeColumns, grid);\n  };\n\n  this.getById = function(id) {\n    return columnsById[id];\n  };\n\n  this.getInIds = function(ids) {\n    return ids.map(function(id) {\n      return columnsById[id];\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../src/slick.core.js","module.exports = require(\"jquery\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jquery\"\n// module id = 2\n// module chunks = 0","import $ from 'jquery';\nimport Slick from '../../src/slick.core';\n\nSlick.CellRangeDecorator = CellRangeDecorator;\nexport default CellRangeDecorator;\n\n/** *\n * Displays an overlay on top of a given cell range.\n *\n * TODO:\n * Currently, it blocks mouse events to DOM nodes behind it.\n * Use FF and WebKit-specific 'pointer-events' CSS style, or some kind of event forwarding.\n * Could also construct the borders separately using 4 individual DIVs.\n *\n * @param {Grid} grid\n * @param {Object} options\n */\nfunction CellRangeDecorator(grid, options){\n  let _elem;\n  const _defaults = {\n    selectionCssClass: 'slick-range-decorator',\n    selectionCss: {\n      zIndex: '9999',\n      border: '2px dashed red'\n    }\n  };\n\n  options = Object.assign({}, _defaults, options);\n\n  function show(range){\n    if (!_elem){\n      _elem = $('<div></div>', {css: options.selectionCss})\n        .addClass(options.selectionCssClass)\n        .css('position', 'absolute')\n        .appendTo(grid.getCanvasNode());\n    }\n\n    const from = grid.getCellNodeBox(range.fromRow, range.fromCell);\n    const to = grid.getCellNodeBox(range.toRow, range.toCell);\n\n    _elem.css({\n      top: from.top - 1,\n      left: from.left - 1,\n      height: to.bottom - from.top - 2,\n      width: to.right - from.left - 2\n    });\n\n    return _elem;\n  }\n\n  function hide(){\n    if (_elem){\n      _elem.remove();\n      _elem = null;\n    }\n  }\n\n  Object.assign(this, {\n    show,\n    hide\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.cellrangedecorator/slick.cellrangedecorator.js","import $ from 'jquery';\nimport Slick from '../../src/slick.core';\nimport CellRangeDecorator from '../slick.cellrangedecorator/slick.cellrangedecorator';\n\nSlick.CellRangeSelector = CellRangeSelector;\nexport default CellRangeSelector;\n\nfunction CellRangeSelector(options){\n  let _grid;\n  let _canvas;\n  let _dragging;\n  let _decorator;\n  let _range = {};\n\n  const _self = this;\n  const _handler = new Slick.EventHandler();\n  const _defaults = {\n    selectionCss: {\n      // 'border': '2px dashed blue'\n    }\n  };\n\n  function init(grid){\n    options = Object.assign({}, _defaults, options);\n    _decorator = new CellRangeDecorator(grid, options);\n    _grid = grid;\n    _canvas = _grid.getCanvasNode();\n    _handler\n      .subscribe(_grid.onDragInit, handleDragInit)\n      .subscribe(_grid.onDragStart, handleDragStart)\n      .subscribe(_grid.onDrag, handleDrag)\n      .subscribe(_grid.onDragEnd, handleDragEnd);\n  }\n\n  function destroy(){\n    _handler.unsubscribeAll();\n  }\n\n  function handleDragInit(e, dd){\n    // prevent the grid from cancelling drag'n'drop by default\n    e.stopImmediatePropagation();\n  }\n\n  function handleDragStart(jqueryEvent, interactEvent){\n    const cell = _grid.getCellFromEvent(interactEvent.originalEvent);\n    if (_self.onBeforeCellRangeSelected.notify(cell) !== false){\n      if (_grid.canCellBeSelected(cell.row, cell.cell)){\n        _dragging = true;\n        // jqueryEvent.stopImmediatePropagation();\n      }\n    }\n    if (!_dragging){\n      return;\n    }\n\n    _grid.focus();\n\n    const start = _grid.getCellFromPoint(\n      interactEvent.x0 - $(_canvas).offset().left,\n      interactEvent.y0 - $(_canvas).offset().top\n    );\n\n    _range = {\n      start,\n      end: {}\n    };\n\n    return _decorator.show(new Slick.Range(start.row, start.cell));\n  }\n\n  function handleDrag(e, interactEvent){\n    if (!_dragging){\n      return;\n    }\n    // e.stopImmediatePropagation();\n\n    const end = _grid.getCellFromPoint(\n      interactEvent.pageX - $(_canvas).offset().left,\n      interactEvent.pageY - $(_canvas).offset().top);\n\n    if (!_grid.canCellBeSelected(end.row, end.cell)){\n      return;\n    }\n\n    _range.end = end;\n    _decorator.show(new Slick.Range(_range.start.row, _range.start.cell, end.row, end.cell));\n  }\n\n  function handleDragEnd(e){\n    if (!_dragging){\n      return;\n    }\n\n    _dragging = false;\n    // e.stopImmediatePropagation();\n\n    _decorator.hide();\n    _self.onCellRangeSelected.notify({\n      range: new Slick.Range(\n        _range.start.row,\n        _range.start.cell,\n        _range.end.row,\n        _range.end.cell\n      )\n    });\n    _range = {};\n  }\n\n  Object.assign(this, {\n    init,\n    destroy,\n\n    onBeforeCellRangeSelected: new Slick.Event(),\n    onCellRangeSelected: new Slick.Event()\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.cellrangeselector/slick.cellrangeselector.js","/**\n * interact.js v1.2.6\n *\n * Copyright (c) 2012-2015 Taye Adeyemi <dev@taye.me>\n * Open source under the MIT License.\n * https://raw.github.com/taye/interact.js/master/LICENSE\n *\n * This file has been monkey patched to pass the originalEvent on to drag events\n */\n(function(realWindow){\n  'use strict';\n\n    // return early if there's no window to work with (eg. Node.js)\n  if (!realWindow){ return; }\n\n  var // get wrapped window if using Shadow DOM polyfill\n    window = (function(){\n            // create a TextNode\n      var el = realWindow.document.createTextNode('');\n\n            // check if it's wrapped by a polyfill\n      if (el.ownerDocument !== realWindow.document\n                && typeof realWindow.wrap === 'function'\n                && realWindow.wrap(el) === el){\n                // return wrapped window\n        return realWindow.wrap(realWindow);\n      }\n\n            // no Shadow DOM polyfil or native implementation\n      return realWindow;\n    }()),\n\n    document = window.document,\n    DocumentFragment = window.DocumentFragment || blank,\n    SVGElement = window.SVGElement || blank,\n    SVGSVGElement = window.SVGSVGElement || blank,\n    SVGElementInstance = window.SVGElementInstance || blank,\n    HTMLElement = window.HTMLElement || window.Element,\n\n    PointerEvent = (window.PointerEvent || window.MSPointerEvent),\n    pEventTypes,\n\n    hypot = Math.hypot || function(x, y){ return Math.sqrt(x * x + y * y); },\n\n    tmpXY = {},     // reduce object creation in getXY()\n\n    documents = [],   // all documents being listened to\n\n    interactables = [],   // all set interactables\n    interactions = [],   // all interactions\n\n    dynamicDrop = false,\n\n        // {\n        //      type: {\n        //          selectors: ['selector', ...],\n        //          contexts : [document, ...],\n        //          listeners: [[listener, useCapture], ...]\n        //      }\n        //  }\n    delegatedEvents = {},\n\n    defaultOptions = {\n      base: {\n        accept: null,\n        actionChecker: null,\n        styleCursor: true,\n        preventDefault: 'auto',\n        origin: { x: 0, y: 0 },\n        deltaSource: 'page',\n        allowFrom: null,\n        ignoreFrom: null,\n        _context: document,\n        dropChecker: null\n      },\n\n      drag: {\n        enabled: false,\n        manualStart: true,\n        max: Infinity,\n        maxPerElement: 1,\n\n        snap: null,\n        restrict: null,\n        inertia: null,\n        autoScroll: null,\n\n        axis: 'xy'\n      },\n\n      drop: {\n        enabled: false,\n        accept: null,\n        overlap: 'pointer'\n      },\n\n      resize: {\n        enabled: false,\n        manualStart: false,\n        max: Infinity,\n        maxPerElement: 1,\n\n        snap: null,\n        restrict: null,\n        inertia: null,\n        autoScroll: null,\n\n        square: false,\n        preserveAspectRatio: false,\n        axis: 'xy',\n\n                // use default margin\n        margin: NaN,\n\n                // object with props left, right, top, bottom which are\n                // true/false values to resize when the pointer is over that edge,\n                // CSS selectors to match the handles for each direction\n                // or the Elements for each handle\n        edges: null,\n\n                // a value of 'none' will limit the resize rect to a minimum of 0x0\n                // 'negate' will alow the rect to have negative width/height\n                // 'reposition' will keep the width/height positive by swapping\n                // the top and bottom edges and/or swapping the left and right edges\n        invert: 'none'\n      },\n\n      gesture: {\n        manualStart: false,\n        enabled: false,\n        max: Infinity,\n        maxPerElement: 1,\n\n        restrict: null\n      },\n\n      perAction: {\n        manualStart: false,\n        max: Infinity,\n        maxPerElement: 1,\n\n        snap: {\n          enabled: false,\n          endOnly: false,\n          range: Infinity,\n          targets: null,\n          offsets: null,\n\n          relativePoints: null\n        },\n\n        restrict: {\n          enabled: false,\n          endOnly: false\n        },\n\n        autoScroll: {\n          enabled: false,\n          container: null,     // the item that is scrolled (Window or HTMLElement)\n          margin: 60,\n          speed: 300       // the scroll speed in pixels per second\n        },\n\n        inertia: {\n          enabled: false,\n          resistance: 10,    // the lambda in exponential decay\n          minSpeed: 100,   // target speed must be above this for inertia to start\n          endSpeed: 10,    // the speed at which inertia is slow enough to stop\n          allowResume: true,  // allow resuming an action in inertia phase\n          zeroResumeDelta: true,  // if an action is resumed after launch, set dx/dy to 0\n          smoothEndDuration: 300    // animate to snap/restrict endOnly if there's no inertia\n        }\n      },\n\n      _holdDuration: 600\n    },\n\n        // Things related to autoScroll\n    autoScroll = {\n      interaction: null,\n      i: null,    // the handle returned by window.setInterval\n      x: 0, y: 0, // Direction each pulse is to scroll in\n\n            // scroll the window by the values in scroll.x/y\n      scroll: function(){\n        var options = autoScroll.interaction.target.options[autoScroll.interaction.prepared.name].autoScroll,\n          container = options.container || getWindow(autoScroll.interaction.element),\n          now = new Date().getTime(),\n                    // change in time in seconds\n          dtx = (now - autoScroll.prevTimeX) / 1000,\n          dty = (now - autoScroll.prevTimeY) / 1000,\n          vx, vy, sx, sy;\n\n                // displacement\n        if (options.velocity){\n          vx = options.velocity.x;\n          vy = options.velocity.y;\n        }\n        else {\n          vx = vy = options.speed;\n        }\n\n        sx = vx * dtx;\n        sy = vy * dty;\n\n        if (sx >= 1 || sy >= 1){\n          if (isWindow(container)){\n            container.scrollBy(autoScroll.x * sx, autoScroll.y * sy);\n          }\n          else if (container){\n            container.scrollLeft += autoScroll.x * sx;\n            container.scrollTop += autoScroll.y * sy;\n          }\n\n          if (sx >= 1) autoScroll.prevTimeX = now;\n          if (sy >= 1) autoScroll.prevTimeY = now;\n        }\n\n        if (autoScroll.isScrolling){\n          cancelFrame(autoScroll.i);\n          autoScroll.i = reqFrame(autoScroll.scroll);\n        }\n      },\n\n      isScrolling: false,\n      prevTimeX: 0,\n      prevTimeY: 0,\n\n      start: function(interaction){\n        autoScroll.isScrolling = true;\n        cancelFrame(autoScroll.i);\n\n        autoScroll.interaction = interaction;\n        autoScroll.prevTimeX = new Date().getTime();\n        autoScroll.prevTimeY = new Date().getTime();\n        autoScroll.i = reqFrame(autoScroll.scroll);\n      },\n\n      stop: function(){\n        autoScroll.isScrolling = false;\n        cancelFrame(autoScroll.i);\n      }\n    },\n\n        // Does the browser support touch input?\n    supportsTouch = (('ontouchstart' in window) || window.DocumentTouch && document instanceof window.DocumentTouch),\n\n        // Does the browser support PointerEvents\n    supportsPointerEvent = !!PointerEvent,\n\n        // Less Precision with touch input\n    margin = supportsTouch || supportsPointerEvent ? 20 : 10,\n\n    pointerMoveTolerance = 1,\n\n        // for ignoring browser's simulated mouse events\n    prevTouchTime = 0,\n\n        // Allow this many interactions to happen simultaneously\n    maxInteractions = Infinity,\n\n        // Check if is IE9 or older\n    actionCursors = (document.all && !window.atob) ? {\n      drag: 'move',\n      resizex: 'e-resize',\n      resizey: 's-resize',\n      resizexy: 'se-resize',\n\n      resizetop: 'n-resize',\n      resizeleft: 'w-resize',\n      resizebottom: 's-resize',\n      resizeright: 'e-resize',\n      resizetopleft: 'se-resize',\n      resizebottomright: 'se-resize',\n      resizetopright: 'ne-resize',\n      resizebottomleft: 'ne-resize',\n\n      gesture: ''\n    } : {\n      drag: 'move',\n      resizex: 'ew-resize',\n      resizey: 'ns-resize',\n      resizexy: 'nwse-resize',\n\n      resizetop: 'ns-resize',\n      resizeleft: 'ew-resize',\n      resizebottom: 'ns-resize',\n      resizeright: 'ew-resize',\n      resizetopleft: 'nwse-resize',\n      resizebottomright: 'nwse-resize',\n      resizetopright: 'nesw-resize',\n      resizebottomleft: 'nesw-resize',\n\n      gesture: ''\n    },\n\n    actionIsEnabled = {\n      drag: true,\n      resize: true,\n      gesture: true\n    },\n\n        // because Webkit and Opera still use 'mousewheel' event type\n    wheelEvent = 'onmousewheel' in document ? 'mousewheel' : 'wheel',\n\n    eventTypes = [\n      'dragstart',\n      'dragmove',\n      'draginertiastart',\n      'dragend',\n      'dragenter',\n      'dragleave',\n      'dropactivate',\n      'dropdeactivate',\n      'dropmove',\n      'drop',\n      'resizestart',\n      'resizemove',\n      'resizeinertiastart',\n      'resizeend',\n      'gesturestart',\n      'gesturemove',\n      'gestureinertiastart',\n      'gestureend',\n\n      'down',\n      'move',\n      'up',\n      'cancel',\n      'tap',\n      'doubletap',\n      'hold'\n    ],\n\n    globalEvents = {},\n\n        // Opera Mobile must be handled differently\n    isOperaMobile = navigator.appName == 'Opera' &&\n            supportsTouch &&\n            navigator.userAgent.match('Presto'),\n\n        // scrolling doesn't change the result of getClientRects on iOS 7\n    isIOS7 = (/iP(hone|od|ad)/.test(navigator.platform)\n                         && /OS 7[^\\d]/.test(navigator.appVersion)),\n\n        // prefix matchesSelector\n    prefixedMatchesSelector = 'matches' in Element.prototype ?\n                'matches' : 'webkitMatchesSelector' in Element.prototype ?\n                    'webkitMatchesSelector' : 'mozMatchesSelector' in Element.prototype ?\n                        'mozMatchesSelector' : 'oMatchesSelector' in Element.prototype ?\n                            'oMatchesSelector' : 'msMatchesSelector',\n\n        // will be polyfill function if browser is IE8\n    ie8MatchesSelector,\n\n        // native requestAnimationFrame or polyfill\n    reqFrame = realWindow.requestAnimationFrame,\n    cancelFrame = realWindow.cancelAnimationFrame,\n\n        // Events wrapper\n    events = (function(){\n      var useAttachEvent = ('attachEvent' in window) && !('addEventListener' in window),\n        addEvent = useAttachEvent ? 'attachEvent' : 'addEventListener',\n        removeEvent = useAttachEvent ? 'detachEvent' : 'removeEventListener',\n        on = useAttachEvent ? 'on' : '',\n\n        elements = [],\n        targets = [],\n        attachedListeners = [];\n\n      function add(element, type, listener, useCapture){\n        var elementIndex = indexOf(elements, element),\n          target = targets[elementIndex];\n\n        if (!target){\n          target = {\n            events: {},\n            typeCount: 0\n          };\n\n          elementIndex = elements.push(element) - 1;\n          targets.push(target);\n\n          attachedListeners.push((useAttachEvent ? {\n            supplied: [],\n            wrapped: [],\n            useCount: []\n          } : null));\n        }\n\n        if (!target.events[type]){\n          target.events[type] = [];\n          target.typeCount++;\n        }\n\n        if (!contains(target.events[type], listener)){\n          var ret;\n\n          if (useAttachEvent){\n            var listeners = attachedListeners[elementIndex],\n              listenerIndex = indexOf(listeners.supplied, listener);\n\n            var wrapped = listeners.wrapped[listenerIndex] || function(event){\n              if (!event.immediatePropagationStopped){\n                event.target = event.srcElement;\n                event.currentTarget = element;\n\n                event.preventDefault = event.preventDefault || preventDef;\n                event.stopPropagation = event.stopPropagation || stopProp;\n                event.stopImmediatePropagation = event.stopImmediatePropagation || stopImmProp;\n\n                if (/mouse|click/.test(event.type)){\n                  event.pageX = event.clientX + getWindow(element).document.documentElement.scrollLeft;\n                  event.pageY = event.clientY + getWindow(element).document.documentElement.scrollTop;\n                }\n\n                listener(event);\n              }\n            };\n\n            ret = element[addEvent](on + type, wrapped, Boolean(useCapture));\n\n            if (listenerIndex === -1){\n              listeners.supplied.push(listener);\n              listeners.wrapped.push(wrapped);\n              listeners.useCount.push(1);\n            }\n            else {\n              listeners.useCount[listenerIndex]++;\n            }\n          }\n          else {\n            ret = element[addEvent](type, listener, useCapture || false);\n          }\n          target.events[type].push(listener);\n\n          return ret;\n        }\n      }\n\n      function remove(element, type, listener, useCapture){\n        var i,\n          elementIndex = indexOf(elements, element),\n          target = targets[elementIndex],\n          listeners,\n          listenerIndex,\n          wrapped = listener;\n\n        if (!target || !target.events){\n          return;\n        }\n\n        if (useAttachEvent){\n          listeners = attachedListeners[elementIndex];\n          listenerIndex = indexOf(listeners.supplied, listener);\n          wrapped = listeners.wrapped[listenerIndex];\n        }\n\n        if (type === 'all'){\n          for (type in target.events){\n            if (target.events.hasOwnProperty(type)){\n              remove(element, type, 'all');\n            }\n          }\n          return;\n        }\n\n        if (target.events[type]){\n          var len = target.events[type].length;\n\n          if (listener === 'all'){\n            for (i = 0; i < len; i++){\n              remove(element, type, target.events[type][i], Boolean(useCapture));\n            }\n            return;\n          } else {\n            for (i = 0; i < len; i++){\n              if (target.events[type][i] === listener){\n                element[removeEvent](on + type, wrapped, useCapture || false);\n                target.events[type].splice(i, 1);\n\n                if (useAttachEvent && listeners){\n                  listeners.useCount[listenerIndex]--;\n                  if (listeners.useCount[listenerIndex] === 0){\n                    listeners.supplied.splice(listenerIndex, 1);\n                    listeners.wrapped.splice(listenerIndex, 1);\n                    listeners.useCount.splice(listenerIndex, 1);\n                  }\n                }\n\n                break;\n              }\n            }\n          }\n\n          if (target.events[type] && target.events[type].length === 0){\n            target.events[type] = null;\n            target.typeCount--;\n          }\n        }\n\n        if (!target.typeCount){\n          targets.splice(elementIndex, 1);\n          elements.splice(elementIndex, 1);\n          attachedListeners.splice(elementIndex, 1);\n        }\n      }\n\n      function preventDef(){\n        this.returnValue = false;\n      }\n\n      function stopProp(){\n        this.cancelBubble = true;\n      }\n\n      function stopImmProp(){\n        this.cancelBubble = true;\n        this.immediatePropagationStopped = true;\n      }\n\n      return {\n        add: add,\n        remove: remove,\n        useAttachEvent: useAttachEvent,\n\n        _elements: elements,\n        _targets: targets,\n        _attachedListeners: attachedListeners\n      };\n    }());\n\n  function blank(){}\n\n  function isElement(o){\n    if (!o || (typeof o !== 'object')){ return false; }\n\n    var _window = getWindow(o) || window;\n\n    return (/object|function/.test(typeof _window.Element)\n            ? o instanceof _window.Element // DOM2\n            : o.nodeType === 1 && typeof o.nodeName === 'string');\n  }\n  function isWindow(thing){ return thing === window || !!(thing && thing.Window) && (thing instanceof thing.Window); }\n  function isDocFrag(thing){ return !!thing && thing instanceof DocumentFragment; }\n  function isArray(thing){\n    return isObject(thing)\n                && (typeof thing.length !== undefined)\n                && isFunction(thing.splice);\n  }\n  function isObject(thing){ return !!thing && (typeof thing === 'object'); }\n  function isFunction(thing){ return typeof thing === 'function'; }\n  function isNumber(thing){ return typeof thing === 'number'; }\n  function isBool(thing){ return typeof thing === 'boolean'; }\n  function isString(thing){ return typeof thing === 'string'; }\n\n  function trySelector(value){\n    if (!isString(value)){ return false; }\n\n        // an exception will be raised if it is invalid\n    document.querySelector(value);\n    return true;\n  }\n\n  function extend(dest, source){\n    for (var prop in source){\n      dest[prop] = source[prop];\n    }\n    return dest;\n  }\n\n  var prefixedPropREs = {\n    webkit: /(Movement[XY]|Radius[XY]|RotationAngle|Force)$/\n  };\n\n  function pointerExtend(dest, source){\n    for (var prop in source){\n      var deprecated = false;\n\n          // skip deprecated prefixed properties\n      for (var vendor in prefixedPropREs){\n        if (prop.indexOf(vendor) === 0 && prefixedPropREs[vendor].test(prop)){\n          deprecated = true;\n          break;\n        }\n      }\n\n      if (!deprecated){\n        dest[prop] = source[prop];\n      }\n    }\n    return dest;\n  }\n\n  function copyCoords(dest, src){\n    dest.page = dest.page || {};\n    dest.page.x = src.page.x;\n    dest.page.y = src.page.y;\n\n    dest.client = dest.client || {};\n    dest.client.x = src.client.x;\n    dest.client.y = src.client.y;\n\n    dest.timeStamp = src.timeStamp;\n  }\n\n  function setEventXY(targetObj, pointers, interaction){\n    var pointer = (pointers.length > 1\n                       ? pointerAverage(pointers)\n                       : pointers[0]);\n\n    getPageXY(pointer, tmpXY, interaction);\n    targetObj.page.x = tmpXY.x;\n    targetObj.page.y = tmpXY.y;\n\n    getClientXY(pointer, tmpXY, interaction);\n    targetObj.client.x = tmpXY.x;\n    targetObj.client.y = tmpXY.y;\n\n    targetObj.timeStamp = new Date().getTime();\n  }\n\n  function setEventDeltas(targetObj, prev, cur){\n    targetObj.page.x = cur.page.x - prev.page.x;\n    targetObj.page.y = cur.page.y - prev.page.y;\n    targetObj.client.x = cur.client.x - prev.client.x;\n    targetObj.client.y = cur.client.y - prev.client.y;\n    targetObj.timeStamp = new Date().getTime() - prev.timeStamp;\n\n        // set pointer velocity\n    var dt = Math.max(targetObj.timeStamp / 1000, 0.001);\n    targetObj.page.speed = hypot(targetObj.page.x, targetObj.page.y) / dt;\n    targetObj.page.vx = targetObj.page.x / dt;\n    targetObj.page.vy = targetObj.page.y / dt;\n\n    targetObj.client.speed = hypot(targetObj.client.x, targetObj.page.y) / dt;\n    targetObj.client.vx = targetObj.client.x / dt;\n    targetObj.client.vy = targetObj.client.y / dt;\n  }\n\n  function isNativePointer(pointer){\n    return (pointer instanceof window.Event\n            || (supportsTouch && window.Touch && pointer instanceof window.Touch));\n  }\n\n    // Get specified X/Y coords for mouse or event.touches[0]\n  function getXY(type, pointer, xy){\n    xy = xy || {};\n    type = type || 'page';\n\n    xy.x = pointer[type + 'X'];\n    xy.y = pointer[type + 'Y'];\n\n    return xy;\n  }\n\n  function getPageXY(pointer, page){\n    page = page || {};\n\n        // Opera Mobile handles the viewport and scrolling oddly\n    if (isOperaMobile && isNativePointer(pointer)){\n      getXY('screen', pointer, page);\n\n      page.x += window.scrollX;\n      page.y += window.scrollY;\n    }\n    else {\n      getXY('page', pointer, page);\n    }\n\n    return page;\n  }\n\n  function getClientXY(pointer, client){\n    client = client || {};\n\n    if (isOperaMobile && isNativePointer(pointer)){\n            // Opera Mobile handles the viewport and scrolling oddly\n      getXY('screen', pointer, client);\n    }\n    else {\n      getXY('client', pointer, client);\n    }\n\n    return client;\n  }\n\n  function getScrollXY(win){\n    win = win || window;\n    return {\n      x: win.scrollX || win.document.documentElement.scrollLeft,\n      y: win.scrollY || win.document.documentElement.scrollTop\n    };\n  }\n\n  function getPointerId(pointer){\n    return isNumber(pointer.pointerId) ? pointer.pointerId : pointer.identifier;\n  }\n\n  function getActualElement(element){\n    return (element instanceof SVGElementInstance\n            ? element.correspondingUseElement\n            : element);\n  }\n\n  function getWindow(node){\n    if (isWindow(node)){\n      return node;\n    }\n\n    var rootNode = (node.ownerDocument || node);\n\n    return rootNode.defaultView || rootNode.parentWindow || window;\n  }\n\n  function getElementClientRect(element){\n    var clientRect = (element instanceof SVGElement\n                            ? element.getBoundingClientRect()\n                            : element.getClientRects()[0]);\n\n    return clientRect && {\n      left: clientRect.left,\n      right: clientRect.right,\n      top: clientRect.top,\n      bottom: clientRect.bottom,\n      width: clientRect.width || clientRect.right - clientRect.left,\n      height: clientRect.height || clientRect.bottom - clientRect.top\n    };\n  }\n\n  function getElementRect(element){\n    var clientRect = getElementClientRect(element);\n\n    if (!isIOS7 && clientRect){\n      var scroll = getScrollXY(getWindow(element));\n\n      clientRect.left += scroll.x;\n      clientRect.right += scroll.x;\n      clientRect.top += scroll.y;\n      clientRect.bottom += scroll.y;\n    }\n\n    return clientRect;\n  }\n\n  function getTouchPair(event){\n    var touches = [];\n\n        // array of touches is supplied\n    if (isArray(event)){\n      touches[0] = event[0];\n      touches[1] = event[1];\n    }\n        // an event\n    else {\n      if (event.type === 'touchend'){\n        if (event.touches.length === 1){\n          touches[0] = event.touches[0];\n          touches[1] = event.changedTouches[0];\n        }\n        else if (event.touches.length === 0){\n          touches[0] = event.changedTouches[0];\n          touches[1] = event.changedTouches[1];\n        }\n      }\n      else {\n        touches[0] = event.touches[0];\n        touches[1] = event.touches[1];\n      }\n    }\n\n    return touches;\n  }\n\n  function pointerAverage(pointers){\n    var average = {\n      pageX: 0,\n      pageY: 0,\n      clientX: 0,\n      clientY: 0,\n      screenX: 0,\n      screenY: 0\n    };\n    var prop;\n\n    for (var i = 0; i < pointers.length; i++){\n      for (prop in average){\n        average[prop] += pointers[i][prop];\n      }\n    }\n    for (prop in average){\n      average[prop] /= pointers.length;\n    }\n\n    return average;\n  }\n\n  function touchBBox(event){\n    if (!event.length && !(event.touches && event.touches.length > 1)){\n      return;\n    }\n\n    var touches = getTouchPair(event),\n      minX = Math.min(touches[0].pageX, touches[1].pageX),\n      minY = Math.min(touches[0].pageY, touches[1].pageY),\n      maxX = Math.max(touches[0].pageX, touches[1].pageX),\n      maxY = Math.max(touches[0].pageY, touches[1].pageY);\n\n    return {\n      x: minX,\n      y: minY,\n      left: minX,\n      top: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  }\n\n  function touchDistance(event, deltaSource){\n    deltaSource = deltaSource || defaultOptions.deltaSource;\n\n    var sourceX = deltaSource + 'X',\n      sourceY = deltaSource + 'Y',\n      touches = getTouchPair(event);\n\n    var dx = touches[0][sourceX] - touches[1][sourceX],\n      dy = touches[0][sourceY] - touches[1][sourceY];\n\n    return hypot(dx, dy);\n  }\n\n  function touchAngle(event, prevAngle, deltaSource){\n    deltaSource = deltaSource || defaultOptions.deltaSource;\n\n    var sourceX = deltaSource + 'X',\n      sourceY = deltaSource + 'Y',\n      touches = getTouchPair(event),\n      dx = touches[0][sourceX] - touches[1][sourceX],\n      dy = touches[0][sourceY] - touches[1][sourceY],\n      angle = 180 * Math.atan(dy / dx) / Math.PI;\n\n    if (isNumber(prevAngle)){\n      var dr = angle - prevAngle,\n        drClamped = dr % 360;\n\n      if (drClamped > 315){\n        angle -= 360 + (angle / 360) | 0 * 360;\n      }\n      else if (drClamped > 135){\n        angle -= 180 + (angle / 360) | 0 * 360;\n      }\n            else if (drClamped < -315){\n              angle += 360 + (angle / 360) | 0 * 360;\n            }\n            else if (drClamped < -135){\n              angle += 180 + (angle / 360) | 0 * 360;\n            }\n    }\n\n    return angle;\n  }\n\n  function getOriginXY(interactable, element){\n    var origin = interactable\n                ? interactable.options.origin\n                : defaultOptions.origin;\n\n    if (origin === 'parent'){\n      origin = parentElement(element);\n    }\n    else if (origin === 'self'){\n      origin = interactable.getRect(element);\n    }\n        else if (trySelector(origin)){\n          origin = closest(element, origin) || { x: 0, y: 0 };\n        }\n\n    if (isFunction(origin)){\n      origin = origin(interactable && element);\n    }\n\n    if (isElement(origin)){\n      origin = getElementRect(origin);\n    }\n\n    origin.x = ('x' in origin) ? origin.x : origin.left;\n    origin.y = ('y' in origin) ? origin.y : origin.top;\n\n    return origin;\n  }\n\n    // http://stackoverflow.com/a/5634528/2280888\n  function _getQBezierValue(t, p1, p2, p3){\n    var iT = 1 - t;\n    return iT * iT * p1 + 2 * iT * t * p2 + t * t * p3;\n  }\n\n  function getQuadraticCurvePoint(startX, startY, cpX, cpY, endX, endY, position){\n    return {\n      x: _getQBezierValue(position, startX, cpX, endX),\n      y: _getQBezierValue(position, startY, cpY, endY)\n    };\n  }\n\n    // http://gizma.com/easing/\n  function easeOutQuad(t, b, c, d){\n    t /= d;\n    return -c * t * (t - 2) + b;\n  }\n\n  function nodeContains(parent, child){\n    while (child){\n      if (child === parent){\n        return true;\n      }\n\n      child = child.parentNode;\n    }\n\n    return false;\n  }\n\n  function closest(child, selector){\n    var parent = parentElement(child);\n\n    while (isElement(parent)){\n      if (matchesSelector(parent, selector)){ return parent; }\n\n      parent = parentElement(parent);\n    }\n\n    return null;\n  }\n\n  function parentElement(node){\n    var parent = node.parentNode;\n\n    if (isDocFrag(parent)){\n            // skip past #shado-root fragments\n      while ((parent = parent.host) && isDocFrag(parent)){}\n\n      return parent;\n    }\n\n    return parent;\n  }\n\n  function inContext(interactable, element){\n    return interactable._context === element.ownerDocument\n                || nodeContains(interactable._context, element);\n  }\n\n  function testIgnore(interactable, interactableElement, element){\n    var ignoreFrom = interactable.options.ignoreFrom;\n\n    if (!ignoreFrom || !isElement(element)){ return false; }\n\n    if (isString(ignoreFrom)){\n      return matchesUpTo(element, ignoreFrom, interactableElement);\n    }\n    else if (isElement(ignoreFrom)){\n      return nodeContains(ignoreFrom, element);\n    }\n\n    return false;\n  }\n\n  function testAllow(interactable, interactableElement, element){\n    var allowFrom = interactable.options.allowFrom;\n\n    if (!allowFrom){ return true; }\n\n    if (!isElement(element)){ return false; }\n\n    if (isString(allowFrom)){\n      return matchesUpTo(element, allowFrom, interactableElement);\n    }\n    else if (isElement(allowFrom)){\n      return nodeContains(allowFrom, element);\n    }\n\n    return false;\n  }\n\n  function checkAxis(axis, interactable){\n    if (!interactable){ return false; }\n\n    var thisAxis = interactable.options.drag.axis;\n\n    return (axis === 'xy' || thisAxis === 'xy' || thisAxis === axis);\n  }\n\n  function checkSnap(interactable, action){\n    var options = interactable.options;\n\n    if (/^resize/.test(action)){\n      action = 'resize';\n    }\n\n    return options[action].snap && options[action].snap.enabled;\n  }\n\n  function checkRestrict(interactable, action){\n    var options = interactable.options;\n\n    if (/^resize/.test(action)){\n      action = 'resize';\n    }\n\n    return options[action].restrict && options[action].restrict.enabled;\n  }\n\n  function checkAutoScroll(interactable, action){\n    var options = interactable.options;\n\n    if (/^resize/.test(action)){\n      action = 'resize';\n    }\n\n    return options[action].autoScroll && options[action].autoScroll.enabled;\n  }\n\n  function withinInteractionLimit(interactable, element, action){\n    var options = interactable.options,\n      maxActions = options[action.name].max,\n      maxPerElement = options[action.name].maxPerElement,\n      activeInteractions = 0,\n      targetCount = 0,\n      targetElementCount = 0;\n\n    for (var i = 0, len = interactions.length; i < len; i++){\n      var interaction = interactions[i],\n        otherAction = interaction.prepared.name,\n        active = interaction.interacting();\n\n      if (!active){ continue; }\n\n      activeInteractions++;\n\n      if (activeInteractions >= maxInteractions){\n        return false;\n      }\n\n      if (interaction.target !== interactable){ continue; }\n\n      targetCount += (otherAction === action.name) | 0;\n\n      if (targetCount >= maxActions){\n        return false;\n      }\n\n      if (interaction.element === element){\n        targetElementCount++;\n\n        if (otherAction !== action.name || targetElementCount >= maxPerElement){\n          return false;\n        }\n      }\n    }\n\n    return maxInteractions > 0;\n  }\n\n    // Test for the element that's \"above\" all other qualifiers\n  function indexOfDeepestElement(elements){\n    var dropzone,\n      deepestZone = elements[0],\n      index = deepestZone ? 0 : -1,\n      parent,\n      deepestZoneParents = [],\n      dropzoneParents = [],\n      child,\n      i,\n      n;\n\n    for (i = 1; i < elements.length; i++){\n      dropzone = elements[i];\n\n            // an element might belong to multiple selector dropzones\n      if (!dropzone || dropzone === deepestZone){\n        continue;\n      }\n\n      if (!deepestZone){\n        deepestZone = dropzone;\n        index = i;\n        continue;\n      }\n\n            // check if the deepest or current are document.documentElement or document.rootElement\n            // - if the current dropzone is, do nothing and continue\n      if (dropzone.parentNode === dropzone.ownerDocument){\n        continue;\n      }\n            // - if deepest is, update with the current dropzone and continue to next\n      else if (deepestZone.parentNode === dropzone.ownerDocument){\n        deepestZone = dropzone;\n        index = i;\n        continue;\n      }\n\n      if (!deepestZoneParents.length){\n        parent = deepestZone;\n        while (parent.parentNode && parent.parentNode !== parent.ownerDocument){\n          deepestZoneParents.unshift(parent);\n          parent = parent.parentNode;\n        }\n      }\n\n            // if this element is an svg element and the current deepest is\n            // an HTMLElement\n      if (deepestZone instanceof HTMLElement\n                && dropzone instanceof SVGElement\n                && !(dropzone instanceof SVGSVGElement)){\n        if (dropzone === deepestZone.parentNode){\n          continue;\n        }\n\n        parent = dropzone.ownerSVGElement;\n      }\n      else {\n        parent = dropzone;\n      }\n\n      dropzoneParents = [];\n\n      while (parent.parentNode !== parent.ownerDocument){\n        dropzoneParents.unshift(parent);\n        parent = parent.parentNode;\n      }\n\n      n = 0;\n\n            // get (position of last common ancestor) + 1\n      while (dropzoneParents[n] && dropzoneParents[n] === deepestZoneParents[n]){\n        n++;\n      }\n\n      var parents = [\n        dropzoneParents[n - 1],\n        dropzoneParents[n],\n        deepestZoneParents[n]\n      ];\n\n      child = parents[0].lastChild;\n\n      while (child){\n        if (child === parents[1]){\n          deepestZone = dropzone;\n          index = i;\n          deepestZoneParents = [];\n\n          break;\n        }\n        else if (child === parents[2]){\n          break;\n        }\n\n        child = child.previousSibling;\n      }\n    }\n\n    return index;\n  }\n\n  function Interaction(){\n    this.target = null; // current interactable being interacted with\n    this.element = null; // the target element of the interactable\n    this.dropTarget = null; // the dropzone a drag target might be dropped into\n    this.dropElement = null; // the element at the time of checking\n    this.prevDropTarget = null; // the dropzone that was recently dragged away from\n    this.prevDropElement = null; // the element at the time of checking\n\n    this.prepared = {     // action that's ready to be fired on next move event\n      name: null,\n      axis: null,\n      edges: null\n    };\n\n    this.matches = [];   // all selectors that are matched by target element\n    this.matchElements = [];   // corresponding elements\n\n    this.inertiaStatus = {\n      active: false,\n      smoothEnd: false,\n      ending: false,\n\n      startEvent: null,\n      upCoords: {},\n\n      xe: 0, ye: 0,\n      sx: 0, sy: 0,\n\n      t0: 0,\n      vx0: 0, vys: 0,\n      duration: 0,\n\n      resumeDx: 0,\n      resumeDy: 0,\n\n      lambda_v0: 0,\n      one_ve_v0: 0,\n      i: null\n    };\n\n    if (isFunction(Function.prototype.bind)){\n      this.boundInertiaFrame = this.inertiaFrame.bind(this);\n      this.boundSmoothEndFrame = this.smoothEndFrame.bind(this);\n    }\n    else {\n      var that = this;\n\n      this.boundInertiaFrame = function(){ return that.inertiaFrame(); };\n      this.boundSmoothEndFrame = function(){ return that.smoothEndFrame(); };\n    }\n\n    this.activeDrops = {\n      dropzones: [],      // the dropzones that are mentioned below\n      elements: [],      // elements of dropzones that accept the target draggable\n      rects: []       // the rects of the elements mentioned above\n    };\n\n        // keep track of added pointers\n    this.pointers = [];\n    this.pointerIds = [];\n    this.downTargets = [];\n    this.downTimes = [];\n    this.holdTimers = [];\n\n        // Previous native pointer move event coordinates\n    this.prevCoords = {\n      page: { x: 0, y: 0 },\n      client: { x: 0, y: 0 },\n      timeStamp: 0\n    };\n        // current native pointer move event coordinates\n    this.curCoords = {\n      page: { x: 0, y: 0 },\n      client: { x: 0, y: 0 },\n      timeStamp: 0\n    };\n\n        // Starting InteractEvent pointer coordinates\n    this.startCoords = {\n      page: { x: 0, y: 0 },\n      client: { x: 0, y: 0 },\n      timeStamp: 0\n    };\n\n        // Change in coordinates and time of the pointer\n    this.pointerDelta = {\n      page: { x: 0, y: 0, vx: 0, vy: 0, speed: 0 },\n      client: { x: 0, y: 0, vx: 0, vy: 0, speed: 0 },\n      timeStamp: 0\n    };\n\n    this.downEvent = null;    // pointerdown/mousedown/touchstart event\n    this.downPointer = {};\n\n    this._eventTarget = null;\n    this._curEventTarget = null;\n\n    this.prevEvent = null;      // previous action event\n    this.tapTime = 0;         // time of the most recent tap event\n    this.prevTap = null;\n\n    this.startOffset = { left: 0, right: 0, top: 0, bottom: 0 };\n    this.restrictOffset = { left: 0, right: 0, top: 0, bottom: 0 };\n    this.snapOffsets = [];\n\n    this.gesture = {\n      start: { x: 0, y: 0 },\n\n      startDistance: 0,   // distance between two touches of touchStart\n      prevDistance: 0,\n      distance: 0,\n\n      scale: 1,           // gesture.distance / gesture.startDistance\n\n      startAngle: 0,      // angle of line joining two touches\n      prevAngle: 0       // angle of the previous gesture event\n    };\n\n    this.snapStatus = {\n      x: 0, y: 0,\n      dx: 0, dy: 0,\n      realX: 0, realY: 0,\n      snappedX: 0, snappedY: 0,\n      targets: [],\n      locked: false,\n      changed: false\n    };\n\n    this.restrictStatus = {\n      dx: 0, dy: 0,\n      restrictedX: 0, restrictedY: 0,\n      snap: null,\n      restricted: false,\n      changed: false\n    };\n\n    this.restrictStatus.snap = this.snapStatus;\n\n    this.pointerIsDown = false;\n    this.pointerWasMoved = false;\n    this.gesturing = false;\n    this.dragging = false;\n    this.resizing = false;\n    this.resizeAxes = 'xy';\n\n    this.mouse = false;\n\n    interactions.push(this);\n  }\n\n  Interaction.prototype = {\n    getPageXY: function(pointer, xy){ return getPageXY(pointer, xy, this); },\n    getClientXY: function(pointer, xy){ return getClientXY(pointer, xy, this); },\n    setEventXY: function(target, ptr){ return setEventXY(target, ptr, this); },\n\n    pointerOver: function(pointer, event, eventTarget){\n      if (this.prepared.name || !this.mouse){ return; }\n\n      var curMatches = [],\n        curMatchElements = [],\n        prevTargetElement = this.element;\n\n      this.addPointer(pointer);\n\n      if (this.target\n                && (testIgnore(this.target, this.element, eventTarget)\n                    || !testAllow(this.target, this.element, eventTarget))){\n                // if the eventTarget should be ignored or shouldn't be allowed\n                // clear the previous target\n        this.target = null;\n        this.element = null;\n        this.matches = [];\n        this.matchElements = [];\n      }\n\n      var elementInteractable = interactables.get(eventTarget),\n        elementAction = (elementInteractable\n                                 && !testIgnore(elementInteractable, eventTarget, eventTarget)\n                                 && testAllow(elementInteractable, eventTarget, eventTarget)\n                                 && validateAction(\n                                     elementInteractable.getAction(pointer, event, this, eventTarget),\n                                     elementInteractable));\n\n      if (elementAction && !withinInteractionLimit(elementInteractable, eventTarget, elementAction)){\n        elementAction = null;\n      }\n\n      function pushCurMatches(interactable, selector){\n        if (interactable\n                    && inContext(interactable, eventTarget)\n                    && !testIgnore(interactable, eventTarget, eventTarget)\n                    && testAllow(interactable, eventTarget, eventTarget)\n                    && matchesSelector(eventTarget, selector)){\n          curMatches.push(interactable);\n          curMatchElements.push(eventTarget);\n        }\n      }\n\n      if (elementAction){\n        this.target = elementInteractable;\n        this.element = eventTarget;\n        this.matches = [];\n        this.matchElements = [];\n      }\n      else {\n        interactables.forEachSelector(pushCurMatches);\n\n        if (this.validateSelector(pointer, event, curMatches, curMatchElements)){\n          this.matches = curMatches;\n          this.matchElements = curMatchElements;\n\n          this.pointerHover(pointer, event, this.matches, this.matchElements);\n          events.add(eventTarget,\n                                        PointerEvent ? pEventTypes.move : 'mousemove',\n                                        listeners.pointerHover);\n        }\n        else if (this.target){\n          if (nodeContains(prevTargetElement, eventTarget)){\n            this.pointerHover(pointer, event, this.matches, this.matchElements);\n            events.add(this.element,\n                                            PointerEvent ? pEventTypes.move : 'mousemove',\n                                            listeners.pointerHover);\n          }\n          else {\n            this.target = null;\n            this.element = null;\n            this.matches = [];\n            this.matchElements = [];\n          }\n        }\n      }\n    },\n\n        // Check what action would be performed on pointerMove target if a mouse\n        // button were pressed and change the cursor accordingly\n    pointerHover: function(pointer, event, eventTarget, curEventTarget, matches, matchElements){\n      var target = this.target;\n\n      if (!this.prepared.name && this.mouse){\n        var action;\n\n                // update pointer coords for defaultActionChecker to use\n        this.setEventXY(this.curCoords, [pointer]);\n\n        if (matches){\n          action = this.validateSelector(pointer, event, matches, matchElements);\n        }\n        else if (target){\n          action = validateAction(target.getAction(this.pointers[0], event, this, this.element), this.target);\n        }\n\n        if (target && target.options.styleCursor){\n          if (action){\n            target._doc.documentElement.style.cursor = getActionCursor(action);\n          }\n          else {\n            target._doc.documentElement.style.cursor = '';\n          }\n        }\n      }\n      else if (this.prepared.name){\n        this.checkAndPreventDefault(event, target, this.element);\n      }\n    },\n\n    pointerOut: function(pointer, event, eventTarget){\n      if (this.prepared.name){ return; }\n\n            // Remove temporary event listeners for selector Interactables\n      if (!interactables.get(eventTarget)){\n        events.remove(eventTarget,\n                                       PointerEvent ? pEventTypes.move : 'mousemove',\n                                       listeners.pointerHover);\n      }\n\n      if (this.target && this.target.options.styleCursor && !this.interacting()){\n        this.target._doc.documentElement.style.cursor = '';\n      }\n    },\n\n    selectorDown: function(pointer, event, eventTarget, curEventTarget){\n      var that = this,\n                // copy event to be used in timeout for IE8\n        eventCopy = events.useAttachEvent ? extend({}, event) : event,\n        element = eventTarget,\n        pointerIndex = this.addPointer(pointer),\n        action;\n\n      this.holdTimers[pointerIndex] = setTimeout(function(){\n        that.pointerHold(events.useAttachEvent ? eventCopy : pointer, eventCopy, eventTarget, curEventTarget);\n      }, defaultOptions._holdDuration);\n\n      this.pointerIsDown = true;\n\n            // Check if the down event hits the current inertia target\n      if (this.inertiaStatus.active && this.target.selector){\n                // climb up the DOM tree from the event target\n        while (isElement(element)){\n                    // if this element is the current inertia target element\n          if (element === this.element\n                        // and the prospective action is the same as the ongoing one\n                        && validateAction(this.target.getAction(pointer, event, this, this.element), this.target).name === this.prepared.name){\n                        // stop inertia so that the next move will be a normal one\n            cancelFrame(this.inertiaStatus.i);\n            this.inertiaStatus.active = false;\n\n            this.collectEventTargets(pointer, event, eventTarget, 'down');\n            return;\n          }\n          element = parentElement(element);\n        }\n      }\n\n            // do nothing if interacting\n      if (this.interacting()){\n        this.collectEventTargets(pointer, event, eventTarget, 'down');\n        return;\n      }\n\n      function pushMatches(interactable, selector, context){\n        var elements = ie8MatchesSelector\n                    ? context.querySelectorAll(selector)\n                    : undefined;\n\n        if (inContext(interactable, element)\n                    && !testIgnore(interactable, element, eventTarget)\n                    && testAllow(interactable, element, eventTarget)\n                    && matchesSelector(element, selector, elements)){\n          that.matches.push(interactable);\n          that.matchElements.push(element);\n        }\n      }\n\n            // update pointer coords for defaultActionChecker to use\n      this.setEventXY(this.curCoords, [pointer]);\n      this.downEvent = event;\n\n      while (isElement(element) && !action){\n        this.matches = [];\n        this.matchElements = [];\n\n        interactables.forEachSelector(pushMatches);\n\n        action = this.validateSelector(pointer, event, this.matches, this.matchElements);\n        element = parentElement(element);\n      }\n\n      if (action){\n        this.prepared.name = action.name;\n        this.prepared.axis = action.axis;\n        this.prepared.edges = action.edges;\n\n        this.collectEventTargets(pointer, event, eventTarget, 'down');\n\n        return this.pointerDown(pointer, event, eventTarget, curEventTarget, action);\n      }\n      else {\n                // do these now since pointerDown isn't being called from here\n        this.downTimes[pointerIndex] = new Date().getTime();\n        this.downTargets[pointerIndex] = eventTarget;\n        pointerExtend(this.downPointer, pointer);\n\n        copyCoords(this.prevCoords, this.curCoords);\n        this.pointerWasMoved = false;\n      }\n\n      this.collectEventTargets(pointer, event, eventTarget, 'down');\n    },\n\n        // Determine action to be performed on next pointerMove and add appropriate\n        // style and event Listeners\n    pointerDown: function(pointer, event, eventTarget, curEventTarget, forceAction){\n      if (!forceAction && !this.inertiaStatus.active && this.pointerWasMoved && this.prepared.name){\n        this.checkAndPreventDefault(event, this.target, this.element);\n\n        return;\n      }\n\n      this.pointerIsDown = true;\n      this.downEvent = event;\n\n      var pointerIndex = this.addPointer(pointer),\n        action;\n\n            // If it is the second touch of a multi-touch gesture, keep the\n            // target the same and get a new action if a target was set by the\n            // first touch\n      if (this.pointerIds.length > 1 && this.target._element === this.element){\n        var newAction = validateAction(forceAction || this.target.getAction(pointer, event, this, this.element), this.target);\n\n        if (withinInteractionLimit(this.target, this.element, newAction)){\n          action = newAction;\n        }\n\n        this.prepared.name = null;\n      }\n            // Otherwise, set the target if there is no action prepared\n      else if (!this.prepared.name){\n        var interactable = interactables.get(curEventTarget);\n\n        if (interactable\n                    && !testIgnore(interactable, curEventTarget, eventTarget)\n                    && testAllow(interactable, curEventTarget, eventTarget)\n                    && (action = validateAction(forceAction || interactable.getAction(pointer, event, this, curEventTarget), interactable, eventTarget))\n                    && withinInteractionLimit(interactable, curEventTarget, action)){\n          this.target = interactable;\n          this.element = curEventTarget;\n        }\n      }\n\n      var target = this.target,\n        options = target && target.options;\n\n      if (target && (forceAction || !this.prepared.name)){\n        action = action || validateAction(forceAction || target.getAction(pointer, event, this, curEventTarget), target, this.element);\n\n        this.setEventXY(this.startCoords, this.pointers);\n\n        if (!action){ return; }\n\n        if (options.styleCursor){\n          target._doc.documentElement.style.cursor = getActionCursor(action);\n        }\n\n        this.resizeAxes = action.name === 'resize' ? action.axis : null;\n\n        if (action === 'gesture' && this.pointerIds.length < 2){\n          action = null;\n        }\n\n        this.prepared.name = action.name;\n        this.prepared.axis = action.axis;\n        this.prepared.edges = action.edges;\n\n        this.snapStatus.snappedX = this.snapStatus.snappedY =\n                    this.restrictStatus.restrictedX = this.restrictStatus.restrictedY = NaN;\n\n        this.downTimes[pointerIndex] = new Date().getTime();\n        this.downTargets[pointerIndex] = eventTarget;\n        pointerExtend(this.downPointer, pointer);\n\n        copyCoords(this.prevCoords, this.startCoords);\n        this.pointerWasMoved = false;\n\n        this.checkAndPreventDefault(event, target, this.element);\n      }\n            // if inertia is active try to resume action\n      else if (this.inertiaStatus.active\n                && curEventTarget === this.element\n                && validateAction(target.getAction(pointer, event, this, this.element), target).name === this.prepared.name){\n        cancelFrame(this.inertiaStatus.i);\n        this.inertiaStatus.active = false;\n\n        this.checkAndPreventDefault(event, target, this.element);\n      }\n    },\n\n    setModifications: function(coords, preEnd){\n      var target = this.target,\n        shouldMove = true,\n        shouldSnap = checkSnap(target, this.prepared.name) && (!target.options[this.prepared.name].snap.endOnly || preEnd),\n        shouldRestrict = checkRestrict(target, this.prepared.name) && (!target.options[this.prepared.name].restrict.endOnly || preEnd);\n\n      if (shouldSnap){ this.setSnapping(coords); } else { this.snapStatus.locked = false; }\n      if (shouldRestrict){ this.setRestriction(coords); } else { this.restrictStatus.restricted = false; }\n\n      if (shouldSnap && this.snapStatus.locked && !this.snapStatus.changed){\n        shouldMove = shouldRestrict && this.restrictStatus.restricted && this.restrictStatus.changed;\n      }\n      else if (shouldRestrict && this.restrictStatus.restricted && !this.restrictStatus.changed){\n        shouldMove = false;\n      }\n\n      return shouldMove;\n    },\n\n    setStartOffsets: function(action, interactable, element){\n      var rect = interactable.getRect(element),\n        origin = getOriginXY(interactable, element),\n        snap = interactable.options[this.prepared.name].snap,\n        restrict = interactable.options[this.prepared.name].restrict,\n        width, height;\n\n      if (rect){\n        this.startOffset.left = this.startCoords.page.x - rect.left;\n        this.startOffset.top = this.startCoords.page.y - rect.top;\n\n        this.startOffset.right = rect.right - this.startCoords.page.x;\n        this.startOffset.bottom = rect.bottom - this.startCoords.page.y;\n\n        if ('width' in rect){ width = rect.width; }\n        else { width = rect.right - rect.left; }\n        if ('height' in rect){ height = rect.height; }\n        else { height = rect.bottom - rect.top; }\n      }\n      else {\n        this.startOffset.left = this.startOffset.top = this.startOffset.right = this.startOffset.bottom = 0;\n      }\n\n      this.snapOffsets.splice(0);\n\n      var snapOffset = snap && snap.offset === 'startCoords'\n                                ? {\n                                  x: this.startCoords.page.x - origin.x,\n                                  y: this.startCoords.page.y - origin.y\n                                }\n                                : snap && snap.offset || { x: 0, y: 0 };\n\n      if (rect && snap && snap.relativePoints && snap.relativePoints.length){\n        for (var i = 0; i < snap.relativePoints.length; i++){\n          this.snapOffsets.push({\n            x: this.startOffset.left - (width * snap.relativePoints[i].x) + snapOffset.x,\n            y: this.startOffset.top - (height * snap.relativePoints[i].y) + snapOffset.y\n          });\n        }\n      }\n      else {\n        this.snapOffsets.push(snapOffset);\n      }\n\n      if (rect && restrict.elementRect){\n        this.restrictOffset.left = this.startOffset.left - (width * restrict.elementRect.left);\n        this.restrictOffset.top = this.startOffset.top - (height * restrict.elementRect.top);\n\n        this.restrictOffset.right = this.startOffset.right - (width * (1 - restrict.elementRect.right));\n        this.restrictOffset.bottom = this.startOffset.bottom - (height * (1 - restrict.elementRect.bottom));\n      }\n      else {\n        this.restrictOffset.left = this.restrictOffset.top = this.restrictOffset.right = this.restrictOffset.bottom = 0;\n      }\n    },\n\n        /* \\\n         * Interaction.start\n         [ method ]\n         *\n         * Start an action with the given Interactable and Element as tartgets. The\n         * action must be enabled for the target Interactable and an appropriate number\n         * of pointers must be held down  1 for drag/resize, 2 for gesture.\n         *\n         * Use it with `interactable.<action>able({ manualStart: false })` to always\n         * [start actions manually](https://github.com/taye/interact.js/issues/114)\n         *\n         - action       (object)  The action to be performed - drag, resize, etc.\n         - interactable (Interactable) The Interactable to target\n         - element      (Element) The DOM Element to target\n         = (object) interact\n         **\n         | interact(target)\n         |   .draggable({\n         |     // disable the default drag start by down->move\n         |     manualStart: true\n         |   })\n         |   // start dragging after the user holds the pointer down\n         |   .on('hold', function (event) {\n         |     var interaction = event.interaction;\n         |\n         |     if (!interaction.interacting()) {\n         |       interaction.start({ name: 'drag' },\n         |                         event.interactable,\n         |                         event.currentTarget);\n         |     }\n         | });\n        \\*/\n    start: function(action, interactable, element){\n      if (this.interacting()\n                || !this.pointerIsDown\n                || this.pointerIds.length < (action.name === 'gesture' ? 2 : 1)){\n        return;\n      }\n\n            // if this interaction had been removed after stopping\n            // add it back\n      if (indexOf(interactions, this) === -1){\n        interactions.push(this);\n      }\n\n            // set the startCoords if there was no prepared action\n      if (!this.prepared.name){\n        this.setEventXY(this.startCoords);\n      }\n\n      this.prepared.name = action.name;\n      this.prepared.axis = action.axis;\n      this.prepared.edges = action.edges;\n      this.target = interactable;\n      this.element = element;\n\n      this.setStartOffsets(action.name, interactable, element);\n      this.setModifications(this.startCoords.page);\n\n      this.prevEvent = this[this.prepared.name + 'Start'](this.downEvent);\n    },\n\n    pointerMove: function(pointer, event, eventTarget, curEventTarget, preEnd){\n      if (this.inertiaStatus.active){\n        var pageUp = this.inertiaStatus.upCoords.page;\n        var clientUp = this.inertiaStatus.upCoords.client;\n\n        var inertiaPosition = {\n          pageX: pageUp.x + this.inertiaStatus.sx,\n          pageY: pageUp.y + this.inertiaStatus.sy,\n          clientX: clientUp.x + this.inertiaStatus.sx,\n          clientY: clientUp.y + this.inertiaStatus.sy\n        };\n\n        this.setEventXY(this.curCoords, [inertiaPosition]);\n      }\n      else {\n        this.recordPointer(pointer);\n        this.setEventXY(this.curCoords, this.pointers);\n      }\n\n      var duplicateMove = (this.curCoords.page.x === this.prevCoords.page.x\n                                 && this.curCoords.page.y === this.prevCoords.page.y\n                                 && this.curCoords.client.x === this.prevCoords.client.x\n                                 && this.curCoords.client.y === this.prevCoords.client.y);\n\n      var dx, dy,\n        pointerIndex = this.mouse ? 0 : indexOf(this.pointerIds, getPointerId(pointer));\n\n            // register movement greater than pointerMoveTolerance\n      if (this.pointerIsDown && !this.pointerWasMoved){\n        dx = this.curCoords.client.x - this.startCoords.client.x;\n        dy = this.curCoords.client.y - this.startCoords.client.y;\n\n        this.pointerWasMoved = hypot(dx, dy) > pointerMoveTolerance;\n      }\n\n      if (!duplicateMove && (!this.pointerIsDown || this.pointerWasMoved)){\n        if (this.pointerIsDown){\n          clearTimeout(this.holdTimers[pointerIndex]);\n        }\n\n        this.collectEventTargets(pointer, event, eventTarget, 'move');\n      }\n\n      if (!this.pointerIsDown){ return; }\n\n      if (duplicateMove && this.pointerWasMoved && !preEnd){\n        this.checkAndPreventDefault(event, this.target, this.element);\n        return;\n      }\n\n            // set pointer coordinate, time changes and speeds\n      setEventDeltas(this.pointerDelta, this.prevCoords, this.curCoords);\n\n      if (!this.prepared.name){ return; }\n\n      if (this.pointerWasMoved\n                // ignore movement while inertia is active\n                && (!this.inertiaStatus.active || (pointer instanceof InteractEvent && /inertiastart/.test(pointer.type)))){\n                // if just starting an action, calculate the pointer speed now\n        if (!this.interacting()){\n          setEventDeltas(this.pointerDelta, this.prevCoords, this.curCoords);\n\n                    // check if a drag is in the correct axis\n          if (this.prepared.name === 'drag'){\n            var absX = Math.abs(dx),\n              absY = Math.abs(dy),\n              targetAxis = this.target.options.drag.axis,\n              axis = (absX > absY ? 'x' : absX < absY ? 'y' : 'xy');\n\n                        // if the movement isn't in the axis of the interactable\n            if (axis !== 'xy' && targetAxis !== 'xy' && targetAxis !== axis){\n                            // cancel the prepared action\n              this.prepared.name = null;\n\n                            // then try to get a drag from another ineractable\n\n              var element = eventTarget;\n\n                            // check element interactables\n              while (isElement(element)){\n                var elementInteractable = interactables.get(element);\n\n                if (elementInteractable\n                                    && elementInteractable !== this.target\n                                    && !elementInteractable.options.drag.manualStart\n                                    && elementInteractable.getAction(this.downPointer, this.downEvent, this, element).name === 'drag'\n                                    && checkAxis(axis, elementInteractable)){\n                  this.prepared.name = 'drag';\n                  this.target = elementInteractable;\n                  this.element = element;\n                  break;\n                }\n\n                element = parentElement(element);\n              }\n\n                            // if there's no drag from element interactables,\n                            // check the selector interactables\n              if (!this.prepared.name){\n                var thisInteraction = this;\n\n                var getDraggable = function(interactable, selector, context){\n                  var elements = ie8MatchesSelector\n                                        ? context.querySelectorAll(selector)\n                                        : undefined;\n\n                  if (interactable === thisInteraction.target){ return; }\n\n                  if (inContext(interactable, eventTarget)\n                                        && !interactable.options.drag.manualStart\n                                        && !testIgnore(interactable, element, eventTarget)\n                                        && testAllow(interactable, element, eventTarget)\n                                        && matchesSelector(element, selector, elements)\n                                        && interactable.getAction(thisInteraction.downPointer, thisInteraction.downEvent, thisInteraction, element).name === 'drag'\n                                        && checkAxis(axis, interactable)\n                                        && withinInteractionLimit(interactable, element, 'drag')){\n                    return interactable;\n                  }\n                };\n\n                element = eventTarget;\n\n                while (isElement(element)){\n                  var selectorInteractable = interactables.forEachSelector(getDraggable);\n\n                  if (selectorInteractable){\n                    this.prepared.name = 'drag';\n                    this.target = selectorInteractable;\n                    this.element = element;\n                    break;\n                  }\n\n                  element = parentElement(element);\n                }\n              }\n            }\n          }\n        }\n\n        var starting = !!this.prepared.name && !this.interacting();\n\n        if (starting\n                    && (this.target.options[this.prepared.name].manualStart\n                        || !withinInteractionLimit(this.target, this.element, this.prepared))){\n          this.stop(event);\n          return;\n        }\n\n        if (this.prepared.name && this.target){\n          if (starting){\n            this.start(this.prepared, this.target, this.element);\n          }\n\n          var shouldMove = this.setModifications(this.curCoords.page, preEnd);\n\n                    // move if snapping or restriction doesn't prevent it\n          if (shouldMove || starting){\n            this.prevEvent = this[this.prepared.name + 'Move'](event);\n          }\n\n          this.checkAndPreventDefault(event, this.target, this.element);\n        }\n      }\n\n      copyCoords(this.prevCoords, this.curCoords);\n\n      if (this.dragging || this.resizing){\n        this.autoScrollMove(pointer);\n      }\n    },\n\n    dragStart: function(event){\n      var dragEvent = new InteractEvent(this, event, 'drag', 'start', this.element);\n\n      dragEvent.originalEvent = event;\n      this.dragging = true;\n      this.target.fire(dragEvent);\n\n            // reset active dropzones\n      this.activeDrops.dropzones = [];\n      this.activeDrops.elements = [];\n      this.activeDrops.rects = [];\n\n      if (!this.dynamicDrop){\n        this.setActiveDrops(this.element);\n      }\n\n      var dropEvents = this.getDropEvents(event, dragEvent);\n\n      if (dropEvents.activate){\n        this.fireActiveDrops(dropEvents.activate);\n      }\n\n      return dragEvent;\n    },\n\n    dragMove: function(event){\n      var target = this.target,\n        dragEvent = new InteractEvent(this, event, 'drag', 'move', this.element),\n        draggableElement = this.element,\n        drop = this.getDrop(dragEvent, event, draggableElement);\n\n      dragEvent.originalEvent = event;\n\n      this.dropTarget = drop.dropzone;\n      this.dropElement = drop.element;\n\n      var dropEvents = this.getDropEvents(event, dragEvent);\n\n      target.fire(dragEvent);\n\n      if (dropEvents.leave){ this.prevDropTarget.fire(dropEvents.leave); }\n      if (dropEvents.enter){ this.dropTarget.fire(dropEvents.enter); }\n      if (dropEvents.move){ this.dropTarget.fire(dropEvents.move); }\n\n      this.prevDropTarget = this.dropTarget;\n      this.prevDropElement = this.dropElement;\n\n      return dragEvent;\n    },\n\n    resizeStart: function(event){\n      var resizeEvent = new InteractEvent(this, event, 'resize', 'start', this.element);\n\n      if (this.prepared.edges){\n        var startRect = this.target.getRect(this.element);\n\n                /*\n                 * When using the `resizable.square` or `resizable.preserveAspectRatio` options, resizing from one edge\n                 * will affect another. E.g. with `resizable.square`, resizing to make the right edge larger will make\n                 * the bottom edge larger by the same amount. We call these 'linked' edges. Any linked edges will depend\n                 * on the active edges and the edge being interacted with.\n                 */\n        if (this.target.options.resize.square || this.target.options.resize.preserveAspectRatio){\n          var linkedEdges = extend({}, this.prepared.edges);\n\n          linkedEdges.top = linkedEdges.top || (linkedEdges.left && !linkedEdges.bottom);\n          linkedEdges.left = linkedEdges.left || (linkedEdges.top && !linkedEdges.right);\n          linkedEdges.bottom = linkedEdges.bottom || (linkedEdges.right && !linkedEdges.top);\n          linkedEdges.right = linkedEdges.right || (linkedEdges.bottom && !linkedEdges.left);\n\n          this.prepared._linkedEdges = linkedEdges;\n        }\n        else {\n          this.prepared._linkedEdges = null;\n        }\n\n                // if using `resizable.preserveAspectRatio` option, record aspect ratio at the start of the resize\n        if (this.target.options.resize.preserveAspectRatio){\n          this.resizeStartAspectRatio = startRect.width / startRect.height;\n        }\n\n        this.resizeRects = {\n          start: startRect,\n          current: extend({}, startRect),\n          restricted: extend({}, startRect),\n          previous: extend({}, startRect),\n          delta: {\n            left: 0, right: 0, width: 0,\n            top: 0, bottom: 0, height: 0\n          }\n        };\n\n        resizeEvent.rect = this.resizeRects.restricted;\n        resizeEvent.deltaRect = this.resizeRects.delta;\n      }\n\n      this.target.fire(resizeEvent);\n\n      this.resizing = true;\n\n      return resizeEvent;\n    },\n\n    resizeMove: function(event){\n      var resizeEvent = new InteractEvent(this, event, 'resize', 'move', this.element);\n\n      var edges = this.prepared.edges,\n        invert = this.target.options.resize.invert,\n        invertible = invert === 'reposition' || invert === 'negate';\n\n      if (edges){\n        var dx = resizeEvent.dx,\n          dy = resizeEvent.dy,\n\n          start = this.resizeRects.start,\n          current = this.resizeRects.current,\n          restricted = this.resizeRects.restricted,\n          delta = this.resizeRects.delta,\n          previous = extend(this.resizeRects.previous, restricted),\n\n          originalEdges = edges;\n\n                // `resize.preserveAspectRatio` takes precedence over `resize.square`\n        if (this.target.options.resize.preserveAspectRatio){\n          var resizeStartAspectRatio = this.resizeStartAspectRatio;\n\n          edges = this.prepared._linkedEdges;\n\n          if ((originalEdges.left && originalEdges.bottom)\n                        || (originalEdges.right && originalEdges.top)){\n            dy = -dx / resizeStartAspectRatio;\n          }\n          else if (originalEdges.left || originalEdges.right){ dy = dx / resizeStartAspectRatio; }\n                    else if (originalEdges.top || originalEdges.bottom){ dx = dy * resizeStartAspectRatio; }\n        }\n        else if (this.target.options.resize.square){\n          edges = this.prepared._linkedEdges;\n\n          if ((originalEdges.left && originalEdges.bottom)\n                        || (originalEdges.right && originalEdges.top)){\n            dy = -dx;\n          }\n          else if (originalEdges.left || originalEdges.right){ dy = dx; }\n                    else if (originalEdges.top || originalEdges.bottom){ dx = dy; }\n        }\n\n                // update the 'current' rect without modifications\n        if (edges.top){ current.top += dy; }\n        if (edges.bottom){ current.bottom += dy; }\n        if (edges.left){ current.left += dx; }\n        if (edges.right){ current.right += dx; }\n\n        if (invertible){\n                    // if invertible, copy the current rect\n          extend(restricted, current);\n\n          if (invert === 'reposition'){\n                        // swap edge values if necessary to keep width/height positive\n            var swap;\n\n            if (restricted.top > restricted.bottom){\n              swap = restricted.top;\n\n              restricted.top = restricted.bottom;\n              restricted.bottom = swap;\n            }\n            if (restricted.left > restricted.right){\n              swap = restricted.left;\n\n              restricted.left = restricted.right;\n              restricted.right = swap;\n            }\n          }\n        }\n        else {\n                    // if not invertible, restrict to minimum of 0x0 rect\n          restricted.top = Math.min(current.top, start.bottom);\n          restricted.bottom = Math.max(current.bottom, start.top);\n          restricted.left = Math.min(current.left, start.right);\n          restricted.right = Math.max(current.right, start.left);\n        }\n\n        restricted.width = restricted.right - restricted.left;\n        restricted.height = restricted.bottom - restricted.top;\n\n        for (var edge in restricted){\n          delta[edge] = restricted[edge] - previous[edge];\n        }\n\n        resizeEvent.edges = this.prepared.edges;\n        resizeEvent.rect = restricted;\n        resizeEvent.deltaRect = delta;\n      }\n\n      this.target.fire(resizeEvent);\n\n      return resizeEvent;\n    },\n\n    gestureStart: function(event){\n      var gestureEvent = new InteractEvent(this, event, 'gesture', 'start', this.element);\n\n      gestureEvent.ds = 0;\n\n      this.gesture.startDistance = this.gesture.prevDistance = gestureEvent.distance;\n      this.gesture.startAngle = this.gesture.prevAngle = gestureEvent.angle;\n      this.gesture.scale = 1;\n\n      this.gesturing = true;\n\n      this.target.fire(gestureEvent);\n\n      return gestureEvent;\n    },\n\n    gestureMove: function(event){\n      if (!this.pointerIds.length){\n        return this.prevEvent;\n      }\n\n      var gestureEvent;\n\n      gestureEvent = new InteractEvent(this, event, 'gesture', 'move', this.element);\n      gestureEvent.ds = gestureEvent.scale - this.gesture.scale;\n\n      this.target.fire(gestureEvent);\n\n      this.gesture.prevAngle = gestureEvent.angle;\n      this.gesture.prevDistance = gestureEvent.distance;\n\n      if (gestureEvent.scale !== Infinity &&\n                gestureEvent.scale !== null &&\n                gestureEvent.scale !== undefined &&\n                !isNaN(gestureEvent.scale)){\n        this.gesture.scale = gestureEvent.scale;\n      }\n\n      return gestureEvent;\n    },\n\n    pointerHold: function(pointer, event, eventTarget){\n      this.collectEventTargets(pointer, event, eventTarget, 'hold');\n    },\n\n    pointerUp: function(pointer, event, eventTarget, curEventTarget){\n      var pointerIndex = this.mouse ? 0 : indexOf(this.pointerIds, getPointerId(pointer));\n\n      clearTimeout(this.holdTimers[pointerIndex]);\n\n      this.collectEventTargets(pointer, event, eventTarget, 'up');\n      this.collectEventTargets(pointer, event, eventTarget, 'tap');\n\n      this.pointerEnd(pointer, event, eventTarget, curEventTarget);\n\n      this.removePointer(pointer);\n    },\n\n    pointerCancel: function(pointer, event, eventTarget, curEventTarget){\n      var pointerIndex = this.mouse ? 0 : indexOf(this.pointerIds, getPointerId(pointer));\n\n      clearTimeout(this.holdTimers[pointerIndex]);\n\n      this.collectEventTargets(pointer, event, eventTarget, 'cancel');\n      this.pointerEnd(pointer, event, eventTarget, curEventTarget);\n\n      this.removePointer(pointer);\n    },\n\n        // http://www.quirksmode.org/dom/events/click.html\n        // >Events leading to dblclick\n        //\n        // IE8 doesn't fire down event before dblclick.\n        // This workaround tries to fire a tap and doubletap after dblclick\n    ie8Dblclick: function(pointer, event, eventTarget){\n      if (this.prevTap\n                && event.clientX === this.prevTap.clientX\n                && event.clientY === this.prevTap.clientY\n                && eventTarget === this.prevTap.target){\n        this.downTargets[0] = eventTarget;\n        this.downTimes[0] = new Date().getTime();\n        this.collectEventTargets(pointer, event, eventTarget, 'tap');\n      }\n    },\n\n        // End interact move events and stop auto-scroll unless inertia is enabled\n    pointerEnd: function(pointer, event, eventTarget, curEventTarget){\n      var endEvent,\n        target = this.target,\n        options = target && target.options,\n        inertiaOptions = options && this.prepared.name && options[this.prepared.name].inertia,\n        inertiaStatus = this.inertiaStatus;\n\n      if (this.interacting()){\n        if (inertiaStatus.active && !inertiaStatus.ending){ return; }\n\n        var pointerSpeed,\n          now = new Date().getTime(),\n          inertiaPossible = false,\n          inertia = false,\n          smoothEnd = false,\n          endSnap = checkSnap(target, this.prepared.name) && options[this.prepared.name].snap.endOnly,\n          endRestrict = checkRestrict(target, this.prepared.name) && options[this.prepared.name].restrict.endOnly,\n          dx = 0,\n          dy = 0,\n          startEvent;\n\n        if (this.dragging){\n          if (options.drag.axis === 'x'){ pointerSpeed = Math.abs(this.pointerDelta.client.vx); }\n          else if (options.drag.axis === 'y'){ pointerSpeed = Math.abs(this.pointerDelta.client.vy); }\n                    else   /* options.drag.axis === 'xy'*/{ pointerSpeed = this.pointerDelta.client.speed; }\n        }\n        else {\n          pointerSpeed = this.pointerDelta.client.speed;\n        }\n\n                // check if inertia should be started\n        inertiaPossible = (inertiaOptions && inertiaOptions.enabled\n                                   && this.prepared.name !== 'gesture'\n                                   && event !== inertiaStatus.startEvent);\n\n        inertia = (inertiaPossible\n                           && (now - this.curCoords.timeStamp) < 50\n                           && pointerSpeed > inertiaOptions.minSpeed\n                           && pointerSpeed > inertiaOptions.endSpeed);\n\n        if (inertiaPossible && !inertia && (endSnap || endRestrict)){\n          var snapRestrict = {};\n\n          snapRestrict.snap = snapRestrict.restrict = snapRestrict;\n\n          if (endSnap){\n            this.setSnapping(this.curCoords.page, snapRestrict);\n            if (snapRestrict.locked){\n              dx += snapRestrict.dx;\n              dy += snapRestrict.dy;\n            }\n          }\n\n          if (endRestrict){\n            this.setRestriction(this.curCoords.page, snapRestrict);\n            if (snapRestrict.restricted){\n              dx += snapRestrict.dx;\n              dy += snapRestrict.dy;\n            }\n          }\n\n          if (dx || dy){\n            smoothEnd = true;\n          }\n        }\n\n        if (inertia || smoothEnd){\n          copyCoords(inertiaStatus.upCoords, this.curCoords);\n\n          this.pointers[0] = inertiaStatus.startEvent = startEvent =\n                        new InteractEvent(this, event, this.prepared.name, 'inertiastart', this.element);\n\n          inertiaStatus.t0 = now;\n\n          target.fire(inertiaStatus.startEvent);\n\n          if (inertia){\n            inertiaStatus.vx0 = this.pointerDelta.client.vx;\n            inertiaStatus.vy0 = this.pointerDelta.client.vy;\n            inertiaStatus.v0 = pointerSpeed;\n\n            this.calcInertia(inertiaStatus);\n\n            var page = extend({}, this.curCoords.page),\n              origin = getOriginXY(target, this.element),\n              statusObject;\n\n            page.x = page.x + inertiaStatus.xe - origin.x;\n            page.y = page.y + inertiaStatus.ye - origin.y;\n\n            statusObject = {\n              useStatusXY: true,\n              x: page.x,\n              y: page.y,\n              dx: 0,\n              dy: 0,\n              snap: null\n            };\n\n            statusObject.snap = statusObject;\n\n            dx = dy = 0;\n\n            if (endSnap){\n              var snap = this.setSnapping(this.curCoords.page, statusObject);\n\n              if (snap.locked){\n                dx += snap.dx;\n                dy += snap.dy;\n              }\n            }\n\n            if (endRestrict){\n              var restrict = this.setRestriction(this.curCoords.page, statusObject);\n\n              if (restrict.restricted){\n                dx += restrict.dx;\n                dy += restrict.dy;\n              }\n            }\n\n            inertiaStatus.modifiedXe += dx;\n            inertiaStatus.modifiedYe += dy;\n\n            inertiaStatus.i = reqFrame(this.boundInertiaFrame);\n          }\n          else {\n            inertiaStatus.smoothEnd = true;\n            inertiaStatus.xe = dx;\n            inertiaStatus.ye = dy;\n\n            inertiaStatus.sx = inertiaStatus.sy = 0;\n\n            inertiaStatus.i = reqFrame(this.boundSmoothEndFrame);\n          }\n\n          inertiaStatus.active = true;\n          return;\n        }\n\n        if (endSnap || endRestrict){\n                    // fire a move event at the snapped coordinates\n          this.pointerMove(pointer, event, eventTarget, curEventTarget, true);\n        }\n      }\n\n      if (this.dragging){\n        endEvent = new InteractEvent(this, event, 'drag', 'end', this.element);\n\n        var draggableElement = this.element,\n          drop = this.getDrop(endEvent, event, draggableElement);\n\n        this.dropTarget = drop.dropzone;\n        this.dropElement = drop.element;\n\n        var dropEvents = this.getDropEvents(event, endEvent);\n\n        if (dropEvents.leave){ this.prevDropTarget.fire(dropEvents.leave); }\n        if (dropEvents.enter){ this.dropTarget.fire(dropEvents.enter); }\n        if (dropEvents.drop){ this.dropTarget.fire(dropEvents.drop); }\n        if (dropEvents.deactivate){\n          this.fireActiveDrops(dropEvents.deactivate);\n        }\n\n        target.fire(endEvent);\n      }\n      else if (this.resizing){\n        endEvent = new InteractEvent(this, event, 'resize', 'end', this.element);\n        target.fire(endEvent);\n      }\n            else if (this.gesturing){\n              endEvent = new InteractEvent(this, event, 'gesture', 'end', this.element);\n              target.fire(endEvent);\n            }\n\n      this.stop(event);\n    },\n\n    collectDrops: function(element){\n      var drops = [],\n        elements = [],\n        i;\n\n      element = element || this.element;\n\n            // collect all dropzones and their elements which qualify for a drop\n      for (i = 0; i < interactables.length; i++){\n        if (!interactables[i].options.drop.enabled){ continue; }\n\n        var current = interactables[i],\n          accept = current.options.drop.accept;\n\n                // test the draggable element against the dropzone's accept setting\n        if ((isElement(accept) && accept !== element)\n                    || (isString(accept)\n                        && !matchesSelector(element, accept))){\n          continue;\n        }\n\n                // query for new elements if necessary\n        var dropElements = current.selector ? current._context.querySelectorAll(current.selector) : [current._element];\n\n        for (var j = 0, len = dropElements.length; j < len; j++){\n          var currentElement = dropElements[j];\n\n          if (currentElement === element){\n            continue;\n          }\n\n          drops.push(current);\n          elements.push(currentElement);\n        }\n      }\n\n      return {\n        dropzones: drops,\n        elements: elements\n      };\n    },\n\n    fireActiveDrops: function(event){\n      var i,\n        current,\n        currentElement,\n        prevElement;\n\n            // loop through all active dropzones and trigger event\n      for (i = 0; i < this.activeDrops.dropzones.length; i++){\n        current = this.activeDrops.dropzones[i];\n        currentElement = this.activeDrops.elements[i];\n\n                // prevent trigger of duplicate events on same element\n        if (currentElement !== prevElement){\n                    // set current element as event target\n          event.target = currentElement;\n          current.fire(event);\n        }\n        prevElement = currentElement;\n      }\n    },\n\n        // Collect a new set of possible drops and save them in activeDrops.\n        // setActiveDrops should always be called when a drag has just started or a\n        // drag event happens while dynamicDrop is true\n    setActiveDrops: function(dragElement){\n            // get dropzones and their elements that could receive the draggable\n      var possibleDrops = this.collectDrops(dragElement, true);\n\n      this.activeDrops.dropzones = possibleDrops.dropzones;\n      this.activeDrops.elements = possibleDrops.elements;\n      this.activeDrops.rects = [];\n\n      for (var i = 0; i < this.activeDrops.dropzones.length; i++){\n        this.activeDrops.rects[i] = this.activeDrops.dropzones[i].getRect(this.activeDrops.elements[i]);\n      }\n    },\n\n    getDrop: function(dragEvent, event, dragElement){\n      var validDrops = [];\n\n      if (dynamicDrop){\n        this.setActiveDrops(dragElement);\n      }\n\n            // collect all dropzones and their elements which qualify for a drop\n      for (var j = 0; j < this.activeDrops.dropzones.length; j++){\n        var current = this.activeDrops.dropzones[j],\n          currentElement = this.activeDrops.elements[j],\n          rect = this.activeDrops.rects[j];\n\n        validDrops.push(current.dropCheck(dragEvent, event, this.target, dragElement, currentElement, rect)\n                                ? currentElement\n                                : null);\n      }\n\n            // get the most appropriate dropzone based on DOM depth and order\n      var dropIndex = indexOfDeepestElement(validDrops),\n        dropzone = this.activeDrops.dropzones[dropIndex] || null,\n        element = this.activeDrops.elements[dropIndex] || null;\n\n      return {\n        dropzone: dropzone,\n        element: element\n      };\n    },\n\n    getDropEvents: function(pointerEvent, dragEvent){\n      var dropEvents = {\n        enter: null,\n        leave: null,\n        activate: null,\n        deactivate: null,\n        move: null,\n        drop: null\n      };\n\n      if (this.dropElement !== this.prevDropElement){\n                // if there was a prevDropTarget, create a dragleave event\n        if (this.prevDropTarget){\n          dropEvents.leave = {\n            target: this.prevDropElement,\n            dropzone: this.prevDropTarget,\n            relatedTarget: dragEvent.target,\n            draggable: dragEvent.interactable,\n            dragEvent: dragEvent,\n            interaction: this,\n            timeStamp: dragEvent.timeStamp,\n            type: 'dragleave'\n          };\n\n          dragEvent.dragLeave = this.prevDropElement;\n          dragEvent.prevDropzone = this.prevDropTarget;\n        }\n                // if the dropTarget is not null, create a dragenter event\n        if (this.dropTarget){\n          dropEvents.enter = {\n            target: this.dropElement,\n            dropzone: this.dropTarget,\n            relatedTarget: dragEvent.target,\n            draggable: dragEvent.interactable,\n            dragEvent: dragEvent,\n            interaction: this,\n            timeStamp: dragEvent.timeStamp,\n            type: 'dragenter'\n          };\n\n          dragEvent.dragEnter = this.dropElement;\n          dragEvent.dropzone = this.dropTarget;\n        }\n      }\n\n      if (dragEvent.type === 'dragend' && this.dropTarget){\n        dropEvents.drop = {\n          target: this.dropElement,\n          dropzone: this.dropTarget,\n          relatedTarget: dragEvent.target,\n          draggable: dragEvent.interactable,\n          dragEvent: dragEvent,\n          interaction: this,\n          timeStamp: dragEvent.timeStamp,\n          type: 'drop'\n        };\n\n        dragEvent.dropzone = this.dropTarget;\n      }\n      if (dragEvent.type === 'dragstart'){\n        dropEvents.activate = {\n          target: null,\n          dropzone: null,\n          relatedTarget: dragEvent.target,\n          draggable: dragEvent.interactable,\n          dragEvent: dragEvent,\n          interaction: this,\n          timeStamp: dragEvent.timeStamp,\n          type: 'dropactivate'\n        };\n      }\n      if (dragEvent.type === 'dragend'){\n        dropEvents.deactivate = {\n          target: null,\n          dropzone: null,\n          relatedTarget: dragEvent.target,\n          draggable: dragEvent.interactable,\n          dragEvent: dragEvent,\n          interaction: this,\n          timeStamp: dragEvent.timeStamp,\n          type: 'dropdeactivate'\n        };\n      }\n      if (dragEvent.type === 'dragmove' && this.dropTarget){\n        dropEvents.move = {\n          target: this.dropElement,\n          dropzone: this.dropTarget,\n          relatedTarget: dragEvent.target,\n          draggable: dragEvent.interactable,\n          dragEvent: dragEvent,\n          interaction: this,\n          dragmove: dragEvent,\n          timeStamp: dragEvent.timeStamp,\n          type: 'dropmove'\n        };\n        dragEvent.dropzone = this.dropTarget;\n      }\n\n      return dropEvents;\n    },\n\n    currentAction: function(){\n      return (this.dragging && 'drag') || (this.resizing && 'resize') || (this.gesturing && 'gesture') || null;\n    },\n\n    interacting: function(){\n      return this.dragging || this.resizing || this.gesturing;\n    },\n\n    clearTargets: function(){\n      this.target = this.element = null;\n\n      this.dropTarget = this.dropElement = this.prevDropTarget = this.prevDropElement = null;\n    },\n\n    stop: function(event){\n      if (this.interacting()){\n        autoScroll.stop();\n        this.matches = [];\n        this.matchElements = [];\n\n        var target = this.target;\n\n        if (target.options.styleCursor){\n          target._doc.documentElement.style.cursor = '';\n        }\n\n                // prevent Default only if were previously interacting\n        if (event && isFunction(event.preventDefault)){\n          this.checkAndPreventDefault(event, target, this.element);\n        }\n\n        if (this.dragging){\n          this.activeDrops.dropzones = this.activeDrops.elements = this.activeDrops.rects = null;\n        }\n      }\n\n      this.clearTargets();\n\n      this.pointerIsDown = this.snapStatus.locked = this.dragging = this.resizing = this.gesturing = false;\n      this.prepared.name = this.prevEvent = null;\n      this.inertiaStatus.resumeDx = this.inertiaStatus.resumeDy = 0;\n\n            // remove pointers if their ID isn't in this.pointerIds\n      for (var i = 0; i < this.pointers.length; i++){\n        if (indexOf(this.pointerIds, getPointerId(this.pointers[i])) === -1){\n          this.pointers.splice(i, 1);\n        }\n      }\n    },\n\n    inertiaFrame: function(){\n      var inertiaStatus = this.inertiaStatus,\n        options = this.target.options[this.prepared.name].inertia,\n        lambda = options.resistance,\n        t = new Date().getTime() / 1000 - inertiaStatus.t0;\n\n      if (t < inertiaStatus.te){\n        var progress = 1 - (Math.exp(-lambda * t) - inertiaStatus.lambda_v0) / inertiaStatus.one_ve_v0;\n\n        if (inertiaStatus.modifiedXe === inertiaStatus.xe && inertiaStatus.modifiedYe === inertiaStatus.ye){\n          inertiaStatus.sx = inertiaStatus.xe * progress;\n          inertiaStatus.sy = inertiaStatus.ye * progress;\n        }\n        else {\n          var quadPoint = getQuadraticCurvePoint(\n                            0, 0,\n                            inertiaStatus.xe, inertiaStatus.ye,\n                            inertiaStatus.modifiedXe, inertiaStatus.modifiedYe,\n                            progress);\n\n          inertiaStatus.sx = quadPoint.x;\n          inertiaStatus.sy = quadPoint.y;\n        }\n\n        this.pointerMove(inertiaStatus.startEvent, inertiaStatus.startEvent);\n\n        inertiaStatus.i = reqFrame(this.boundInertiaFrame);\n      }\n      else {\n        inertiaStatus.ending = true;\n\n        inertiaStatus.sx = inertiaStatus.modifiedXe;\n        inertiaStatus.sy = inertiaStatus.modifiedYe;\n\n        this.pointerMove(inertiaStatus.startEvent, inertiaStatus.startEvent);\n        this.pointerEnd(inertiaStatus.startEvent, inertiaStatus.startEvent);\n\n        inertiaStatus.active = inertiaStatus.ending = false;\n      }\n    },\n\n    smoothEndFrame: function(){\n      var inertiaStatus = this.inertiaStatus,\n        t = new Date().getTime() - inertiaStatus.t0,\n        duration = this.target.options[this.prepared.name].inertia.smoothEndDuration;\n\n      if (t < duration){\n        inertiaStatus.sx = easeOutQuad(t, 0, inertiaStatus.xe, duration);\n        inertiaStatus.sy = easeOutQuad(t, 0, inertiaStatus.ye, duration);\n\n        this.pointerMove(inertiaStatus.startEvent, inertiaStatus.startEvent);\n\n        inertiaStatus.i = reqFrame(this.boundSmoothEndFrame);\n      }\n      else {\n        inertiaStatus.ending = true;\n\n        inertiaStatus.sx = inertiaStatus.xe;\n        inertiaStatus.sy = inertiaStatus.ye;\n\n        this.pointerMove(inertiaStatus.startEvent, inertiaStatus.startEvent);\n        this.pointerEnd(inertiaStatus.startEvent, inertiaStatus.startEvent);\n\n        inertiaStatus.smoothEnd =\n                  inertiaStatus.active = inertiaStatus.ending = false;\n      }\n    },\n\n    addPointer: function(pointer){\n      var id = getPointerId(pointer),\n        index = this.mouse ? 0 : indexOf(this.pointerIds, id);\n\n      if (index === -1){\n        index = this.pointerIds.length;\n      }\n\n      this.pointerIds[index] = id;\n      this.pointers[index] = pointer;\n\n      return index;\n    },\n\n    removePointer: function(pointer){\n      var id = getPointerId(pointer),\n        index = this.mouse ? 0 : indexOf(this.pointerIds, id);\n\n      if (index === -1){ return; }\n\n      this.pointers.splice(index, 1);\n      this.pointerIds.splice(index, 1);\n      this.downTargets.splice(index, 1);\n      this.downTimes.splice(index, 1);\n      this.holdTimers.splice(index, 1);\n    },\n\n    recordPointer: function(pointer){\n      var index = this.mouse ? 0 : indexOf(this.pointerIds, getPointerId(pointer));\n\n      if (index === -1){ return; }\n\n      this.pointers[index] = pointer;\n    },\n\n    collectEventTargets: function(pointer, event, eventTarget, eventType){\n      var pointerIndex = this.mouse ? 0 : indexOf(this.pointerIds, getPointerId(pointer));\n\n            // do not fire a tap event if the pointer was moved before being lifted\n      if (eventType === 'tap' && (this.pointerWasMoved\n                // or if the pointerup target is different to the pointerdown target\n                || !(this.downTargets[pointerIndex] && this.downTargets[pointerIndex] === eventTarget))){\n        return;\n      }\n\n      var targets = [],\n        elements = [],\n        element = eventTarget;\n\n      function collectSelectors(interactable, selector, context){\n        var els = ie8MatchesSelector\n                        ? context.querySelectorAll(selector)\n                        : undefined;\n\n        if (interactable._iEvents[eventType]\n                    && isElement(element)\n                    && inContext(interactable, element)\n                    && !testIgnore(interactable, element, eventTarget)\n                    && testAllow(interactable, element, eventTarget)\n                    && matchesSelector(element, selector, els)){\n          targets.push(interactable);\n          elements.push(element);\n        }\n      }\n\n      while (element){\n        if (interact.isSet(element) && interact(element)._iEvents[eventType]){\n          targets.push(interact(element));\n          elements.push(element);\n        }\n\n        interactables.forEachSelector(collectSelectors);\n\n        element = parentElement(element);\n      }\n\n            // create the tap event even if there are no listeners so that\n            // doubletap can still be created and fired\n      if (targets.length || eventType === 'tap'){\n        this.firePointers(pointer, event, eventTarget, targets, elements, eventType);\n      }\n    },\n\n    firePointers: function(pointer, event, eventTarget, targets, elements, eventType){\n      var pointerIndex = this.mouse ? 0 : indexOf(this.pointerIds, getPointerId(pointer)),\n        pointerEvent = {},\n        i,\n                // for tap events\n        interval, createNewDoubleTap;\n\n            // if it's a doubletap then the event properties would have been\n            // copied from the tap event and provided as the pointer argument\n      if (eventType === 'doubletap'){\n        pointerEvent = pointer;\n      }\n      else {\n        pointerExtend(pointerEvent, event);\n        if (event !== pointer){\n          pointerExtend(pointerEvent, pointer);\n        }\n\n        pointerEvent.preventDefault = preventOriginalDefault;\n        pointerEvent.stopPropagation = InteractEvent.prototype.stopPropagation;\n        pointerEvent.stopImmediatePropagation = InteractEvent.prototype.stopImmediatePropagation;\n        pointerEvent.interaction = this;\n\n        pointerEvent.timeStamp = new Date().getTime();\n        pointerEvent.originalEvent = event;\n        pointerEvent.originalPointer = pointer;\n        pointerEvent.type = eventType;\n        pointerEvent.pointerId = getPointerId(pointer);\n        pointerEvent.pointerType = this.mouse ? 'mouse' : !supportsPointerEvent ? 'touch'\n                                                    : isString(pointer.pointerType)\n                                                        ? pointer.pointerType\n                                                        : [,, 'touch', 'pen', 'mouse'][pointer.pointerType];\n      }\n\n      if (eventType === 'tap'){\n        pointerEvent.dt = pointerEvent.timeStamp - this.downTimes[pointerIndex];\n\n        interval = pointerEvent.timeStamp - this.tapTime;\n        createNewDoubleTap = !!(this.prevTap && this.prevTap.type !== 'doubletap'\n                       && this.prevTap.target === pointerEvent.target\n                       && interval < 500);\n\n        pointerEvent.double = createNewDoubleTap;\n\n        this.tapTime = pointerEvent.timeStamp;\n      }\n\n      for (i = 0; i < targets.length; i++){\n        pointerEvent.currentTarget = elements[i];\n        pointerEvent.interactable = targets[i];\n        targets[i].fire(pointerEvent);\n\n        if (pointerEvent.immediatePropagationStopped\n                    || (pointerEvent.propagationStopped && elements[i + 1] !== pointerEvent.currentTarget)){\n          break;\n        }\n      }\n\n      if (createNewDoubleTap){\n        var doubleTap = {};\n\n        extend(doubleTap, pointerEvent);\n\n        doubleTap.dt = interval;\n        doubleTap.type = 'doubletap';\n\n        this.collectEventTargets(doubleTap, event, eventTarget, 'doubletap');\n\n        this.prevTap = doubleTap;\n      }\n      else if (eventType === 'tap'){\n        this.prevTap = pointerEvent;\n      }\n    },\n\n    validateSelector: function(pointer, event, matches, matchElements){\n      for (var i = 0, len = matches.length; i < len; i++){\n        var match = matches[i],\n          matchElement = matchElements[i],\n          action = validateAction(match.getAction(pointer, event, this, matchElement), match);\n\n        if (action && withinInteractionLimit(match, matchElement, action)){\n          this.target = match;\n          this.element = matchElement;\n\n          return action;\n        }\n      }\n    },\n\n    setSnapping: function(pageCoords, status){\n      var snap = this.target.options[this.prepared.name].snap,\n        targets = [],\n        target,\n        page,\n        i;\n\n      status = status || this.snapStatus;\n\n      if (status.useStatusXY){\n        page = { x: status.x, y: status.y };\n      }\n      else {\n        var origin = getOriginXY(this.target, this.element);\n\n        page = extend({}, pageCoords);\n\n        page.x -= origin.x;\n        page.y -= origin.y;\n      }\n\n      status.realX = page.x;\n      status.realY = page.y;\n\n      page.x = page.x - this.inertiaStatus.resumeDx;\n      page.y = page.y - this.inertiaStatus.resumeDy;\n\n      var len = snap.targets ? snap.targets.length : 0;\n\n      for (var relIndex = 0; relIndex < this.snapOffsets.length; relIndex++){\n        var relative = {\n          x: page.x - this.snapOffsets[relIndex].x,\n          y: page.y - this.snapOffsets[relIndex].y\n        };\n\n        for (i = 0; i < len; i++){\n          if (isFunction(snap.targets[i])){\n            target = snap.targets[i](relative.x, relative.y, this);\n          }\n          else {\n            target = snap.targets[i];\n          }\n\n          if (!target){ continue; }\n\n          targets.push({\n            x: isNumber(target.x) ? (target.x + this.snapOffsets[relIndex].x) : relative.x,\n            y: isNumber(target.y) ? (target.y + this.snapOffsets[relIndex].y) : relative.y,\n\n            range: isNumber(target.range) ? target.range : snap.range\n          });\n        }\n      }\n\n      var closest = {\n        target: null,\n        inRange: false,\n        distance: 0,\n        range: 0,\n        dx: 0,\n        dy: 0\n      };\n\n      for (i = 0, len = targets.length; i < len; i++){\n        target = targets[i];\n\n        var range = target.range,\n          dx = target.x - page.x,\n          dy = target.y - page.y,\n          distance = hypot(dx, dy),\n          inRange = distance <= range;\n\n                // Infinite targets count as being out of range\n                // compared to non infinite ones that are in range\n        if (range === Infinity && closest.inRange && closest.range !== Infinity){\n          inRange = false;\n        }\n\n        if (!closest.target || (inRange\n                    // is the closest target in range?\n                    ? (closest.inRange && range !== Infinity\n                        // the pointer is relatively deeper in this target\n                        ? distance / range < closest.distance / closest.range\n                        // this target has Infinite range and the closest doesn't\n                        : (range === Infinity && closest.range !== Infinity)\n                            // OR this target is closer that the previous closest\n                            || distance < closest.distance)\n                    // The other is not in range and the pointer is closer to this target\n                    : (!closest.inRange && distance < closest.distance))){\n          if (range === Infinity){\n            inRange = true;\n          }\n\n          closest.target = target;\n          closest.distance = distance;\n          closest.range = range;\n          closest.inRange = inRange;\n          closest.dx = dx;\n          closest.dy = dy;\n\n          status.range = range;\n        }\n      }\n\n      var snapChanged;\n\n      if (closest.target){\n        snapChanged = (status.snappedX !== closest.target.x || status.snappedY !== closest.target.y);\n\n        status.snappedX = closest.target.x;\n        status.snappedY = closest.target.y;\n      }\n      else {\n        snapChanged = true;\n\n        status.snappedX = NaN;\n        status.snappedY = NaN;\n      }\n\n      status.dx = closest.dx;\n      status.dy = closest.dy;\n\n      status.changed = (snapChanged || (closest.inRange && !status.locked));\n      status.locked = closest.inRange;\n\n      return status;\n    },\n\n    setRestriction: function(pageCoords, status){\n      var target = this.target,\n        restrict = target && target.options[this.prepared.name].restrict,\n        restriction = restrict && restrict.restriction,\n        page;\n\n      if (!restriction){\n        return status;\n      }\n\n      status = status || this.restrictStatus;\n\n      page = status.useStatusXY\n                    ? page = { x: status.x, y: status.y }\n                    : page = extend({}, pageCoords);\n\n      if (status.snap && status.snap.locked){\n        page.x += status.snap.dx || 0;\n        page.y += status.snap.dy || 0;\n      }\n\n      page.x -= this.inertiaStatus.resumeDx;\n      page.y -= this.inertiaStatus.resumeDy;\n\n      status.dx = 0;\n      status.dy = 0;\n      status.restricted = false;\n\n      var rect, restrictedX, restrictedY;\n\n      if (isString(restriction)){\n        if (restriction === 'parent'){\n          restriction = parentElement(this.element);\n        }\n        else if (restriction === 'self'){\n          restriction = target.getRect(this.element);\n        }\n                else {\n          restriction = closest(this.element, restriction);\n        }\n\n        if (!restriction){ return status; }\n      }\n\n      if (isFunction(restriction)){\n        restriction = restriction(page.x, page.y, this.element);\n      }\n\n      if (isElement(restriction)){\n        restriction = getElementRect(restriction);\n      }\n\n      rect = restriction;\n\n      if (!restriction){\n        restrictedX = page.x;\n        restrictedY = page.y;\n      }\n            // object is assumed to have\n            // x, y, width, height or\n            // left, top, right, bottom\n      else if ('x' in restriction && 'y' in restriction){\n        restrictedX = Math.max(Math.min(rect.x + rect.width - this.restrictOffset.right, page.x), rect.x + this.restrictOffset.left);\n        restrictedY = Math.max(Math.min(rect.y + rect.height - this.restrictOffset.bottom, page.y), rect.y + this.restrictOffset.top);\n      }\n            else {\n        restrictedX = Math.max(Math.min(rect.right - this.restrictOffset.right, page.x), rect.left + this.restrictOffset.left);\n        restrictedY = Math.max(Math.min(rect.bottom - this.restrictOffset.bottom, page.y), rect.top + this.restrictOffset.top);\n      }\n\n      status.dx = restrictedX - page.x;\n      status.dy = restrictedY - page.y;\n\n      status.changed = status.restrictedX !== restrictedX || status.restrictedY !== restrictedY;\n      status.restricted = !!(status.dx || status.dy);\n\n      status.restrictedX = restrictedX;\n      status.restrictedY = restrictedY;\n\n      return status;\n    },\n\n    checkAndPreventDefault: function(event, interactable, element){\n      if (!(interactable = interactable || this.target)){ return; }\n\n      var options = interactable.options,\n        prevent = options.preventDefault;\n\n      if (prevent === 'auto' && element && !/^(input|select|textarea)$/i.test(event.target.nodeName)){\n                // do not preventDefault on pointerdown if the prepared action is a drag\n                // and dragging can only start from a certain direction - this allows\n                // a touch to pan the viewport if a drag isn't in the right direction\n        if (/down|start/i.test(event.type)\n                    && this.prepared.name === 'drag' && options.drag.axis !== 'xy'){\n          return;\n        }\n\n                // with manualStart, only preventDefault while interacting\n        if (options[this.prepared.name] && options[this.prepared.name].manualStart\n                    && !this.interacting()){\n          return;\n        }\n\n        event.preventDefault();\n        return;\n      }\n\n      if (prevent === 'always'){\n        event.preventDefault();\n        return;\n      }\n    },\n\n    calcInertia: function(status){\n      var inertiaOptions = this.target.options[this.prepared.name].inertia,\n        lambda = inertiaOptions.resistance,\n        inertiaDur = -Math.log(inertiaOptions.endSpeed / status.v0) / lambda;\n\n      status.x0 = this.prevEvent.pageX;\n      status.y0 = this.prevEvent.pageY;\n      status.t0 = status.startEvent.timeStamp / 1000;\n      status.sx = status.sy = 0;\n\n      status.modifiedXe = status.xe = (status.vx0 - inertiaDur) / lambda;\n      status.modifiedYe = status.ye = (status.vy0 - inertiaDur) / lambda;\n      status.te = inertiaDur;\n\n      status.lambda_v0 = lambda / status.v0;\n      status.one_ve_v0 = 1 - inertiaOptions.endSpeed / status.v0;\n    },\n\n    autoScrollMove: function(pointer){\n      if (!(this.interacting()\n                && checkAutoScroll(this.target, this.prepared.name))){\n        return;\n      }\n\n      if (this.inertiaStatus.active){\n        autoScroll.x = autoScroll.y = 0;\n        return;\n      }\n\n      var top,\n        right,\n        bottom,\n        left,\n        options = this.target.options[this.prepared.name].autoScroll,\n        container = options.container || getWindow(this.element);\n\n      if (isWindow(container)){\n        left = pointer.clientX < autoScroll.margin;\n        top = pointer.clientY < autoScroll.margin;\n        right = pointer.clientX > container.innerWidth - autoScroll.margin;\n        bottom = pointer.clientY > container.innerHeight - autoScroll.margin;\n      }\n      else {\n        var rect = getElementClientRect(container);\n\n        left = pointer.clientX < rect.left + autoScroll.margin;\n        top = pointer.clientY < rect.top + autoScroll.margin;\n        right = pointer.clientX > rect.right - autoScroll.margin;\n        bottom = pointer.clientY > rect.bottom - autoScroll.margin;\n      }\n\n      autoScroll.x = (right ? 1 : left ? -1 : 0);\n      autoScroll.y = (bottom ? 1 : top ? -1 : 0);\n\n      if (!autoScroll.isScrolling){\n                // set the autoScroll properties to those of the target\n        autoScroll.margin = options.margin;\n        autoScroll.speed = options.speed;\n\n        autoScroll.start(this);\n      }\n    },\n\n    _updateEventTargets: function(target, currentTarget){\n      this._eventTarget = target;\n      this._curEventTarget = currentTarget;\n    }\n\n  };\n\n  function getInteractionFromPointer(pointer, eventType, eventTarget){\n    var i = 0, len = interactions.length,\n      mouseEvent = (/mouse/i.test(pointer.pointerType || eventType)\n                          // MSPointerEvent.MSPOINTER_TYPE_MOUSE\n                          || pointer.pointerType === 4),\n      interaction;\n\n    var id = getPointerId(pointer);\n\n        // try to resume inertia with a new pointer\n    if (/down|start/i.test(eventType)){\n      for (i = 0; i < len; i++){\n        interaction = interactions[i];\n\n        var element = eventTarget;\n\n        if (interaction.inertiaStatus.active && interaction.target.options[interaction.prepared.name].inertia.allowResume\n                    && (interaction.mouse === mouseEvent)){\n          while (element){\n                        // if the element is the interaction element\n            if (element === interaction.element){\n              return interaction;\n            }\n            element = parentElement(element);\n          }\n        }\n      }\n    }\n\n        // if it's a mouse interaction\n    if (mouseEvent || !(supportsTouch || supportsPointerEvent)){\n            // find a mouse interaction that's not in inertia phase\n      for (i = 0; i < len; i++){\n        if (interactions[i].mouse && !interactions[i].inertiaStatus.active){\n          return interactions[i];\n        }\n      }\n\n            // find any interaction specifically for mouse.\n            // if the eventType is a mousedown, and inertia is active\n            // ignore the interaction\n      for (i = 0; i < len; i++){\n        if (interactions[i].mouse && !(/down/.test(eventType) && interactions[i].inertiaStatus.active)){\n          return interaction;\n        }\n      }\n\n            // create a new interaction for mouse\n      interaction = new Interaction();\n      interaction.mouse = true;\n\n      return interaction;\n    }\n\n        // get interaction that has this pointer\n    for (i = 0; i < len; i++){\n      if (contains(interactions[i].pointerIds, id)){\n        return interactions[i];\n      }\n    }\n\n        // at this stage, a pointerUp should not return an interaction\n    if (/up|end|out/i.test(eventType)){\n      return null;\n    }\n\n        // get first idle interaction\n    for (i = 0; i < len; i++){\n      interaction = interactions[i];\n\n      if ((!interaction.prepared.name || (interaction.target.options.gesture.enabled))\n                && !interaction.interacting()\n                && !(!mouseEvent && interaction.mouse)){\n        return interaction;\n      }\n    }\n\n    return new Interaction();\n  }\n\n  function doOnInteractions(method){\n    return (function(event){\n      var interaction,\n        eventTarget = getActualElement(event.path\n                                               ? event.path[0]\n                                               : event.target),\n        curEventTarget = getActualElement(event.currentTarget),\n        i;\n\n      if (supportsTouch && /touch/.test(event.type)){\n        prevTouchTime = new Date().getTime();\n\n        for (i = 0; i < event.changedTouches.length; i++){\n          var pointer = event.changedTouches[i];\n\n          interaction = getInteractionFromPointer(pointer, event.type, eventTarget);\n\n          if (!interaction){ continue; }\n\n          interaction._updateEventTargets(eventTarget, curEventTarget);\n\n          interaction[method](pointer, event, eventTarget, curEventTarget);\n        }\n      }\n      else {\n        if (!supportsPointerEvent && /mouse/.test(event.type)){\n                    // ignore mouse events while touch interactions are active\n          for (i = 0; i < interactions.length; i++){\n            if (!interactions[i].mouse && interactions[i].pointerIsDown){\n              return;\n            }\n          }\n\n                    // try to ignore mouse events that are simulated by the browser\n                    // after a touch event\n          if (new Date().getTime() - prevTouchTime < 500){\n            return;\n          }\n        }\n\n        interaction = getInteractionFromPointer(event, event.type, eventTarget);\n\n        if (!interaction){ return; }\n\n        interaction._updateEventTargets(eventTarget, curEventTarget);\n\n        interaction[method](event, event, eventTarget, curEventTarget);\n      }\n    });\n  }\n\n  function InteractEvent(interaction, event, action, phase, element, related){\n    var client,\n      page,\n      target = interaction.target,\n      snapStatus = interaction.snapStatus,\n      restrictStatus = interaction.restrictStatus,\n      pointers = interaction.pointers,\n      deltaSource = (target && target.options || defaultOptions).deltaSource,\n      sourceX = deltaSource + 'X',\n      sourceY = deltaSource + 'Y',\n      options = target ? target.options : defaultOptions,\n      origin = getOriginXY(target, element),\n      starting = phase === 'start',\n      ending = phase === 'end',\n      coords = starting ? interaction.startCoords : interaction.curCoords;\n\n    element = element || interaction.element;\n\n    page = extend({}, coords.page);\n    client = extend({}, coords.client);\n\n    page.x -= origin.x;\n    page.y -= origin.y;\n\n    client.x -= origin.x;\n    client.y -= origin.y;\n\n    var relativePoints = options[action].snap && options[action].snap.relativePoints;\n\n    if (checkSnap(target, action) && !(starting && relativePoints && relativePoints.length)){\n      this.snap = {\n        range: snapStatus.range,\n        locked: snapStatus.locked,\n        x: snapStatus.snappedX,\n        y: snapStatus.snappedY,\n        realX: snapStatus.realX,\n        realY: snapStatus.realY,\n        dx: snapStatus.dx,\n        dy: snapStatus.dy\n      };\n\n      if (snapStatus.locked){\n        page.x += snapStatus.dx;\n        page.y += snapStatus.dy;\n        client.x += snapStatus.dx;\n        client.y += snapStatus.dy;\n      }\n    }\n\n    if (checkRestrict(target, action) && !(starting && options[action].restrict.elementRect) && restrictStatus.restricted){\n      page.x += restrictStatus.dx;\n      page.y += restrictStatus.dy;\n      client.x += restrictStatus.dx;\n      client.y += restrictStatus.dy;\n\n      this.restrict = {\n        dx: restrictStatus.dx,\n        dy: restrictStatus.dy\n      };\n    }\n\n    this.pageX = page.x;\n    this.pageY = page.y;\n    this.clientX = client.x;\n    this.clientY = client.y;\n\n    this.x0 = interaction.startCoords.page.x - origin.x;\n    this.y0 = interaction.startCoords.page.y - origin.y;\n    this.clientX0 = interaction.startCoords.client.x - origin.x;\n    this.clientY0 = interaction.startCoords.client.y - origin.y;\n    this.ctrlKey = event.ctrlKey;\n    this.altKey = event.altKey;\n    this.shiftKey = event.shiftKey;\n    this.metaKey = event.metaKey;\n    this.button = event.button;\n    this.buttons = event.buttons;\n    this.target = element;\n    this.t0 = interaction.downTimes[0];\n    this.type = action + (phase || '');\n\n    this.interaction = interaction;\n    this.interactable = target;\n\n    var inertiaStatus = interaction.inertiaStatus;\n\n    if (inertiaStatus.active){\n      this.detail = 'inertia';\n    }\n\n    if (related){\n      this.relatedTarget = related;\n    }\n\n        // end event dx, dy is difference between start and end points\n    if (ending){\n      if (deltaSource === 'client'){\n        this.dx = client.x - interaction.startCoords.client.x;\n        this.dy = client.y - interaction.startCoords.client.y;\n      }\n      else {\n        this.dx = page.x - interaction.startCoords.page.x;\n        this.dy = page.y - interaction.startCoords.page.y;\n      }\n    }\n    else if (starting){\n      this.dx = 0;\n      this.dy = 0;\n    }\n        // copy properties from previousmove if starting inertia\n        else if (phase === 'inertiastart'){\n          this.dx = interaction.prevEvent.dx;\n          this.dy = interaction.prevEvent.dy;\n        }\n        else {\n          if (deltaSource === 'client'){\n            this.dx = client.x - interaction.prevEvent.clientX;\n            this.dy = client.y - interaction.prevEvent.clientY;\n          }\n          else {\n            this.dx = page.x - interaction.prevEvent.pageX;\n            this.dy = page.y - interaction.prevEvent.pageY;\n          }\n        }\n    if (interaction.prevEvent && interaction.prevEvent.detail === 'inertia'\n            && !inertiaStatus.active\n            && options[action].inertia && options[action].inertia.zeroResumeDelta){\n      inertiaStatus.resumeDx += this.dx;\n      inertiaStatus.resumeDy += this.dy;\n\n      this.dx = this.dy = 0;\n    }\n\n    if (action === 'resize' && interaction.resizeAxes){\n      if (options.resize.square){\n        if (interaction.resizeAxes === 'y'){\n          this.dx = this.dy;\n        }\n        else {\n          this.dy = this.dx;\n        }\n        this.axes = 'xy';\n      }\n      else {\n        this.axes = interaction.resizeAxes;\n\n        if (interaction.resizeAxes === 'x'){\n          this.dy = 0;\n        }\n        else if (interaction.resizeAxes === 'y'){\n          this.dx = 0;\n        }\n      }\n    }\n    else if (action === 'gesture'){\n      this.touches = [pointers[0], pointers[1]];\n\n      if (starting){\n        this.distance = touchDistance(pointers, deltaSource);\n        this.box = touchBBox(pointers);\n        this.scale = 1;\n        this.ds = 0;\n        this.angle = touchAngle(pointers, undefined, deltaSource);\n        this.da = 0;\n      }\n      else if (ending || event instanceof InteractEvent){\n        this.distance = interaction.prevEvent.distance;\n        this.box = interaction.prevEvent.box;\n        this.scale = interaction.prevEvent.scale;\n        this.ds = this.scale - 1;\n        this.angle = interaction.prevEvent.angle;\n        this.da = this.angle - interaction.gesture.startAngle;\n      }\n            else {\n        this.distance = touchDistance(pointers, deltaSource);\n        this.box = touchBBox(pointers);\n        this.scale = this.distance / interaction.gesture.startDistance;\n        this.angle = touchAngle(pointers, interaction.gesture.prevAngle, deltaSource);\n\n        this.ds = this.scale - interaction.gesture.prevScale;\n        this.da = this.angle - interaction.gesture.prevAngle;\n      }\n    }\n\n    if (starting){\n      this.timeStamp = interaction.downTimes[0];\n      this.dt = 0;\n      this.duration = 0;\n      this.speed = 0;\n      this.velocityX = 0;\n      this.velocityY = 0;\n    }\n    else if (phase === 'inertiastart'){\n      this.timeStamp = interaction.prevEvent.timeStamp;\n      this.dt = interaction.prevEvent.dt;\n      this.duration = interaction.prevEvent.duration;\n      this.speed = interaction.prevEvent.speed;\n      this.velocityX = interaction.prevEvent.velocityX;\n      this.velocityY = interaction.prevEvent.velocityY;\n    }\n        else {\n      this.timeStamp = new Date().getTime();\n      this.dt = this.timeStamp - interaction.prevEvent.timeStamp;\n      this.duration = this.timeStamp - interaction.downTimes[0];\n\n      if (event instanceof InteractEvent){\n        var dx = this[sourceX] - interaction.prevEvent[sourceX],\n          dy = this[sourceY] - interaction.prevEvent[sourceY],\n          dt = this.dt / 1000;\n\n        this.speed = hypot(dx, dy) / dt;\n        this.velocityX = dx / dt;\n        this.velocityY = dy / dt;\n      }\n            // if normal move or end event, use previous user event coords\n      else {\n                // speed and velocity in pixels per second\n        this.speed = interaction.pointerDelta[deltaSource].speed;\n        this.velocityX = interaction.pointerDelta[deltaSource].vx;\n        this.velocityY = interaction.pointerDelta[deltaSource].vy;\n      }\n    }\n\n    if ((ending || phase === 'inertiastart')\n            && interaction.prevEvent.speed > 600 && this.timeStamp - interaction.prevEvent.timeStamp < 150){\n      var angle = 180 * Math.atan2(interaction.prevEvent.velocityY, interaction.prevEvent.velocityX) / Math.PI,\n        overlap = 22.5;\n\n      if (angle < 0){\n        angle += 360;\n      }\n\n      var left = 135 - overlap <= angle && angle < 225 + overlap,\n        up = 225 - overlap <= angle && angle < 315 + overlap,\n\n        right = !left && (315 - overlap <= angle || angle < 45 + overlap),\n        down = !up && 45 - overlap <= angle && angle < 135 + overlap;\n\n      this.swipe = {\n        up: up,\n        down: down,\n        left: left,\n        right: right,\n        angle: angle,\n        speed: interaction.prevEvent.speed,\n        velocity: {\n          x: interaction.prevEvent.velocityX,\n          y: interaction.prevEvent.velocityY\n        }\n      };\n    }\n  }\n\n  InteractEvent.prototype = {\n    preventDefault: blank,\n    stopImmediatePropagation: function(){\n      this.immediatePropagationStopped = this.propagationStopped = true;\n    },\n    stopPropagation: function(){\n      this.propagationStopped = true;\n    }\n  };\n\n  function preventOriginalDefault(){\n    this.originalEvent.preventDefault();\n  }\n\n  function getActionCursor(action){\n    var cursor = '';\n\n    if (action.name === 'drag'){\n      cursor = actionCursors.drag;\n    }\n    if (action.name === 'resize'){\n      if (action.axis){\n        cursor = actionCursors[action.name + action.axis];\n      }\n      else if (action.edges){\n        var cursorKey = 'resize',\n          edgeNames = ['top', 'bottom', 'left', 'right'];\n\n        for (var i = 0; i < 4; i++){\n          if (action.edges[edgeNames[i]]){\n            cursorKey += edgeNames[i];\n          }\n        }\n\n        cursor = actionCursors[cursorKey];\n      }\n    }\n\n    return cursor;\n  }\n\n  function checkResizeEdge(name, value, page, element, interactableElement, rect, margin){\n        // false, '', undefined, null\n    if (!value){ return false; }\n\n        // true value, use pointer coords and element rect\n    if (value === true){\n            // if dimensions are negative, \"switch\" edges\n      var width = isNumber(rect.width) ? rect.width : rect.right - rect.left,\n        height = isNumber(rect.height) ? rect.height : rect.bottom - rect.top;\n\n      if (width < 0){\n        if (name === 'left'){ name = 'right'; }\n        else if (name === 'right'){ name = 'left'; }\n      }\n      if (height < 0){\n        if (name === 'top'){ name = 'bottom'; }\n        else if (name === 'bottom'){ name = 'top'; }\n      }\n\n      if (name === 'left'){ return page.x < ((width >= 0 ? rect.left : rect.right) + margin); }\n      if (name === 'top'){ return page.y < ((height >= 0 ? rect.top : rect.bottom) + margin); }\n\n      if (name === 'right'){ return page.x > ((width >= 0 ? rect.right : rect.left) - margin); }\n      if (name === 'bottom'){ return page.y > ((height >= 0 ? rect.bottom : rect.top) - margin); }\n    }\n\n        // the remaining checks require an element\n    if (!isElement(element)){ return false; }\n\n    return isElement(value)\n                    // the value is an element to use as a resize handle\n                    ? value === element\n                    // otherwise check if element matches value as selector\n                    : matchesUpTo(element, value, interactableElement);\n  }\n\n  function defaultActionChecker(pointer, interaction, element){\n    var rect = this.getRect(element),\n      shouldResize = false,\n      action = null,\n      resizeAxes = null,\n      resizeEdges,\n      page = extend({}, interaction.curCoords.page),\n      options = this.options;\n\n    if (!rect){ return null; }\n\n    if (actionIsEnabled.resize && options.resize.enabled){\n      var resizeOptions = options.resize;\n\n      resizeEdges = {\n        left: false, right: false, top: false, bottom: false\n      };\n\n            // if using resize.edges\n      if (isObject(resizeOptions.edges)){\n        for (var edge in resizeEdges){\n          resizeEdges[edge] = checkResizeEdge(edge,\n                                                        resizeOptions.edges[edge],\n                                                        page,\n                                                        interaction._eventTarget,\n                                                        element,\n                                                        rect,\n                                                        resizeOptions.margin || margin);\n        }\n\n        resizeEdges.left = resizeEdges.left && !resizeEdges.right;\n        resizeEdges.top = resizeEdges.top && !resizeEdges.bottom;\n\n        shouldResize = resizeEdges.left || resizeEdges.right || resizeEdges.top || resizeEdges.bottom;\n      }\n      else {\n        var right = options.resize.axis !== 'y' && page.x > (rect.right - margin),\n          bottom = options.resize.axis !== 'x' && page.y > (rect.bottom - margin);\n\n        shouldResize = right || bottom;\n        resizeAxes = (right ? 'x' : '') + (bottom ? 'y' : '');\n      }\n    }\n\n    action = shouldResize\n            ? 'resize'\n            : actionIsEnabled.drag && options.drag.enabled\n                ? 'drag'\n                : null;\n\n    if (actionIsEnabled.gesture\n            && interaction.pointerIds.length >= 2\n            && !(interaction.dragging || interaction.resizing)){\n      action = 'gesture';\n    }\n\n    if (action){\n      return {\n        name: action,\n        axis: resizeAxes,\n        edges: resizeEdges\n      };\n    }\n\n    return null;\n  }\n\n    // Check if action is enabled globally and the current target supports it\n    // If so, return the validated action. Otherwise, return null\n  function validateAction(action, interactable){\n    if (!isObject(action)){ return null; }\n\n    var actionName = action.name,\n      options = interactable.options;\n\n    if (((actionName === 'resize' && options.resize.enabled)\n            || (actionName === 'drag' && options.drag.enabled)\n            || (actionName === 'gesture' && options.gesture.enabled))\n            && actionIsEnabled[actionName]){\n      if (actionName === 'resize' || actionName === 'resizeyx'){\n        actionName = 'resizexy';\n      }\n\n      return action;\n    }\n    return null;\n  }\n\n  var listeners = {},\n    interactionListeners = [\n      'dragStart', 'dragMove', 'resizeStart', 'resizeMove', 'gestureStart', 'gestureMove',\n      'pointerOver', 'pointerOut', 'pointerHover', 'selectorDown',\n      'pointerDown', 'pointerMove', 'pointerUp', 'pointerCancel', 'pointerEnd',\n      'addPointer', 'removePointer', 'recordPointer', 'autoScrollMove'\n    ];\n\n  for (var i = 0, len = interactionListeners.length; i < len; i++){\n    var name = interactionListeners[i];\n\n    listeners[name] = doOnInteractions(name);\n  }\n\n    // bound to the interactable context when a DOM event\n    // listener is added to a selector interactable\n  function delegateListener(event, useCapture){\n    var fakeEvent = {},\n      delegated = delegatedEvents[event.type],\n      eventTarget = getActualElement(event.path\n                                           ? event.path[0]\n                                           : event.target),\n      element = eventTarget;\n\n    useCapture = useCapture ? true : false;\n\n        // duplicate the event so that currentTarget can be changed\n    for (var prop in event){\n      fakeEvent[prop] = event[prop];\n    }\n\n    fakeEvent.originalEvent = event;\n    fakeEvent.preventDefault = preventOriginalDefault;\n\n        // climb up document tree looking for selector matches\n    while (isElement(element)){\n      for (var i = 0; i < delegated.selectors.length; i++){\n        var selector = delegated.selectors[i],\n          context = delegated.contexts[i];\n\n        if (matchesSelector(element, selector)\n                    && nodeContains(context, eventTarget)\n                    && nodeContains(context, element)){\n          var listeners = delegated.listeners[i];\n\n          fakeEvent.currentTarget = element;\n\n          for (var j = 0; j < listeners.length; j++){\n            if (listeners[j][1] === useCapture){\n              listeners[j][0](fakeEvent);\n            }\n          }\n        }\n      }\n\n      element = parentElement(element);\n    }\n  }\n\n  function delegateUseCapture(event){\n    return delegateListener.call(this, event, true);\n  }\n\n  interactables.indexOfElement = function indexOfElement(element, context){\n    context = context || document;\n\n    for (var i = 0; i < this.length; i++){\n      var interactable = this[i];\n\n      if ((interactable.selector === element\n                && (interactable._context === context))\n                || (!interactable.selector && interactable._element === element)){\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  interactables.get = function interactableGet(element, options){\n    return this[this.indexOfElement(element, options && options.context)];\n  };\n\n  interactables.forEachSelector = function(callback){\n    for (var i = 0; i < this.length; i++){\n      var interactable = this[i];\n\n      if (!interactable.selector){\n        continue;\n      }\n\n      var ret = callback(interactable, interactable.selector, interactable._context, i, this);\n\n      if (ret !== undefined){\n        return ret;\n      }\n    }\n  };\n\n    /* \\\n     * interact\n     [ method ]\n     *\n     * The methods of this variable can be used to set elements as\n     * interactables and also to change various default settings.\n     *\n     * Calling it as a function and passing an element or a valid CSS selector\n     * string returns an Interactable object which has various methods to\n     * configure it.\n     *\n     - element (Element | string) The HTML or SVG Element to interact with or CSS selector\n     = (object) An @Interactable\n     *\n     > Usage\n     | interact(document.getElementById('draggable')).draggable(true);\n     |\n     | var rectables = interact('rect');\n     | rectables\n     |     .gesturable(true)\n     |     .on('gesturemove', function (event) {\n     |         // something cool...\n     |     })\n     |     .autoScroll(true);\n    \\*/\n  function interact(element, options){\n    return interactables.get(element, options) || new Interactable(element, options);\n  }\n\n    /* \\\n     * Interactable\n     [ property ]\n     **\n     * Object type returned by @interact\n    \\*/\n  function Interactable(element, options){\n    this._element = element;\n    this._iEvents = this._iEvents || {};\n\n    var _window;\n\n    if (trySelector(element)){\n      this.selector = element;\n\n      var context = options && options.context;\n\n      _window = context ? getWindow(context) : window;\n\n      if (context && (_window.Node\n                    ? context instanceof _window.Node\n                    : (isElement(context) || context === _window.document))){\n        this._context = context;\n      }\n    }\n    else {\n      _window = getWindow(element);\n\n      if (isElement(element, _window)){\n        if (PointerEvent){\n          events.add(this._element, pEventTypes.down, listeners.pointerDown);\n          events.add(this._element, pEventTypes.move, listeners.pointerHover);\n        }\n        else {\n          events.add(this._element, 'mousedown', listeners.pointerDown);\n          events.add(this._element, 'mousemove', listeners.pointerHover);\n          events.add(this._element, 'touchstart', listeners.pointerDown);\n          events.add(this._element, 'touchmove', listeners.pointerHover);\n        }\n      }\n    }\n\n    this._doc = _window.document;\n\n    if (!contains(documents, this._doc)){\n      listenToDocument(this._doc);\n    }\n\n    interactables.push(this);\n\n    this.set(options);\n  }\n\n  Interactable.prototype = {\n    setOnEvents: function(action, phases){\n      if (action === 'drop'){\n        if (isFunction(phases.ondrop)){ this.ondrop = phases.ondrop; }\n        if (isFunction(phases.ondropactivate)){ this.ondropactivate = phases.ondropactivate; }\n        if (isFunction(phases.ondropdeactivate)){ this.ondropdeactivate = phases.ondropdeactivate; }\n        if (isFunction(phases.ondragenter)){ this.ondragenter = phases.ondragenter; }\n        if (isFunction(phases.ondragleave)){ this.ondragleave = phases.ondragleave; }\n        if (isFunction(phases.ondropmove)){ this.ondropmove = phases.ondropmove; }\n      }\n      else {\n        action = 'on' + action;\n\n        if (isFunction(phases.onstart)){ this[action + 'start' ] = phases.onstart; }\n        if (isFunction(phases.onmove)){ this[action + 'move' ] = phases.onmove; }\n        if (isFunction(phases.onend)){ this[action + 'end' ] = phases.onend; }\n        if (isFunction(phases.oninertiastart)){ this[action + 'inertiastart' ] = phases.oninertiastart; }\n      }\n\n      return this;\n    },\n\n        /* \\\n         * Interactable.draggable\n         [ method ]\n         *\n         * Gets or sets whether drag actions can be performed on the\n         * Interactable\n         *\n         = (boolean) Indicates if this can be the target of drag events\n         | var isDraggable = interact('ul li').draggable();\n         * or\n         - options (boolean | object) #optional true/false or An object with event listeners to be fired on drag events (object makes the Interactable draggable)\n         = (object) This Interactable\n         | interact(element).draggable({\n         |     onstart: function (event) {},\n         |     onmove : function (event) {},\n         |     onend  : function (event) {},\n         |\n         |     // the axis in which the first movement must be\n         |     // for the drag sequence to start\n         |     // 'xy' by default - any direction\n         |     axis: 'x' || 'y' || 'xy',\n         |\n         |     // max number of drags that can happen concurrently\n         |     // with elements of this Interactable. Infinity by default\n         |     max: Infinity,\n         |\n         |     // max number of drags that can target the same element+Interactable\n         |     // 1 by default\n         |     maxPerElement: 2\n         | });\n        \\*/\n    draggable: function(options){\n      if (isObject(options)){\n        this.options.drag.enabled = options.enabled === false ? false : true;\n        this.setPerAction('drag', options);\n        this.setOnEvents('drag', options);\n\n        if (/^x$|^y$|^xy$/.test(options.axis)){\n          this.options.drag.axis = options.axis;\n        }\n        else if (options.axis === null){\n          delete this.options.drag.axis;\n        }\n\n        return this;\n      }\n\n      if (isBool(options)){\n        this.options.drag.enabled = options;\n\n        return this;\n      }\n\n      return this.options.drag;\n    },\n\n    setPerAction: function(action, options){\n            // for all the default per-action options\n      for (var option in options){\n                // if this option exists for this action\n        if (option in defaultOptions[action]){\n                    // if the option in the options arg is an object value\n          if (isObject(options[option])){\n                        // duplicate the object\n            this.options[action][option] = extend(this.options[action][option] || {}, options[option]);\n\n            if (isObject(defaultOptions.perAction[option]) && 'enabled' in defaultOptions.perAction[option]){\n              this.options[action][option].enabled = options[option].enabled === false ? false : true;\n            }\n          }\n          else if (isBool(options[option]) && isObject(defaultOptions.perAction[option])){\n            this.options[action][option].enabled = options[option];\n          }\n                    else if (options[option] !== undefined){\n                        // or if it's not undefined, do a plain assignment\n                      this.options[action][option] = options[option];\n                    }\n        }\n      }\n    },\n\n        /* \\\n         * Interactable.dropzone\n         [ method ]\n         *\n         * Returns or sets whether elements can be dropped onto this\n         * Interactable to trigger drop events\n         *\n         * Dropzones can receive the following events:\n         *  - `dropactivate` and `dropdeactivate` when an acceptable drag starts and ends\n         *  - `dragenter` and `dragleave` when a draggable enters and leaves the dropzone\n         *  - `dragmove` when a draggable that has entered the dropzone is moved\n         *  - `drop` when a draggable is dropped into this dropzone\n         *\n         *  Use the `accept` option to allow only elements that match the given CSS selector or element.\n         *\n         *  Use the `overlap` option to set how drops are checked for. The allowed values are:\n         *   - `'pointer'`, the pointer must be over the dropzone (default)\n         *   - `'center'`, the draggable element's center must be over the dropzone\n         *   - a number from 0-1 which is the `(intersection area) / (draggable area)`.\n         *       e.g. `0.5` for drop to happen when half of the area of the\n         *       draggable is over the dropzone\n         *\n         - options (boolean | object | null) #optional The new value to be set.\n         | interact('.drop').dropzone({\n         |   accept: '.can-drop' || document.getElementById('single-drop'),\n         |   overlap: 'pointer' || 'center' || zeroToOne\n         | }\n         = (boolean | object) The current setting or this Interactable\n        \\*/\n    dropzone: function(options){\n      if (isObject(options)){\n        this.options.drop.enabled = options.enabled === false ? false : true;\n        this.setOnEvents('drop', options);\n\n        if (/^(pointer|center)$/.test(options.overlap)){\n          this.options.drop.overlap = options.overlap;\n        }\n        else if (isNumber(options.overlap)){\n          this.options.drop.overlap = Math.max(Math.min(1, options.overlap), 0);\n        }\n        if ('accept' in options){\n          this.options.drop.accept = options.accept;\n        }\n        if ('checker' in options){\n          this.options.drop.checker = options.checker;\n        }\n\n        return this;\n      }\n\n      if (isBool(options)){\n        this.options.drop.enabled = options;\n\n        return this;\n      }\n\n      return this.options.drop;\n    },\n\n    dropCheck: function(dragEvent, event, draggable, draggableElement, dropElement, rect){\n      var dropped = false;\n\n            // if the dropzone has no rect (eg. display: none)\n            // call the custom dropChecker or just return false\n      if (!(rect = rect || this.getRect(dropElement))){\n        return (this.options.drop.checker\n                    ? this.options.drop.checker(dragEvent, event, dropped, this, dropElement, draggable, draggableElement)\n                    : false);\n      }\n\n      var dropOverlap = this.options.drop.overlap;\n\n      if (dropOverlap === 'pointer'){\n        var page = getPageXY(dragEvent),\n          origin = getOriginXY(draggable, draggableElement),\n          horizontal,\n          vertical;\n\n        page.x += origin.x;\n        page.y += origin.y;\n\n        horizontal = (page.x > rect.left) && (page.x < rect.right);\n        vertical = (page.y > rect.top) && (page.y < rect.bottom);\n\n        dropped = horizontal && vertical;\n      }\n\n      var dragRect = draggable.getRect(draggableElement);\n\n      if (dropOverlap === 'center'){\n        var cx = dragRect.left + dragRect.width / 2,\n          cy = dragRect.top + dragRect.height / 2;\n\n        dropped = cx >= rect.left && cx <= rect.right && cy >= rect.top && cy <= rect.bottom;\n      }\n\n      if (isNumber(dropOverlap)){\n        var overlapArea = (Math.max(0, Math.min(rect.right, dragRect.right) - Math.max(rect.left, dragRect.left))\n                                  * Math.max(0, Math.min(rect.bottom, dragRect.bottom) - Math.max(rect.top, dragRect.top))),\n          overlapRatio = overlapArea / (dragRect.width * dragRect.height);\n\n        dropped = overlapRatio >= dropOverlap;\n      }\n\n      if (this.options.drop.checker){\n        dropped = this.options.drop.checker(dragEvent, event, dropped, this, dropElement, draggable, draggableElement);\n      }\n\n      return dropped;\n    },\n\n        /* \\\n         * Interactable.dropChecker\n         [ method ]\n         *\n         * DEPRECATED. Use interactable.dropzone({ checker: function... }) instead.\n         *\n         * Gets or sets the function used to check if a dragged element is\n         * over this Interactable.\n         *\n         - checker (function) #optional The function that will be called when checking for a drop\n         = (Function | Interactable) The checker function or this Interactable\n         *\n         * The checker function takes the following arguments:\n         *\n         - dragEvent (InteractEvent) The related dragmove or dragend event\n         - event (TouchEvent | PointerEvent | MouseEvent) The user move/up/end Event related to the dragEvent\n         - dropped (boolean) The value from the default drop checker\n         - dropzone (Interactable) The dropzone interactable\n         - dropElement (Element) The dropzone element\n         - draggable (Interactable) The Interactable being dragged\n         - draggableElement (Element) The actual element that's being dragged\n         *\n         > Usage:\n         | interact(target)\n         | .dropChecker(function(dragEvent,         // related dragmove or dragend event\n         |                       event,             // TouchEvent/PointerEvent/MouseEvent\n         |                       dropped,           // bool result of the default checker\n         |                       dropzone,          // dropzone Interactable\n         |                       dropElement,       // dropzone elemnt\n         |                       draggable,         // draggable Interactable\n         |                       draggableElement) {// draggable element\n         |\n         |   return dropped && event.target.hasAttribute('allow-drop');\n         | }\n        \\*/\n    dropChecker: function(checker){\n      if (isFunction(checker)){\n        this.options.drop.checker = checker;\n\n        return this;\n      }\n      if (checker === null){\n        delete this.options.getRect;\n\n        return this;\n      }\n\n      return this.options.drop.checker;\n    },\n\n        /* \\\n         * Interactable.accept\n         [ method ]\n         *\n         * Deprecated. add an `accept` property to the options object passed to\n         * @Interactable.dropzone instead.\n         *\n         * Gets or sets the Element or CSS selector match that this\n         * Interactable accepts if it is a dropzone.\n         *\n         - newValue (Element | string | null) #optional\n         * If it is an Element, then only that element can be dropped into this dropzone.\n         * If it is a string, the element being dragged must match it as a selector.\n         * If it is null, the accept options is cleared - it accepts any element.\n         *\n         = (string | Element | null | Interactable) The current accept option if given `undefined` or this Interactable\n        \\*/\n    accept: function(newValue){\n      if (isElement(newValue)){\n        this.options.drop.accept = newValue;\n\n        return this;\n      }\n\n            // test if it is a valid CSS selector\n      if (trySelector(newValue)){\n        this.options.drop.accept = newValue;\n\n        return this;\n      }\n\n      if (newValue === null){\n        delete this.options.drop.accept;\n\n        return this;\n      }\n\n      return this.options.drop.accept;\n    },\n\n        /* \\\n         * Interactable.resizable\n         [ method ]\n         *\n         * Gets or sets whether resize actions can be performed on the\n         * Interactable\n         *\n         = (boolean) Indicates if this can be the target of resize elements\n         | var isResizeable = interact('input[type=text]').resizable();\n         * or\n         - options (boolean | object) #optional true/false or An object with event listeners to be fired on resize events (object makes the Interactable resizable)\n         = (object) This Interactable\n         | interact(element).resizable({\n         |     onstart: function (event) {},\n         |     onmove : function (event) {},\n         |     onend  : function (event) {},\n         |\n         |     edges: {\n         |       top   : true,       // Use pointer coords to check for resize.\n         |       left  : false,      // Disable resizing from left edge.\n         |       bottom: '.resize-s',// Resize if pointer target matches selector\n         |       right : handleEl    // Resize if pointer target is the given Element\n         |     },\n         |\n         |     // Width and height can be adjusted independently. When `true`, width and\n         |     // height are adjusted at a 1:1 ratio.\n         |     square: false,\n         |\n         |     // Width and height can be adjusted independently. When `true`, width and\n         |     // height maintain the aspect ratio they had when resizing started.\n         |     preserveAspectRatio: false,\n         |\n         |     // a value of 'none' will limit the resize rect to a minimum of 0x0\n         |     // 'negate' will allow the rect to have negative width/height\n         |     // 'reposition' will keep the width/height positive by swapping\n         |     // the top and bottom edges and/or swapping the left and right edges\n         |     invert: 'none' || 'negate' || 'reposition'\n         |\n         |     // limit multiple resizes.\n         |     // See the explanation in the @Interactable.draggable example\n         |     max: Infinity,\n         |     maxPerElement: 1,\n         | });\n        \\*/\n    resizable: function(options){\n      if (isObject(options)){\n        this.options.resize.enabled = options.enabled === false ? false : true;\n        this.setPerAction('resize', options);\n        this.setOnEvents('resize', options);\n\n        if (/^x$|^y$|^xy$/.test(options.axis)){\n          this.options.resize.axis = options.axis;\n        }\n        else if (options.axis === null){\n          this.options.resize.axis = defaultOptions.resize.axis;\n        }\n\n        if (isBool(options.preserveAspectRatio)){\n          this.options.resize.preserveAspectRatio = options.preserveAspectRatio;\n        }\n        else if (isBool(options.square)){\n          this.options.resize.square = options.square;\n        }\n\n        return this;\n      }\n      if (isBool(options)){\n        this.options.resize.enabled = options;\n\n        return this;\n      }\n      return this.options.resize;\n    },\n\n        /* \\\n         * Interactable.squareResize\n         [ method ]\n         *\n         * Deprecated. Add a `square: true || false` property to @Interactable.resizable instead\n         *\n         * Gets or sets whether resizing is forced 1:1 aspect\n         *\n         = (boolean) Current setting\n         *\n         * or\n         *\n         - newValue (boolean) #optional\n         = (object) this Interactable\n        \\*/\n    squareResize: function(newValue){\n      if (isBool(newValue)){\n        this.options.resize.square = newValue;\n\n        return this;\n      }\n\n      if (newValue === null){\n        delete this.options.resize.square;\n\n        return this;\n      }\n\n      return this.options.resize.square;\n    },\n\n        /* \\\n         * Interactable.gesturable\n         [ method ]\n         *\n         * Gets or sets whether multitouch gestures can be performed on the\n         * Interactable's element\n         *\n         = (boolean) Indicates if this can be the target of gesture events\n         | var isGestureable = interact(element).gesturable();\n         * or\n         - options (boolean | object) #optional true/false or An object with event listeners to be fired on gesture events (makes the Interactable gesturable)\n         = (object) this Interactable\n         | interact(element).gesturable({\n         |     onstart: function (event) {},\n         |     onmove : function (event) {},\n         |     onend  : function (event) {},\n         |\n         |     // limit multiple gestures.\n         |     // See the explanation in @Interactable.draggable example\n         |     max: Infinity,\n         |     maxPerElement: 1,\n         | });\n        \\*/\n    gesturable: function(options){\n      if (isObject(options)){\n        this.options.gesture.enabled = options.enabled === false ? false : true;\n        this.setPerAction('gesture', options);\n        this.setOnEvents('gesture', options);\n\n        return this;\n      }\n\n      if (isBool(options)){\n        this.options.gesture.enabled = options;\n\n        return this;\n      }\n\n      return this.options.gesture;\n    },\n\n        /* \\\n         * Interactable.autoScroll\n         [ method ]\n         **\n         * Deprecated. Add an `autoscroll` property to the options object\n         * passed to @Interactable.draggable or @Interactable.resizable instead.\n         *\n         * Returns or sets whether dragging and resizing near the edges of the\n         * window/container trigger autoScroll for this Interactable\n         *\n         = (object) Object with autoScroll properties\n         *\n         * or\n         *\n         - options (object | boolean) #optional\n         * options can be:\n         * - an object with margin, distance and interval properties,\n         * - true or false to enable or disable autoScroll or\n         = (Interactable) this Interactable\n        \\*/\n    autoScroll: function(options){\n      if (isObject(options)){\n        options = extend({ actions: ['drag', 'resize']}, options);\n      }\n      else if (isBool(options)){\n        options = { actions: ['drag', 'resize'], enabled: options };\n      }\n\n      return this.setOptions('autoScroll', options);\n    },\n\n        /* \\\n         * Interactable.snap\n         [ method ]\n         **\n         * Deprecated. Add a `snap` property to the options object passed\n         * to @Interactable.draggable or @Interactable.resizable instead.\n         *\n         * Returns or sets if and how action coordinates are snapped. By\n         * default, snapping is relative to the pointer coordinates. You can\n         * change this by setting the\n         * [`elementOrigin`](https://github.com/taye/interact.js/pull/72).\n         **\n         = (boolean | object) `false` if snap is disabled; object with snap properties if snap is enabled\n         **\n         * or\n         **\n         - options (object | boolean | null) #optional\n         = (Interactable) this Interactable\n         > Usage\n         | interact(document.querySelector('#thing')).snap({\n         |     targets: [\n         |         // snap to this specific point\n         |         {\n         |             x: 100,\n         |             y: 100,\n         |             range: 25\n         |         },\n         |         // give this function the x and y page coords and snap to the object returned\n         |         function (x, y) {\n         |             return {\n         |                 x: x,\n         |                 y: (75 + 50 * Math.sin(x * 0.04)),\n         |                 range: 40\n         |             };\n         |         },\n         |         // create a function that snaps to a grid\n         |         interact.createSnapGrid({\n         |             x: 50,\n         |             y: 50,\n         |             range: 10,              // optional\n         |             offset: { x: 5, y: 10 } // optional\n         |         })\n         |     ],\n         |     // do not snap during normal movement.\n         |     // Instead, trigger only one snapped move event\n         |     // immediately before the end event.\n         |     endOnly: true,\n         |\n         |     relativePoints: [\n         |         { x: 0, y: 0 },  // snap relative to the top left of the element\n         |         { x: 1, y: 1 },  // and also to the bottom right\n         |     ],\n         |\n         |     // offset the snap target coordinates\n         |     // can be an object with x/y or 'startCoords'\n         |     offset: { x: 50, y: 50 }\n         |   }\n         | });\n        \\*/\n    snap: function(options){\n      var ret = this.setOptions('snap', options);\n\n      if (ret === this){ return this; }\n\n      return ret.drag;\n    },\n\n    setOptions: function(option, options){\n      var actions = options && isArray(options.actions)\n                    ? options.actions\n                    : ['drag'];\n\n      var i;\n\n      if (isObject(options) || isBool(options)){\n        for (i = 0; i < actions.length; i++){\n          var action = /resize/.test(actions[i]) ? 'resize' : actions[i];\n\n          if (!isObject(this.options[action])){ continue; }\n\n          var thisOption = this.options[action][option];\n\n          if (isObject(options)){\n            extend(thisOption, options);\n            thisOption.enabled = options.enabled === false ? false : true;\n\n            if (option === 'snap'){\n              if (thisOption.mode === 'grid'){\n                thisOption.targets = [\n                  interact.createSnapGrid(extend({\n                    offset: thisOption.gridOffset || { x: 0, y: 0 }\n                  }, thisOption.grid || {}))\n                ];\n              }\n              else if (thisOption.mode === 'anchor'){\n                thisOption.targets = thisOption.anchors;\n              }\n                            else if (thisOption.mode === 'path'){\n                              thisOption.targets = thisOption.paths;\n                            }\n\n              if ('elementOrigin' in options){\n                thisOption.relativePoints = [options.elementOrigin];\n              }\n            }\n          }\n          else if (isBool(options)){\n            thisOption.enabled = options;\n          }\n        }\n\n        return this;\n      }\n\n      var ret = {},\n        allActions = ['drag', 'resize', 'gesture'];\n\n      for (i = 0; i < allActions.length; i++){\n        if (option in defaultOptions[allActions[i]]){\n          ret[allActions[i]] = this.options[allActions[i]][option];\n        }\n      }\n\n      return ret;\n    },\n\n        /* \\\n         * Interactable.inertia\n         [ method ]\n         **\n         * Deprecated. Add an `inertia` property to the options object passed\n         * to @Interactable.draggable or @Interactable.resizable instead.\n         *\n         * Returns or sets if and how events continue to run after the pointer is released\n         **\n         = (boolean | object) `false` if inertia is disabled; `object` with inertia properties if inertia is enabled\n         **\n         * or\n         **\n         - options (object | boolean | null) #optional\n         = (Interactable) this Interactable\n         > Usage\n         | // enable and use default settings\n         | interact(element).inertia(true);\n         |\n         | // enable and use custom settings\n         | interact(element).inertia({\n         |     // value greater than 0\n         |     // high values slow the object down more quickly\n         |     resistance     : 16,\n         |\n         |     // the minimum launch speed (pixels per second) that results in inertia start\n         |     minSpeed       : 200,\n         |\n         |     // inertia will stop when the object slows down to this speed\n         |     endSpeed       : 20,\n         |\n         |     // boolean; should actions be resumed when the pointer goes down during inertia\n         |     allowResume    : true,\n         |\n         |     // boolean; should the jump when resuming from inertia be ignored in event.dx/dy\n         |     zeroResumeDelta: false,\n         |\n         |     // if snap/restrict are set to be endOnly and inertia is enabled, releasing\n         |     // the pointer without triggering inertia will animate from the release\n         |     // point to the snaped/restricted point in the given amount of time (ms)\n         |     smoothEndDuration: 300,\n         |\n         |     // an array of action types that can have inertia (no gesture)\n         |     actions        : ['drag', 'resize']\n         | });\n         |\n         | // reset custom settings and use all defaults\n         | interact(element).inertia(null);\n        \\*/\n    inertia: function(options){\n      var ret = this.setOptions('inertia', options);\n\n      if (ret === this){ return this; }\n\n      return ret.drag;\n    },\n\n    getAction: function(pointer, event, interaction, element){\n      var action = this.defaultActionChecker(pointer, interaction, element);\n\n      if (this.options.actionChecker){\n        return this.options.actionChecker(pointer, event, action, this, element, interaction);\n      }\n\n      return action;\n    },\n\n    defaultActionChecker: defaultActionChecker,\n\n        /* \\\n         * Interactable.actionChecker\n         [ method ]\n         *\n         * Gets or sets the function used to check action to be performed on\n         * pointerDown\n         *\n         - checker (function | null) #optional A function which takes a pointer event, defaultAction string, interactable, element and interaction as parameters and returns an object with name property 'drag' 'resize' or 'gesture' and optionally an `edges` object with boolean 'top', 'left', 'bottom' and right props.\n         = (Function | Interactable) The checker function or this Interactable\n         *\n         | interact('.resize-drag')\n         |   .resizable(true)\n         |   .draggable(true)\n         |   .actionChecker(function (pointer, event, action, interactable, element, interaction) {\n         |\n         |   if (interact.matchesSelector(event.target, '.drag-handle') {\n         |     // force drag with handle target\n         |     action.name = drag;\n         |   }\n         |   else {\n         |     // resize from the top and right edges\n         |     action.name  = 'resize';\n         |     action.edges = { top: true, right: true };\n         |   }\n         |\n         |   return action;\n         | });\n        \\*/\n    actionChecker: function(checker){\n      if (isFunction(checker)){\n        this.options.actionChecker = checker;\n\n        return this;\n      }\n\n      if (checker === null){\n        delete this.options.actionChecker;\n\n        return this;\n      }\n\n      return this.options.actionChecker;\n    },\n\n        /* \\\n         * Interactable.getRect\n         [ method ]\n         *\n         * The default function to get an Interactables bounding rect. Can be\n         * overridden using @Interactable.rectChecker.\n         *\n         - element (Element) #optional The element to measure.\n         = (object) The object's bounding rectangle.\n         o {\n         o     top   : 0,\n         o     left  : 0,\n         o     bottom: 0,\n         o     right : 0,\n         o     width : 0,\n         o     height: 0\n         o }\n        \\*/\n    getRect: function rectCheck(element){\n      element = element || this._element;\n\n      if (this.selector && !(isElement(element))){\n        element = this._context.querySelector(this.selector);\n      }\n\n      return getElementRect(element);\n    },\n\n        /* \\\n         * Interactable.rectChecker\n         [ method ]\n         *\n         * Returns or sets the function used to calculate the interactable's\n         * element's rectangle\n         *\n         - checker (function) #optional A function which returns this Interactable's bounding rectangle. See @Interactable.getRect\n         = (function | object) The checker function or this Interactable\n        \\*/\n    rectChecker: function(checker){\n      if (isFunction(checker)){\n        this.getRect = checker;\n\n        return this;\n      }\n\n      if (checker === null){\n        delete this.options.getRect;\n\n        return this;\n      }\n\n      return this.getRect;\n    },\n\n        /* \\\n         * Interactable.styleCursor\n         [ method ]\n         *\n         * Returns or sets whether the action that would be performed when the\n         * mouse on the element are checked on `mousemove` so that the cursor\n         * may be styled appropriately\n         *\n         - newValue (boolean) #optional\n         = (boolean | Interactable) The current setting or this Interactable\n        \\*/\n    styleCursor: function(newValue){\n      if (isBool(newValue)){\n        this.options.styleCursor = newValue;\n\n        return this;\n      }\n\n      if (newValue === null){\n        delete this.options.styleCursor;\n\n        return this;\n      }\n\n      return this.options.styleCursor;\n    },\n\n        /* \\\n         * Interactable.preventDefault\n         [ method ]\n         *\n         * Returns or sets whether to prevent the browser's default behaviour\n         * in response to pointer events. Can be set to:\n         *  - `'always'` to always prevent\n         *  - `'never'` to never prevent\n         *  - `'auto'` to let interact.js try to determine what would be best\n         *\n         - newValue (string) #optional `true`, `false` or `'auto'`\n         = (string | Interactable) The current setting or this Interactable\n        \\*/\n    preventDefault: function(newValue){\n      if (/^(always|never|auto)$/.test(newValue)){\n        this.options.preventDefault = newValue;\n        return this;\n      }\n\n      if (isBool(newValue)){\n        this.options.preventDefault = newValue ? 'always' : 'never';\n        return this;\n      }\n\n      return this.options.preventDefault;\n    },\n\n        /* \\\n         * Interactable.origin\n         [ method ]\n         *\n         * Gets or sets the origin of the Interactable's element.  The x and y\n         * of the origin will be subtracted from action event coordinates.\n         *\n         - origin (object | string) #optional An object eg. { x: 0, y: 0 } or string 'parent', 'self' or any CSS selector\n         * OR\n         - origin (Element) #optional An HTML or SVG Element whose rect will be used\n         **\n         = (object) The current origin or this Interactable\n        \\*/\n    origin: function(newValue){\n      if (trySelector(newValue)){\n        this.options.origin = newValue;\n        return this;\n      }\n      else if (isObject(newValue)){\n        this.options.origin = newValue;\n        return this;\n      }\n\n      return this.options.origin;\n    },\n\n        /* \\\n         * Interactable.deltaSource\n         [ method ]\n         *\n         * Returns or sets the mouse coordinate types used to calculate the\n         * movement of the pointer.\n         *\n         - newValue (string) #optional Use 'client' if you will be scrolling while interacting; Use 'page' if you want autoScroll to work\n         = (string | object) The current deltaSource or this Interactable\n        \\*/\n    deltaSource: function(newValue){\n      if (newValue === 'page' || newValue === 'client'){\n        this.options.deltaSource = newValue;\n\n        return this;\n      }\n\n      return this.options.deltaSource;\n    },\n\n        /* \\\n         * Interactable.restrict\n         [ method ]\n         **\n         * Deprecated. Add a `restrict` property to the options object passed to\n         * @Interactable.draggable, @Interactable.resizable or @Interactable.gesturable instead.\n         *\n         * Returns or sets the rectangles within which actions on this\n         * interactable (after snap calculations) are restricted. By default,\n         * restricting is relative to the pointer coordinates. You can change\n         * this by setting the\n         * [`elementRect`](https://github.com/taye/interact.js/pull/72).\n         **\n         - options (object) #optional an object with keys drag, resize, and/or gesture whose values are rects, Elements, CSS selectors, or 'parent' or 'self'\n         = (object) The current restrictions object or this Interactable\n         **\n         | interact(element).restrict({\n         |     // the rect will be `interact.getElementRect(element.parentNode)`\n         |     drag: element.parentNode,\n         |\n         |     // x and y are relative to the the interactable's origin\n         |     resize: { x: 100, y: 100, width: 200, height: 200 }\n         | })\n         |\n         | interact('.draggable').restrict({\n         |     // the rect will be the selected element's parent\n         |     drag: 'parent',\n         |\n         |     // do not restrict during normal movement.\n         |     // Instead, trigger only one restricted move event\n         |     // immediately before the end event.\n         |     endOnly: true,\n         |\n         |     // https://github.com/taye/interact.js/pull/72#issue-41813493\n         |     elementRect: { top: 0, left: 0, bottom: 1, right: 1 }\n         | });\n        \\*/\n    restrict: function(options){\n      if (!isObject(options)){\n        return this.setOptions('restrict', options);\n      }\n\n      var actions = ['drag', 'resize', 'gesture'],\n        ret;\n\n      for (var i = 0; i < actions.length; i++){\n        var action = actions[i];\n\n        if (action in options){\n          var perAction = extend({\n            actions: [action],\n            restriction: options[action]\n          }, options);\n\n          ret = this.setOptions('restrict', perAction);\n        }\n      }\n\n      return ret;\n    },\n\n        /* \\\n         * Interactable.context\n         [ method ]\n         *\n         * Gets the selector context Node of the Interactable. The default is `window.document`.\n         *\n         = (Node) The context Node of this Interactable\n         **\n        \\*/\n    context: function(){\n      return this._context;\n    },\n\n    _context: document,\n\n        /* \\\n         * Interactable.ignoreFrom\n         [ method ]\n         *\n         * If the target of the `mousedown`, `pointerdown` or `touchstart`\n         * event or any of it's parents match the given CSS selector or\n         * Element, no drag/resize/gesture is started.\n         *\n         - newValue (string | Element | null) #optional a CSS selector string, an Element or `null` to not ignore any elements\n         = (string | Element | object) The current ignoreFrom value or this Interactable\n         **\n         | interact(element, { ignoreFrom: document.getElementById('no-action') });\n         | // or\n         | interact(element).ignoreFrom('input, textarea, a');\n        \\*/\n    ignoreFrom: function(newValue){\n      if (trySelector(newValue)){            // CSS selector to match event.target\n        this.options.ignoreFrom = newValue;\n        return this;\n      }\n\n      if (isElement(newValue)){              // specific element\n        this.options.ignoreFrom = newValue;\n        return this;\n      }\n\n      return this.options.ignoreFrom;\n    },\n\n        /* \\\n         * Interactable.allowFrom\n         [ method ]\n         *\n         * A drag/resize/gesture is started only If the target of the\n         * `mousedown`, `pointerdown` or `touchstart` event or any of it's\n         * parents match the given CSS selector or Element.\n         *\n         - newValue (string | Element | null) #optional a CSS selector string, an Element or `null` to allow from any element\n         = (string | Element | object) The current allowFrom value or this Interactable\n         **\n         | interact(element, { allowFrom: document.getElementById('drag-handle') });\n         | // or\n         | interact(element).allowFrom('.handle');\n        \\*/\n    allowFrom: function(newValue){\n      if (trySelector(newValue)){            // CSS selector to match event.target\n        this.options.allowFrom = newValue;\n        return this;\n      }\n\n      if (isElement(newValue)){              // specific element\n        this.options.allowFrom = newValue;\n        return this;\n      }\n\n      return this.options.allowFrom;\n    },\n\n        /* \\\n         * Interactable.element\n         [ method ]\n         *\n         * If this is not a selector Interactable, it returns the element this\n         * interactable represents\n         *\n         = (Element) HTML / SVG Element\n        \\*/\n    element: function(){\n      return this._element;\n    },\n\n        /* \\\n         * Interactable.fire\n         [ method ]\n         *\n         * Calls listeners for the given InteractEvent type bound globally\n         * and directly to this Interactable\n         *\n         - iEvent (InteractEvent) The InteractEvent object to be fired on this Interactable\n         = (Interactable) this Interactable\n        \\*/\n    fire: function(iEvent){\n      if (!(iEvent && iEvent.type) || !contains(eventTypes, iEvent.type)){\n        return this;\n      }\n\n      var listeners,\n        i,\n        len,\n        onEvent = 'on' + iEvent.type,\n        funcName = '';\n\n            // Interactable#on() listeners\n      if (iEvent.type in this._iEvents){\n        listeners = this._iEvents[iEvent.type];\n\n        for (i = 0, len = listeners.length; i < len && !iEvent.immediatePropagationStopped; i++){\n          funcName = listeners[i].name;\n          listeners[i](iEvent);\n        }\n      }\n\n            // interactable.onevent listener\n      if (isFunction(this[onEvent])){\n        funcName = this[onEvent].name;\n        this[onEvent](iEvent);\n      }\n\n            // interact.on() listeners\n      if (iEvent.type in globalEvents && (listeners = globalEvents[iEvent.type])){\n        for (i = 0, len = listeners.length; i < len && !iEvent.immediatePropagationStopped; i++){\n          funcName = listeners[i].name;\n          listeners[i](iEvent);\n        }\n      }\n\n      return this;\n    },\n\n        /* \\\n         * Interactable.on\n         [ method ]\n         *\n         * Binds a listener for an InteractEvent or DOM event.\n         *\n         - eventType  (string | array | object) The types of events to listen for\n         - listener   (function) The function to be called on the given event(s)\n         - useCapture (boolean) #optional useCapture flag for addEventListener\n         = (object) This Interactable\n        \\*/\n    on: function(eventType, listener, useCapture){\n      var i;\n\n      if (isString(eventType) && eventType.search(' ') !== -1){\n        eventType = eventType.trim().split(/ +/);\n      }\n\n      if (isArray(eventType)){\n        for (i = 0; i < eventType.length; i++){\n          this.on(eventType[i], listener, useCapture);\n        }\n\n        return this;\n      }\n\n      if (isObject(eventType)){\n        for (var prop in eventType){\n          this.on(prop, eventType[prop], listener);\n        }\n\n        return this;\n      }\n\n      if (eventType === 'wheel'){\n        eventType = wheelEvent;\n      }\n\n            // convert to boolean\n      useCapture = useCapture ? true : false;\n\n      if (contains(eventTypes, eventType)){\n                // if this type of event was never bound to this Interactable\n        if (!(eventType in this._iEvents)){\n          this._iEvents[eventType] = [listener];\n        }\n        else {\n          this._iEvents[eventType].push(listener);\n        }\n      }\n            // delegated event for selector\n      else if (this.selector){\n        if (!delegatedEvents[eventType]){\n          delegatedEvents[eventType] = {\n            selectors: [],\n            contexts: [],\n            listeners: []\n          };\n\n                    // add delegate listener functions\n          for (i = 0; i < documents.length; i++){\n            events.add(documents[i], eventType, delegateListener);\n            events.add(documents[i], eventType, delegateUseCapture, true);\n          }\n        }\n\n        var delegated = delegatedEvents[eventType],\n          index;\n\n        for (index = delegated.selectors.length - 1; index >= 0; index--){\n          if (delegated.selectors[index] === this.selector\n                        && delegated.contexts[index] === this._context){\n            break;\n          }\n        }\n\n        if (index === -1){\n          index = delegated.selectors.length;\n\n          delegated.selectors.push(this.selector);\n          delegated.contexts.push(this._context);\n          delegated.listeners.push([]);\n        }\n\n                // keep listener and useCapture flag\n        delegated.listeners[index].push([listener, useCapture]);\n      }\n            else {\n        events.add(this._element, eventType, listener, useCapture);\n      }\n\n      return this;\n    },\n\n        /* \\\n         * Interactable.off\n         [ method ]\n         *\n         * Removes an InteractEvent or DOM event listener\n         *\n         - eventType  (string | array | object) The types of events that were listened for\n         - listener   (function) The listener function to be removed\n         - useCapture (boolean) #optional useCapture flag for removeEventListener\n         = (object) This Interactable\n        \\*/\n    off: function(eventType, listener, useCapture){\n      var i;\n\n      if (isString(eventType) && eventType.search(' ') !== -1){\n        eventType = eventType.trim().split(/ +/);\n      }\n\n      if (isArray(eventType)){\n        for (i = 0; i < eventType.length; i++){\n          this.off(eventType[i], listener, useCapture);\n        }\n\n        return this;\n      }\n\n      if (isObject(eventType)){\n        for (var prop in eventType){\n          this.off(prop, eventType[prop], listener);\n        }\n\n        return this;\n      }\n\n      var eventList,\n        index = -1;\n\n            // convert to boolean\n      useCapture = useCapture ? true : false;\n\n      if (eventType === 'wheel'){\n        eventType = wheelEvent;\n      }\n\n            // if it is an action event type\n      if (contains(eventTypes, eventType)){\n        eventList = this._iEvents[eventType];\n\n        if (eventList && (index = indexOf(eventList, listener)) !== -1){\n          this._iEvents[eventType].splice(index, 1);\n        }\n      }\n            // delegated event\n      else if (this.selector){\n        var delegated = delegatedEvents[eventType],\n          matchFound = false;\n\n        if (!delegated){ return this; }\n\n                // count from last index of delegated to 0\n        for (index = delegated.selectors.length - 1; index >= 0; index--){\n                    // look for matching selector and context Node\n          if (delegated.selectors[index] === this.selector\n                        && delegated.contexts[index] === this._context){\n            var listeners = delegated.listeners[index];\n\n                        // each item of the listeners array is an array: [function, useCaptureFlag]\n            for (i = listeners.length - 1; i >= 0; i--){\n              var fn = listeners[i][0],\n                useCap = listeners[i][1];\n\n                            // check if the listener functions and useCapture flags match\n              if (fn === listener && useCap === useCapture){\n                                // remove the listener from the array of listeners\n                listeners.splice(i, 1);\n\n                                // if all listeners for this interactable have been removed\n                                // remove the interactable from the delegated arrays\n                if (!listeners.length){\n                  delegated.selectors.splice(index, 1);\n                  delegated.contexts.splice(index, 1);\n                  delegated.listeners.splice(index, 1);\n\n                                    // remove delegate function from context\n                  events.remove(this._context, eventType, delegateListener);\n                  events.remove(this._context, eventType, delegateUseCapture, true);\n\n                                    // remove the arrays if they are empty\n                  if (!delegated.selectors.length){\n                    delegatedEvents[eventType] = null;\n                  }\n                }\n\n                                // only remove one listener\n                matchFound = true;\n                break;\n              }\n            }\n\n            if (matchFound){ break; }\n          }\n        }\n      }\n            // remove listener from this Interatable's element\n            else {\n        events.remove(this._element, eventType, listener, useCapture);\n      }\n\n      return this;\n    },\n\n        /* \\\n         * Interactable.set\n         [ method ]\n         *\n         * Reset the options of this Interactable\n         - options (object) The new settings to apply\n         = (object) This Interactable\n        \\*/\n    set: function(options){\n      if (!isObject(options)){\n        options = {};\n      }\n\n      this.options = extend({}, defaultOptions.base);\n\n      var i,\n        actions = ['drag', 'drop', 'resize', 'gesture'],\n        methods = ['draggable', 'dropzone', 'resizable', 'gesturable'],\n        perActions = extend(extend({}, defaultOptions.perAction), options[action] || {});\n\n      for (i = 0; i < actions.length; i++){\n        var action = actions[i];\n\n        this.options[action] = extend({}, defaultOptions[action]);\n\n        this.setPerAction(action, perActions);\n\n        this[methods[i]](options[action]);\n      }\n\n      var settings = [\n        'accept', 'actionChecker', 'allowFrom', 'deltaSource',\n        'dropChecker', 'ignoreFrom', 'origin', 'preventDefault',\n        'rectChecker', 'styleCursor'\n      ];\n\n      for (i = 0, len = settings.length; i < len; i++){\n        var setting = settings[i];\n\n        this.options[setting] = defaultOptions.base[setting];\n\n        if (setting in options){\n          this[setting](options[setting]);\n        }\n      }\n\n      return this;\n    },\n\n        /* \\\n         * Interactable.unset\n         [ method ]\n         *\n         * Remove this interactable from the list of interactables and remove\n         * it's drag, drop, resize and gesture capabilities\n         *\n         = (object) @interact\n        \\*/\n    unset: function(){\n      events.remove(this._element, 'all');\n\n      if (!isString(this.selector)){\n        events.remove(this, 'all');\n        if (this.options.styleCursor){\n          this._element.style.cursor = '';\n        }\n      }\n      else {\n                // remove delegated events\n        for (var type in delegatedEvents){\n          var delegated = delegatedEvents[type];\n\n          for (var i = 0; i < delegated.selectors.length; i++){\n            if (delegated.selectors[i] === this.selector\n                            && delegated.contexts[i] === this._context){\n              delegated.selectors.splice(i, 1);\n              delegated.contexts.splice(i, 1);\n              delegated.listeners.splice(i, 1);\n\n                            // remove the arrays if they are empty\n              if (!delegated.selectors.length){\n                delegatedEvents[type] = null;\n              }\n            }\n\n            events.remove(this._context, type, delegateListener);\n            events.remove(this._context, type, delegateUseCapture, true);\n\n            break;\n          }\n        }\n      }\n\n      this.dropzone(false);\n\n      interactables.splice(indexOf(interactables, this), 1);\n\n      return interact;\n    }\n  };\n\n  function warnOnce(method, message){\n    var warned = false;\n\n    return function(){\n      if (!warned){\n        window.console.warn(message);\n        warned = true;\n      }\n\n      return method.apply(this, arguments);\n    };\n  }\n\n  Interactable.prototype.snap = warnOnce(Interactable.prototype.snap,\n         'Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping');\n  Interactable.prototype.restrict = warnOnce(Interactable.prototype.restrict,\n         'Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction');\n  Interactable.prototype.inertia = warnOnce(Interactable.prototype.inertia,\n         'Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia');\n  Interactable.prototype.autoScroll = warnOnce(Interactable.prototype.autoScroll,\n         'Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll');\n  Interactable.prototype.squareResize = warnOnce(Interactable.prototype.squareResize,\n         'Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square');\n\n  Interactable.prototype.accept = warnOnce(Interactable.prototype.accept,\n         'Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead');\n  Interactable.prototype.dropChecker = warnOnce(Interactable.prototype.dropChecker,\n         'Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead');\n  Interactable.prototype.context = warnOnce(Interactable.prototype.context,\n         'Interactable#context as a method is deprecated. It will soon be a DOM Node instead');\n\n    /* \\\n     * interact.isSet\n     [ method ]\n     *\n     * Check if an element has been set\n     - element (Element) The Element being searched for\n     = (boolean) Indicates if the element or CSS selector was previously passed to interact\n    \\*/\n  interact.isSet = function(element, options){\n    return interactables.indexOfElement(element, options && options.context) !== -1;\n  };\n\n    /* \\\n     * interact.on\n     [ method ]\n     *\n     * Adds a global listener for an InteractEvent or adds a DOM event to\n     * `document`\n     *\n     - type       (string | array | object) The types of events to listen for\n     - listener   (function) The function to be called on the given event(s)\n     - useCapture (boolean) #optional useCapture flag for addEventListener\n     = (object) interact\n    \\*/\n  interact.on = function(type, listener, useCapture){\n    if (isString(type) && type.search(' ') !== -1){\n      type = type.trim().split(/ +/);\n    }\n\n    if (isArray(type)){\n      for (var i = 0; i < type.length; i++){\n        interact.on(type[i], listener, useCapture);\n      }\n\n      return interact;\n    }\n\n    if (isObject(type)){\n      for (var prop in type){\n        interact.on(prop, type[prop], listener);\n      }\n\n      return interact;\n    }\n\n        // if it is an InteractEvent type, add listener to globalEvents\n    if (contains(eventTypes, type)){\n            // if this type of event was never bound\n      if (!globalEvents[type]){\n        globalEvents[type] = [listener];\n      }\n      else {\n        globalEvents[type].push(listener);\n      }\n    }\n        // If non InteractEvent type, addEventListener to document\n    else {\n      events.add(document, type, listener, useCapture);\n    }\n\n    return interact;\n  };\n\n    /* \\\n     * interact.off\n     [ method ]\n     *\n     * Removes a global InteractEvent listener or DOM event from `document`\n     *\n     - type       (string | array | object) The types of events that were listened for\n     - listener   (function) The listener function to be removed\n     - useCapture (boolean) #optional useCapture flag for removeEventListener\n     = (object) interact\n     \\*/\n  interact.off = function(type, listener, useCapture){\n    if (isString(type) && type.search(' ') !== -1){\n      type = type.trim().split(/ +/);\n    }\n\n    if (isArray(type)){\n      for (var i = 0; i < type.length; i++){\n        interact.off(type[i], listener, useCapture);\n      }\n\n      return interact;\n    }\n\n    if (isObject(type)){\n      for (var prop in type){\n        interact.off(prop, type[prop], listener);\n      }\n\n      return interact;\n    }\n\n    if (!contains(eventTypes, type)){\n      events.remove(document, type, listener, useCapture);\n    }\n    else {\n      var index;\n\n      if (type in globalEvents\n                && (index = indexOf(globalEvents[type], listener)) !== -1){\n        globalEvents[type].splice(index, 1);\n      }\n    }\n\n    return interact;\n  };\n\n    /* \\\n     * interact.enableDragging\n     [ method ]\n     *\n     * Deprecated.\n     *\n     * Returns or sets whether dragging is enabled for any Interactables\n     *\n     - newValue (boolean) #optional `true` to allow the action; `false` to disable action for all Interactables\n     = (boolean | object) The current setting or interact\n    \\*/\n  interact.enableDragging = warnOnce(function(newValue){\n    if (newValue !== null && newValue !== undefined){\n      actionIsEnabled.drag = newValue;\n\n      return interact;\n    }\n    return actionIsEnabled.drag;\n  }, 'interact.enableDragging is deprecated and will soon be removed.');\n\n    /* \\\n     * interact.enableResizing\n     [ method ]\n     *\n     * Deprecated.\n     *\n     * Returns or sets whether resizing is enabled for any Interactables\n     *\n     - newValue (boolean) #optional `true` to allow the action; `false` to disable action for all Interactables\n     = (boolean | object) The current setting or interact\n    \\*/\n  interact.enableResizing = warnOnce(function(newValue){\n    if (newValue !== null && newValue !== undefined){\n      actionIsEnabled.resize = newValue;\n\n      return interact;\n    }\n    return actionIsEnabled.resize;\n  }, 'interact.enableResizing is deprecated and will soon be removed.');\n\n    /* \\\n     * interact.enableGesturing\n     [ method ]\n     *\n     * Deprecated.\n     *\n     * Returns or sets whether gesturing is enabled for any Interactables\n     *\n     - newValue (boolean) #optional `true` to allow the action; `false` to disable action for all Interactables\n     = (boolean | object) The current setting or interact\n    \\*/\n  interact.enableGesturing = warnOnce(function(newValue){\n    if (newValue !== null && newValue !== undefined){\n      actionIsEnabled.gesture = newValue;\n\n      return interact;\n    }\n    return actionIsEnabled.gesture;\n  }, 'interact.enableGesturing is deprecated and will soon be removed.');\n\n  interact.eventTypes = eventTypes;\n\n    /* \\\n     * interact.debug\n     [ method ]\n     *\n     * Returns debugging data\n     = (object) An object with properties that outline the current state and expose internal functions and variables\n    \\*/\n  interact.debug = function(){\n    var interaction = interactions[0] || new Interaction();\n\n    return {\n      interactions: interactions,\n      target: interaction.target,\n      dragging: interaction.dragging,\n      resizing: interaction.resizing,\n      gesturing: interaction.gesturing,\n      prepared: interaction.prepared,\n      matches: interaction.matches,\n      matchElements: interaction.matchElements,\n\n      prevCoords: interaction.prevCoords,\n      startCoords: interaction.startCoords,\n\n      pointerIds: interaction.pointerIds,\n      pointers: interaction.pointers,\n      addPointer: listeners.addPointer,\n      removePointer: listeners.removePointer,\n      recordPointer: listeners.recordPointer,\n\n      snap: interaction.snapStatus,\n      restrict: interaction.restrictStatus,\n      inertia: interaction.inertiaStatus,\n\n      downTime: interaction.downTimes[0],\n      downEvent: interaction.downEvent,\n      downPointer: interaction.downPointer,\n      prevEvent: interaction.prevEvent,\n\n      Interactable: Interactable,\n      interactables: interactables,\n      pointerIsDown: interaction.pointerIsDown,\n      defaultOptions: defaultOptions,\n      defaultActionChecker: defaultActionChecker,\n\n      actionCursors: actionCursors,\n      dragMove: listeners.dragMove,\n      resizeMove: listeners.resizeMove,\n      gestureMove: listeners.gestureMove,\n      pointerUp: listeners.pointerUp,\n      pointerDown: listeners.pointerDown,\n      pointerMove: listeners.pointerMove,\n      pointerHover: listeners.pointerHover,\n\n      eventTypes: eventTypes,\n\n      events: events,\n      globalEvents: globalEvents,\n      delegatedEvents: delegatedEvents,\n\n      prefixedPropREs: prefixedPropREs\n    };\n  };\n\n    // expose the functions used to calculate multi-touch properties\n  interact.getPointerAverage = pointerAverage;\n  interact.getTouchBBox = touchBBox;\n  interact.getTouchDistance = touchDistance;\n  interact.getTouchAngle = touchAngle;\n\n  interact.getElementRect = getElementRect;\n  interact.getElementClientRect = getElementClientRect;\n  interact.matchesSelector = matchesSelector;\n  interact.closest = closest;\n\n    /* \\\n     * interact.margin\n     [ method ]\n     *\n     * Deprecated. Use `interact(target).resizable({ margin: number });` instead.\n     * Returns or sets the margin for autocheck resizing used in\n     * @Interactable.getAction. That is the distance from the bottom and right\n     * edges of an element clicking in which will start resizing\n     *\n     - newValue (number) #optional\n     = (number | interact) The current margin value or interact\n    \\*/\n  interact.margin = warnOnce(function(newvalue){\n    if (isNumber(newvalue)){\n      margin = newvalue;\n\n      return interact;\n    }\n    return margin;\n  },\n    'interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead.');\n\n    /* \\\n     * interact.supportsTouch\n     [ method ]\n     *\n     = (boolean) Whether or not the browser supports touch input\n    \\*/\n  interact.supportsTouch = function(){\n    return supportsTouch;\n  };\n\n    /* \\\n     * interact.supportsPointerEvent\n     [ method ]\n     *\n     = (boolean) Whether or not the browser supports PointerEvents\n    \\*/\n  interact.supportsPointerEvent = function(){\n    return supportsPointerEvent;\n  };\n\n    /* \\\n     * interact.stop\n     [ method ]\n     *\n     * Cancels all interactions (end events are not fired)\n     *\n     - event (Event) An event on which to call preventDefault()\n     = (object) interact\n    \\*/\n  interact.stop = function(event){\n    for (var i = interactions.length - 1; i >= 0; i--){\n      interactions[i].stop(event);\n    }\n\n    return interact;\n  };\n\n    /* \\\n     * interact.dynamicDrop\n     [ method ]\n     *\n     * Returns or sets whether the dimensions of dropzone elements are\n     * calculated on every dragmove or only on dragstart for the default\n     * dropChecker\n     *\n     - newValue (boolean) #optional True to check on each move. False to check only before start\n     = (boolean | interact) The current setting or interact\n    \\*/\n  interact.dynamicDrop = function(newValue){\n    if (isBool(newValue)){\n            // if (dragging && dynamicDrop !== newValue && !newValue) {\n                // calcRects(dropzones);\n            // }\n\n      dynamicDrop = newValue;\n\n      return interact;\n    }\n    return dynamicDrop;\n  };\n\n    /* \\\n     * interact.pointerMoveTolerance\n     [ method ]\n     * Returns or sets the distance the pointer must be moved before an action\n     * sequence occurs. This also affects tolerance for tap events.\n     *\n     - newValue (number) #optional The movement from the start position must be greater than this value\n     = (number | Interactable) The current setting or interact\n    \\*/\n  interact.pointerMoveTolerance = function(newValue){\n    if (isNumber(newValue)){\n      pointerMoveTolerance = newValue;\n\n      return this;\n    }\n\n    return pointerMoveTolerance;\n  };\n\n    /* \\\n     * interact.maxInteractions\n     [ method ]\n     **\n     * Returns or sets the maximum number of concurrent interactions allowed.\n     * By default only 1 interaction is allowed at a time (for backwards\n     * compatibility). To allow multiple interactions on the same Interactables\n     * and elements, you need to enable it in the draggable, resizable and\n     * gesturable `'max'` and `'maxPerElement'` options.\n     **\n     - newValue (number) #optional Any number. newValue <= 0 means no interactions.\n    \\*/\n  interact.maxInteractions = function(newValue){\n    if (isNumber(newValue)){\n      maxInteractions = newValue;\n\n      return this;\n    }\n\n    return maxInteractions;\n  };\n\n  interact.createSnapGrid = function(grid){\n    return function(x, y){\n      var offsetX = 0,\n        offsetY = 0;\n\n      if (isObject(grid.offset)){\n        offsetX = grid.offset.x;\n        offsetY = grid.offset.y;\n      }\n\n      var gridx = Math.round((x - offsetX) / grid.x),\n        gridy = Math.round((y - offsetY) / grid.y),\n\n        newX = gridx * grid.x + offsetX,\n        newY = gridy * grid.y + offsetY;\n\n      return {\n        x: newX,\n        y: newY,\n        range: grid.range\n      };\n    };\n  };\n\n  function endAllInteractions(event){\n    for (var i = 0; i < interactions.length; i++){\n      interactions[i].pointerEnd(event, event);\n    }\n  }\n\n  function listenToDocument(doc){\n    if (contains(documents, doc)){ return; }\n\n    var win = doc.defaultView || doc.parentWindow;\n\n        // add delegate event listener\n    for (var eventType in delegatedEvents){\n      events.add(doc, eventType, delegateListener);\n      events.add(doc, eventType, delegateUseCapture, true);\n    }\n\n    if (PointerEvent){\n      if (PointerEvent === win.MSPointerEvent){\n        pEventTypes = {\n          up: 'MSPointerUp', down: 'MSPointerDown', over: 'mouseover',\n          out: 'mouseout', move: 'MSPointerMove', cancel: 'MSPointerCancel' };\n      }\n      else {\n        pEventTypes = {\n          up: 'pointerup', down: 'pointerdown', over: 'pointerover',\n          out: 'pointerout', move: 'pointermove', cancel: 'pointercancel' };\n      }\n\n      events.add(doc, pEventTypes.down, listeners.selectorDown);\n      events.add(doc, pEventTypes.move, listeners.pointerMove);\n      events.add(doc, pEventTypes.over, listeners.pointerOver);\n      events.add(doc, pEventTypes.out, listeners.pointerOut);\n      events.add(doc, pEventTypes.up, listeners.pointerUp);\n      events.add(doc, pEventTypes.cancel, listeners.pointerCancel);\n\n            // autoscroll\n      events.add(doc, pEventTypes.move, listeners.autoScrollMove);\n    }\n    else {\n      events.add(doc, 'mousedown', listeners.selectorDown);\n      events.add(doc, 'mousemove', listeners.pointerMove);\n      events.add(doc, 'mouseup', listeners.pointerUp);\n      events.add(doc, 'mouseover', listeners.pointerOver);\n      events.add(doc, 'mouseout', listeners.pointerOut);\n\n      events.add(doc, 'touchstart', listeners.selectorDown);\n      events.add(doc, 'touchmove', listeners.pointerMove);\n      events.add(doc, 'touchend', listeners.pointerUp);\n      events.add(doc, 'touchcancel', listeners.pointerCancel);\n\n            // autoscroll\n      events.add(doc, 'mousemove', listeners.autoScrollMove);\n      events.add(doc, 'touchmove', listeners.autoScrollMove);\n    }\n\n    events.add(win, 'blur', endAllInteractions);\n\n    try {\n      if (win.frameElement){\n        var parentDoc = win.frameElement.ownerDocument,\n          parentWindow = parentDoc.defaultView;\n\n        events.add(parentDoc, 'mouseup', listeners.pointerEnd);\n        events.add(parentDoc, 'touchend', listeners.pointerEnd);\n        events.add(parentDoc, 'touchcancel', listeners.pointerEnd);\n        events.add(parentDoc, 'pointerup', listeners.pointerEnd);\n        events.add(parentDoc, 'MSPointerUp', listeners.pointerEnd);\n        events.add(parentWindow, 'blur', endAllInteractions);\n      }\n    }\n        catch (error){\n          interact.windowParentError = error;\n        }\n\n        // prevent native HTML5 drag on interact.js target elements\n    events.add(doc, 'dragstart', function(event){\n      for (var i = 0; i < interactions.length; i++){\n        var interaction = interactions[i];\n\n        if (interaction.element\n                    && (interaction.element === event.target\n                        || nodeContains(interaction.element, event.target))){\n          interaction.checkAndPreventDefault(event, interaction.target, interaction.element);\n          return;\n        }\n      }\n    });\n\n    if (events.useAttachEvent){\n            // For IE's lack of Event#preventDefault\n      events.add(doc, 'selectstart', function(event){\n        var interaction = interactions[0];\n\n        if (interaction.currentAction()){\n          interaction.checkAndPreventDefault(event);\n        }\n      });\n\n            // For IE's bad dblclick event sequence\n      events.add(doc, 'dblclick', doOnInteractions('ie8Dblclick'));\n    }\n\n    documents.push(doc);\n  }\n\n  listenToDocument(document);\n\n  function indexOf(array, target){\n    for (var i = 0, len = array.length; i < len; i++){\n      if (array[i] === target){\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  function contains(array, target){\n    return indexOf(array, target) !== -1;\n  }\n\n  function matchesSelector(element, selector, nodeList){\n    if (ie8MatchesSelector){\n      return ie8MatchesSelector(element, selector, nodeList);\n    }\n\n        // remove /deep/ from selectors if shadowDOM polyfill is used\n    if (window !== realWindow){\n      selector = selector.replace(/\\/deep\\//g, ' ');\n    }\n\n    return element[prefixedMatchesSelector](selector);\n  }\n\n  function matchesUpTo(element, selector, limit){\n    while (isElement(element)){\n      if (matchesSelector(element, selector)){\n        return true;\n      }\n\n      element = parentElement(element);\n\n      if (element === limit){\n        return matchesSelector(element, selector);\n      }\n    }\n\n    return false;\n  }\n\n    // For IE8's lack of an Element#matchesSelector\n    // taken from http://tanalin.com/en/blog/2012/12/matches-selector-ie8/ and modified\n  if (!(prefixedMatchesSelector in Element.prototype) || !isFunction(Element.prototype[prefixedMatchesSelector])){\n    ie8MatchesSelector = function(element, selector, elems){\n      elems = elems || element.parentNode.querySelectorAll(selector);\n\n      for (var i = 0, len = elems.length; i < len; i++){\n        if (elems[i] === element){\n          return true;\n        }\n      }\n\n      return false;\n    };\n  }\n\n    // requestAnimationFrame polyfill\n  (function(){\n    var lastTime = 0,\n      vendors = ['ms', 'moz', 'webkit', 'o'];\n\n    for (var x = 0; x < vendors.length && !realWindow.requestAnimationFrame; ++x){\n      reqFrame = realWindow[vendors[x] + 'RequestAnimationFrame'];\n      cancelFrame = realWindow[vendors[x] + 'CancelAnimationFrame'] || realWindow[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n\n    if (!reqFrame){\n      reqFrame = function(callback){\n        var currTime = new Date().getTime(),\n          timeToCall = Math.max(0, 16 - (currTime - lastTime)),\n          id = setTimeout(function(){ callback(currTime + timeToCall); },\n                  timeToCall);\n        lastTime = currTime + timeToCall;\n        return id;\n      };\n    }\n\n    if (!cancelFrame){\n      cancelFrame = function(id){\n        clearTimeout(id);\n      };\n    }\n  }());\n\n    /* global exports: true, module, define */\n\n    // http://documentcloud.github.io/underscore/docs/underscore.html#section-11\n  if (typeof exports !== 'undefined'){\n    if (typeof module !== 'undefined' && module.exports){\n      exports = module.exports = interact;\n    }\n    exports.interact = interact;\n  }\n    // AMD\n  else if (typeof define === 'function' && define.amd){\n    define('interact', function(){\n      return interact;\n    });\n  }\n    else {\n    realWindow.interact = interact;\n  }\n}(typeof window === 'undefined' ? undefined : window));\n\n\n\n// WEBPACK FOOTER //\n// ../src/interact.js","export AutoTooltips from './slick.autotooltips';\nexport CellCopyManager from './slick.cellcopymanager';\nexport CellRangeDecorator from './slick.cellrangedecorator';\nexport CellRangeSelector from './slick.cellrangeselector';\nexport CellSelectionModel from './slick.cellselectionmodel';\nexport CheckboxSelectColum from './slick.checkboxselectcolumn';\nexport HeaderButtons from './slick.headerbuttons';\nexport HeaderMenu from './slick.headermenu';\nexport RowMoveManager from './slick.rowmovemanager';\nexport RowSelectionModel from './slick.rowselectionmodel';\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/index.js","import AutoTooltips from './slick.autotooltips';\nexport default AutoTooltips;\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.autotooltips/index.js","import $ from 'jquery';\nimport Slick from '../../src/slick.core';\n\nSlick.AutoTooltips = AutoTooltips;\nexport default AutoTooltips;\n\n  /**\n   * AutoTooltips plugin to show/hide tooltips when columns are too narrow to fit content.\n   * @constructor\n   * @param {boolean} [options.enableForCells=true]        - Enable tooltip for grid cells\n   * @param {boolean} [options.enableForHeaderCells=false] - Enable tooltip for header cells\n   * @param {number}  [options.maxToolTipLength=null]      - The maximum length for a tooltip\n   */\nfunction AutoTooltips(options){\n  let _grid;\n  const _self = this;\n  const _defaults = {\n    enableForCells: true,\n    enableForHeaderCells: false,\n    maxToolTipLength: null\n  };\n\n    /**\n     * Initialize plugin.\n     */\n  function init(grid){\n    options = Object.assign({}, _defaults, options);\n    _grid = grid;\n    if (options.enableForCells) _grid.onMouseEnter.subscribe(handleMouseEnter);\n    if (options.enableForHeaderCells) _grid.onHeaderMouseEnter.subscribe(handleHeaderMouseEnter);\n  }\n\n    /**\n     * Destroy plugin.\n     */\n  function destroy(){\n    if (options.enableForCells) _grid.onMouseEnter.unsubscribe(handleMouseEnter);\n    if (options.enableForHeaderCells) _grid.onHeaderMouseEnter.unsubscribe(handleHeaderMouseEnter);\n  }\n\n    /**\n     * Handle mouse entering grid cell to add/remove tooltip.\n     * @param {jQuery.Event} e - The event\n     */\n  function handleMouseEnter(e){\n    const cell = _grid.getCellFromEvent(e);\n    if (cell){\n      let $node = $(_grid.getCellNode(cell.row, cell.cell));\n      let text;\n      if ($node.innerWidth() < $node[0].scrollWidth){\n        text = $.trim($node.text());\n        if (options.maxToolTipLength && text.length > options.maxToolTipLength){\n          text = text.substr(0, options.maxToolTipLength - 3) + '...';\n        }\n      } else {\n        text = '';\n      }\n      $node.attr('title', text);\n    }\n  }\n\n    /**\n     * Handle mouse entering header cell to add/remove tooltip.\n     * @param {jQuery.Event} e     - The event\n     * @param {object} args.column - The column definition\n     */\n  function handleHeaderMouseEnter(e, args){\n    const column = args.column,\n      $node = $(e.target).closest('.slick-header-column');\n    if (column && !column.toolTip){\n      $node.attr('title', ($node.innerWidth() < $node[0].scrollWidth) ? column.name : '');\n    }\n  }\n\n    // Public API\n  Object.assign(this, {\n    init,\n    destroy\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.autotooltips/slick.autotooltips.js","import CellCopyManager from './slick.cellcopymanager';\nexport default CellCopyManager;\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.cellcopymanager/index.js","import $ from 'jquery';\nimport Slick from '../../src/slick.core';\nconst { keyCode } = Slick;\n\nSlick.CellRangeDecorator = CellCopyManager;\nexport default CellCopyManager;\n\nfunction CellCopyManager(){\n  var _grid;\n  var _self = this;\n  var _copiedRanges;\n\n  function init(grid){\n    _grid = grid;\n    _grid.onKeyDown.subscribe(handleKeyDown);\n  }\n\n  function destroy(){\n    _grid.onKeyDown.unsubscribe(handleKeyDown);\n  }\n\n  function handleKeyDown(e, args){\n    var ranges;\n    if (!_grid.getEditorLock().isActive()){\n      if (e.which == keyCode.ESCAPE){\n        if (_copiedRanges){\n          e.preventDefault();\n          clearCopySelection();\n          _self.onCopyCancelled.notify({ranges: _copiedRanges});\n          _copiedRanges = null;\n        }\n      }\n\n      if (e.which == 67 && (e.ctrlKey || e.metaKey)){\n        ranges = _grid.getSelectionModel().getSelectedRanges();\n        if (ranges.length != 0){\n          e.preventDefault();\n          _copiedRanges = ranges;\n          markCopySelection(ranges);\n          _self.onCopyCells.notify({ranges: ranges});\n        }\n      }\n\n      if (e.which == 86 && (e.ctrlKey || e.metaKey)){\n        if (_copiedRanges){\n          e.preventDefault();\n          clearCopySelection();\n          ranges = _grid.getSelectionModel().getSelectedRanges();\n          _self.onPasteCells.notify({from: _copiedRanges, to: ranges});\n          _copiedRanges = null;\n        }\n      }\n    }\n  }\n\n  function markCopySelection(ranges){\n    var columns = _grid.getColumns();\n    var hash = {};\n    for (var i = 0; i < ranges.length; i++){\n      for (var j = ranges[i].fromRow; j <= ranges[i].toRow; j++){\n        hash[j] = {};\n        for (var k = ranges[i].fromCell; k <= ranges[i].toCell; k++){\n          hash[j][columns[k].id] = 'copied';\n        }\n      }\n    }\n    _grid.setCellCssStyles('copy-manager', hash);\n  }\n\n  function clearCopySelection(){\n    _grid.removeCellCssStyles('copy-manager');\n  }\n\n  Object.assign(this, {\n    init,\n    destroy,\n    clearCopySelection,\n\n    onCopyCells: new Slick.Event(),\n    onCopyCancelled: new Slick.Event(),\n    onPasteCells: new Slick.Event()\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.cellcopymanager/slick.cellcopymanager.js","import CellRangeDecorator from './slick.cellrangedecorator';\nexport default CellRangeDecorator;\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.cellrangedecorator/index.js","import CellRangeDecorator from './slick.cellrangeselector';\nexport default CellRangeDecorator;\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.cellrangeselector/index.js","import CellSelectionModel from './slick.cellselectionmodel';\nexport default CellSelectionModel;\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.cellselectionmodel/index.js","import Slick from '../../src/slick.core';\nimport CellRangeSelector from '../slick.cellrangeselector/slick.cellrangeselector';\n\nSlick.CellSelectionModel = CellSelectionModel;\nexport default CellSelectionModel;\n\nfunction CellSelectionModel(options = {\n  selectActiveCell: true\n}){\n  let _grid;\n  let _canvas;\n  let _ranges = [];\n  const _self = this;\n  const _selector = new CellRangeSelector({\n    selectionCss: {\n      border: '2px solid black'\n    }\n  });\n  let _options;\n  const _defaults = {\n    selectActiveCell: true\n  };\n\n  function init(grid){\n    _options = Object.assign({}, options);\n    _grid = grid;\n    _canvas = _grid.getCanvasNode();\n    _grid.onActiveCellChanged.subscribe(handleActiveCellChange);\n    _grid.onKeyDown.subscribe(handleKeyDown);\n    grid.registerPlugin(_selector);\n    _selector.onCellRangeSelected.subscribe(handleCellRangeSelected);\n    _selector.onBeforeCellRangeSelected.subscribe(handleBeforeCellRangeSelected);\n  }\n\n  function destroy(){\n    _grid.onActiveCellChanged.unsubscribe(handleActiveCellChange);\n    _grid.onKeyDown.unsubscribe(handleKeyDown);\n    _selector.onCellRangeSelected.unsubscribe(handleCellRangeSelected);\n    _selector.onBeforeCellRangeSelected.unsubscribe(handleBeforeCellRangeSelected);\n    _grid.unregisterPlugin(_selector);\n  }\n\n  function removeInvalidRanges(ranges){\n    const result = [];\n\n    for (let i = 0; i < ranges.length; i++){\n      const r = ranges[i];\n      if (_grid.canCellBeSelected(r.fromRow, r.fromCell) && _grid.canCellBeSelected(r.toRow, r.toCell)){\n        result.push(r);\n      }\n    }\n\n    return result;\n  }\n\n  function setSelectedRanges(ranges){\n    // simle check for: empty selection didn't change, prevent firing onSelectedRangesChanged\n    if ((!_ranges || _ranges.length === 0) && (!ranges || ranges.length === 0)){\n      return;\n    }\n\n    _ranges = removeInvalidRanges(ranges);\n    _self.onSelectedRangesChanged.notify(_ranges);\n  }\n\n  function getSelectedRanges(){\n    return _ranges;\n  }\n\n  function handleBeforeCellRangeSelected(e, args){\n    if (_grid.getEditorLock().isActive()){\n      e.stopPropagation();\n      return false;\n    }\n  }\n\n  function handleCellRangeSelected(e, args){\n    setSelectedRanges([args.range]);\n  }\n\n  function handleActiveCellChange(e, args){\n    if (_options.selectActiveCell && args.row != null && args.cell != null){\n      setSelectedRanges([new Slick.Range(args.row, args.cell)]);\n    }\n  }\n\n  function handleKeyDown(e){\n    /** *\n     * ey codes\n     * 37 left\n     * 38 up\n     * 39 right\n     * 40 down\n     */\n    let ranges, last;\n    const active = _grid.getActiveCell();\n\n    if (active && e.shiftKey && !e.ctrlKey && !e.altKey &&\n      (e.which == 37 || e.which == 39 || e.which == 38 || e.which == 40)){\n      ranges = getSelectedRanges();\n      if (!ranges.length)\n        ranges.push(new Slick.Range(active.row, active.cell));\n\n      // keyboard can work with last range only\n      last = ranges.pop();\n\n      // can't handle selection out of active cell\n      if (!last.contains(active.row, active.cell))\n        last = new Slick.Range(active.row, active.cell);\n\n      let dRow = last.toRow - last.fromRow,\n        dCell = last.toCell - last.fromCell,\n        // walking direction\n        dirRow = active.row == last.fromRow ? 1 : -1,\n        dirCell = active.cell == last.fromCell ? 1 : -1;\n\n      if (e.which == 37){\n        dCell -= dirCell;\n      } else if (e.which == 39){\n        dCell += dirCell;\n      } else if (e.which == 38){\n        dRow -= dirRow;\n      } else if (e.which == 40){\n        dRow += dirRow;\n      }\n\n      // define new selection range\n      const new_last = new Slick.Range(active.row, active.cell, active.row + dirRow * dRow, active.cell + dirCell * dCell);\n      if (removeInvalidRanges([new_last]).length){\n        ranges.push(new_last);\n        const viewRow = dirRow > 0 ? new_last.toRow : new_last.fromRow;\n        const viewCell = dirCell > 0 ? new_last.toCell : new_last.fromCell;\n        _grid.scrollRowIntoView(viewRow);\n        _grid.scrollCellIntoView(viewRow, viewCell);\n      }\n      else\n        ranges.push(last);\n\n      setSelectedRanges(ranges);\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  Object.assign(this, {\n    getSelectedRanges,\n    setSelectedRanges,\n\n    init,\n    destroy,\n\n    onSelectedRangesChanged: new Slick.Event()\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.cellselectionmodel/slick.cellselectionmodel.js","import CheckboxSelectColumn from './slick.checkboxselectcolumn';\nexport default CheckboxSelectColumn;\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.checkboxselectcolumn/index.js","import $ from 'jquery';\nimport Slick from '../../src/slick.core';\n\nSlick.CheckboxSelectColumn = CheckboxSelectColumn;\nexport default CheckboxSelectColumn;\n\nfunction CheckboxSelectColumn(options){\n  let _grid;\n  const _self = this;\n  const _handler = new Slick.EventHandler();\n  let _selectedRowsLookup = {};\n  const _defaults = {\n    columnId: '_checkbox_selector',\n    cssClass: null,\n    toolTip: 'Select/Deselect All',\n    width: 30\n  };\n\n  const _options = $.extend(true, {}, _defaults, options);\n\n  function init(grid){\n    _grid = grid;\n    _handler\n      .subscribe(_grid.onSelectedRowsChanged, handleSelectedRowsChanged)\n      .subscribe(_grid.onClick, handleClick)\n      .subscribe(_grid.onHeaderClick, handleHeaderClick)\n      .subscribe(_grid.onKeyDown, handleKeyDown);\n  }\n\n  function destroy(){\n    _handler.unsubscribeAll();\n  }\n\n  function handleSelectedRowsChanged(e, args){\n    let selectedRows = _grid.getSelectedRows();\n    let lookup = {}, row, i;\n    for (i = 0; i < selectedRows.length; i++){\n      row = selectedRows[i];\n      lookup[row] = true;\n      if (lookup[row] !== _selectedRowsLookup[row]){\n        _grid.invalidateRow(row);\n        delete _selectedRowsLookup[row];\n      }\n    }\n    for (i in _selectedRowsLookup){\n      _grid.invalidateRow(i);\n    }\n    _selectedRowsLookup = lookup;\n    _grid.render();\n\n    if (selectedRows.length && selectedRows.length == _grid.getDataLength()){\n      _grid.updateColumnHeader(_options.columnId, \"<input type='checkbox' checked='checked'>\", _options.toolTip);\n    } else {\n      _grid.updateColumnHeader(_options.columnId, \"<input type='checkbox'>\", _options.toolTip);\n    }\n  }\n\n  function handleKeyDown(e, args){\n    if (e.which == 32){\n      if (_grid.getColumns()[args.cell].id === _options.columnId){\n        // if editing, try to commit\n        if (!_grid.getEditorLock().isActive() || _grid.getEditorLock().commitCurrentEdit()){\n          toggleRowSelection(args.row);\n        }\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      }\n    }\n  }\n\n  function handleClick(e, args){\n    // clicking on a row select checkbox\n    if (_grid.getColumns()[args.cell].id === _options.columnId && $(e.target).is(':checkbox')){\n      // if editing, try to commit\n      if (_grid.getEditorLock().isActive() && !_grid.getEditorLock().commitCurrentEdit()){\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        return;\n      }\n\n      toggleRowSelection(args.row);\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n    }\n  }\n\n  function toggleRowSelection(row){\n    if (_selectedRowsLookup[row]){\n      _grid.setSelectedRows($.grep(_grid.getSelectedRows(), function(n){\n        return n != row;\n      }));\n    } else {\n      _grid.setSelectedRows(_grid.getSelectedRows().concat(row));\n    }\n  }\n\n  function handleHeaderClick(e, args){\n    if (args.column.id == _options.columnId && $(e.target).is(':checkbox')){\n      // if editing, try to commit\n      if (_grid.getEditorLock().isActive() && !_grid.getEditorLock().commitCurrentEdit()){\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        return;\n      }\n\n      if ($(e.target).is(':checked')){\n        const rows = [];\n        for (let i = 0; i < _grid.getDataLength(); i++){\n          rows.push(i);\n        }\n        _grid.setSelectedRows(rows);\n      } else {\n        _grid.setSelectedRows([]);\n      }\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n    }\n  }\n\n  function getColumnDefinition(){\n    return {\n      id: _options.columnId,\n      name: \"<input type='checkbox'>\",\n      toolTip: _options.toolTip,\n      field: 'sel',\n      width: _options.width,\n      resizable: false,\n      sortable: false,\n      cssClass: _options.cssClass,\n      formatter: checkboxSelectionFormatter\n    };\n  }\n\n  function checkboxSelectionFormatter(row, cell, value, columnDef, dataContext){\n    if (dataContext){\n      return _selectedRowsLookup[row]\n        ? \"<input type='checkbox' checked='checked'>\"\n        : \"<input type='checkbox'>\";\n    }\n    return null;\n  }\n\n  Object.assign(this, {\n    init,\n    destroy,\n\n    getColumnDefinition\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.checkboxselectcolumn/slick.checkboxselectcolumn.js","import HeaderButtons from './slick.headerbuttons';\nexport default HeaderButtons;\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.headerbuttons/index.js","import $ from 'jquery';\nimport Slick from '../../src/slick.core';\n\n// import './slick.headerbuttons.css';\n\nSlick.HeaderButtons = HeaderButtons;\nexport default HeaderButtons;\n/** *\n * A plugin to add custom buttons to column headers.\n *\n * USAGE:\n *\n * Add the plugin .js & .css files and register it with the grid.\n *\n * To specify a custom button in a column header, extend the column definition like so:\n *\n *   var columns = [\n *     {\n *       id: 'myColumn',\n *       name: 'My column',\n *\n *       // This is the relevant part\n *       header: {\n *          buttons: [\n *              {\n *                // button options\n *              },\n *              {\n *                // button options\n *              }\n *          ]\n *       }\n *     }\n *   ];\n *\n * Available button options:\n *    cssClass:     CSS class to add to the button.\n *    image:        Relative button image path.\n *    tooltip:      Button tooltip.\n *    showOnHover:  Only show the button on hover.\n *    handler:      Button click handler.\n *    command:      A command identifier to be passed to the onCommand event handlers.\n *\n * The plugin exposes the following events:\n *    onCommand:    Fired on button click for buttons with 'command' specified.\n *        Event args:\n *            grid:     Reference to the grid.\n *            column:   Column definition.\n *            command:  Button command identified.\n *            button:   Button options.  Note that you can change the button options in your\n *                      event handler, and the column header will be automatically updated to\n *                      reflect them.  This is useful if you want to implement something like a\n *                      toggle button.\n *\n *\n * @param options {Object} Options:\n *    buttonCssClass:   a CSS class to use for buttons (default 'slick-header-button')\n * @class Slick.Plugins.HeaderButtons\n * @constructor\n */\nfunction HeaderButtons(options){\n  var _grid;\n  var _self = this;\n  var _handler = new Slick.EventHandler();\n  var _defaults = {\n    buttonCssClass: 'slick-header-button'\n  };\n\n  function init(grid){\n    options = Object.assign({}, _defaults, options);\n    _grid = grid;\n    _handler\n      .subscribe(_grid.onHeaderCellRendered, handleHeaderCellRendered)\n      .subscribe(_grid.onBeforeHeaderCellDestroy, handleBeforeHeaderCellDestroy);\n\n    // Force the grid to re-render the header now that the events are hooked up.\n    _grid.setColumns(_grid.getColumns());\n  }\n\n  function destroy(){\n    _handler.unsubscribeAll();\n  }\n\n  function handleHeaderCellRendered(e, args){\n    var column = args.column;\n\n    if (column.header && column.header.buttons){\n      // Append buttons in reverse order since they are floated to the right.\n      var i = column.header.buttons.length;\n      while (i--){\n        var button = column.header.buttons[i];\n        var btn = $('<div></div>')\n          .addClass(options.buttonCssClass)\n          .data('column', column)\n          .data('button', button);\n\n        if (button.showOnHover){\n          btn.addClass('slick-header-button-hidden');\n        }\n\n        if (button.image){\n          btn.css('backgroundImage', 'url(' + button.image + ')');\n        }\n\n        if (button.cssClass){\n          btn.addClass(button.cssClass);\n        }\n\n        if (button.tooltip){\n          btn.attr('title', button.tooltip);\n        }\n\n        if (button.command){\n          btn.data('command', button.command);\n        }\n\n        if (button.handler){\n          btn.bind('click', button.handler);\n        }\n\n        btn\n          .bind('click', handleButtonClick)\n          .appendTo(args.node);\n        args.node.classList.add('has-buttons');\n      }\n    }\n  }\n\n  function handleBeforeHeaderCellDestroy(e, args){\n    var column = args.column;\n\n    if (column.header && column.header.buttons){\n      // Removing buttons via jQuery will also clean up any event handlers and data.\n      // NOTE: If you attach event handlers directly or using a different framework,\n      //       you must also clean them up here to avoid memory leaks.\n      $(args.node).find('.' + options.buttonCssClass).remove();\n    }\n  }\n\n  function handleButtonClick(e){\n    var command = $(this).data('command');\n    var columnDef = $(this).data('column');\n    var button = $(this).data('button');\n\n    if (command != null){\n      _self.onCommand.notify({\n        'grid': _grid,\n        'column': columnDef,\n        'command': command,\n        'button': button\n      }, e, _self);\n\n      // Update the header in case the user updated the button definition in the handler.\n      _grid.updateColumnHeader(columnDef.id);\n    }\n\n    // Stop propagation so that it doesn't register as a header click event.\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  Object.assign(this, {\n    init,\n    destroy,\n\n    'onCommand': new Slick.Event()\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.headerbuttons/slick.headerbuttons.js","import HeaderMenu from './slick.headermenu';\nexport default HeaderMenu;\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.headermenu/index.js","import $ from 'jquery';\nimport Slick from '../../src/slick.core';\n\n// import './slick.headermenu.css';\n\nSlick.HeaderMenu = HeaderMenu;\nexport default HeaderMenu;\n\n/** *\n * A plugin to add drop-down menus to column headers.\n *\n * USAGE:\n *\n * Add the plugin .js & .css files and register it with the grid.\n *\n * To specify a menu in a column header, extend the column definition like so:\n *\n *   const columns = [\n *     {\n *       id: 'myColumn',\n *       name: 'My column',\n *\n *       // This is the relevant part\n *       header: {\n *          menu: {\n *              items: [\n *                {\n *                  // menu item options\n *                },\n *                {\n *                  // menu item options\n *                }\n *              ]\n *          }\n *       }\n *     }\n *   ];\n *\n *\n * Available menu options:\n *    tooltip:      Menu button tooltip.\n *\n *\n * Available menu item options:\n *    title:        Menu item text.\n *    disabled:     Whether the item is disabled.\n *    tooltip:      Item tooltip.\n *    command:      A command identifier to be passed to the onCommand event handlers.\n *    iconCssClass: A CSS class to be added to the menu item icon.\n *    iconImage:    A url to the icon image.\n *\n *\n * The plugin exposes the following events:\n *    onBeforeMenuShow:   Fired before the menu is shown.  You can customize the menu or dismiss it by returning false.\n *        Event args:\n *            grid:     Reference to the grid.\n *            column:   Column definition.\n *            menu:     Menu options.  Note that you can change the menu items here.\n *\n *    onCommand:    Fired on menu item click for buttons with 'command' specified.\n *        Event args:\n *            grid:     Reference to the grid.\n *            column:   Column definition.\n *            command:  Button command identified.\n *            button:   Button options.  Note that you can change the button options in your\n *                      event handler, and the column header will be automatically updated to\n *                      reflect them.  This is useful if you want to implement something like a\n *                      toggle button.\n *\n *\n * @param options {Object} Options:\n *    buttonCssClass:   an extra CSS class to add to the menu button\n *    buttonImage:      a url to the menu button image (default '../images/down.gif')\n * @class Slick.Plugins.HeaderButtons\n * @constructor\n */\nfunction HeaderMenu(options){\n  let _grid;\n  const _self = this;\n  const _handler = new Slick.EventHandler();\n  const _defaults = {\n    buttonCssClass: null,\n    buttonImage: null\n  };\n\n  let $menu;\n  let $activeHeaderColumn;\n\n  function init(grid){\n    options = Object.assign({}, _defaults, options);\n    _grid = grid;\n    _handler\n      .subscribe(_grid.onHeaderCellRendered, handleHeaderCellRendered)\n      .subscribe(_grid.onBeforeHeaderCellDestroy, handleBeforeHeaderCellDestroy);\n\n    // Force the grid to re-render the header now that the events are hooked up.\n    _grid.setColumns(_grid.getColumns());\n\n    // Hide the menu on outside click.\n    $(document.body).bind('mousedown', handleBodyMouseDown);\n  }\n\n  function destroy(){\n    _handler.unsubscribeAll();\n    $(document.body).unbind('mousedown', handleBodyMouseDown);\n  }\n\n  function handleBodyMouseDown(e){\n    if ($menu && $menu[0] != e.target && !$.contains($menu[0], e.target)){\n      hideMenu();\n    }\n  }\n\n  function hideMenu(){\n    if ($menu){\n      $menu.remove();\n      $menu = null;\n      $activeHeaderColumn\n        .removeClass('slick-header-column-active');\n    }\n  }\n\n  function handleHeaderCellRendered(e, args){\n    const column = args.column;\n    const menu = column.header && column.header.menu;\n\n    if (menu){\n      const $el = $('<div></div>')\n        .addClass('slick-header-menubutton')\n        .data('column', column)\n        .data('menu', menu);\n\n      if (options.buttonCssClass){\n        $el.addClass(options.buttonCssClass);\n      }\n\n      if (options.buttonImage){\n        $el.css('background-image', 'url(' + options.buttonImage + ')');\n      }\n\n      if (menu.tooltip){\n        $el.attr('title', menu.tooltip);\n      }\n\n      $el\n        .bind('click', showMenu)\n        .appendTo(args.node);\n    }\n  }\n\n  function handleBeforeHeaderCellDestroy(e, args){\n    const column = args.column;\n\n    if (column.header && column.header.menu){\n      $(args.node).find('.slick-header-menubutton').remove();\n    }\n  }\n\n  function showMenu(e){\n    const $menuButton = $(this);\n    const menu = $menuButton.data('menu');\n    const columnDef = $menuButton.data('column');\n\n    // Let the user modify the menu or cancel altogether,\n    // or provide alternative menu implementation.\n    if (_self.onBeforeMenuShow.notify({\n      'grid': _grid,\n      'column': columnDef,\n      'menu': menu\n    }, e, _self) == false){\n      return;\n    }\n\n    if (!$menu){\n      $menu = $(\"<div class='slick-header-menu'></div>\")\n        .appendTo(_grid.getContainerNode());\n    }\n    $menu.empty();\n\n    // Construct the menu items.\n    for (let i = 0; i < menu.items.length; i++){\n      const item = menu.items[i];\n\n      const $li = $(\"<div class='slick-header-menuitem'></div>\")\n        .data('command', item.command || '')\n        .data('column', columnDef)\n        .data('item', item)\n        .bind('click', handleMenuItemClick)\n        .appendTo($menu);\n\n      if (item.disabled){\n        $li.addClass('slick-header-menuitem-disabled');\n      }\n\n      if (item.tooltip){\n        $li.attr('title', item.tooltip);\n      }\n\n      const $icon = $(\"<div class='slick-header-menuicon'></div>\")\n        .appendTo($li);\n\n      if (item.iconCssClass){\n        $icon.addClass(item.iconCssClass);\n      }\n\n      if (item.iconImage){\n        $icon.css('background-image', 'url(' + item.iconImage + ')');\n      }\n\n      $(\"<span class='slick-header-menucontent'></span>\")\n        .text(item.title)\n        .appendTo($li);\n    }\n\n    // Position the menu.\n    $menu\n      .offset({ top: $(this).offset().top + $(this).height(), left: $(this).offset().left });\n\n    // Mark the header as active to keep the highlighting.\n    $activeHeaderColumn = $menuButton.closest('.slick-header-column');\n    $activeHeaderColumn\n      .addClass('slick-header-column-active');\n\n    // Stop propagation so that it doesn't register as a header click event.\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  function handleMenuItemClick(e){\n    const command = $(this).data('command');\n    const columnDef = $(this).data('column');\n    const item = $(this).data('item');\n\n    if (item.disabled){\n      return;\n    }\n\n    hideMenu();\n\n    if (command != null && command != ''){\n      _self.onCommand.notify({\n        'grid': _grid,\n        'column': columnDef,\n        'command': command,\n        'item': item\n      }, e, _self);\n    }\n\n    // Stop propagation so that it doesn't register as a header click event.\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  Object.assign(this, {\n    init,\n    destroy,\n\n    'onBeforeMenuShow': new Slick.Event(),\n    'onCommand': new Slick.Event()\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.headermenu/slick.headermenu.js","import RowMoveManager from './slick.rowmovemanager';\nexport default RowMoveManager;\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.rowmovemanager/index.js","import Slick from '../../src/slick.core';\n\nSlick.RowMoveManager = RowMoveManager;\nexport default RowMoveManager;\n\nfunction RowMoveManager(options){\n  let _grid;\n  let _canvas;\n  let _dragging;\n  const _self = this;\n  const _handler = new Slick.EventHandler();\n  const _defaults = {\n    cancelEditOnDrag: false\n  };\n\n  function init(grid){\n    options = Object.assign({}, _defaults, options);\n    _grid = grid;\n    _canvas = _grid.getCanvasNode();\n    _handler\n      .subscribe(_grid.onDragInit, handleDragInit)\n      .subscribe(_grid.onDragStart, handleDragStart)\n      .subscribe(_grid.onDrag, handleDrag)\n      .subscribe(_grid.onDragEnd, handleDragEnd);\n  }\n\n  function destroy(){\n    _handler.unsubscribeAll();\n  }\n\n  function handleDragInit(e, dd){\n    // prevent the grid from cancelling drag'n'drop by default\n    e.stopImmediatePropagation();\n  }\n\n  function handleDragStart(e, dd){\n    const cell = _grid.getCellFromEvent(e);\n\n    if (options.cancelEditOnDrag && _grid.getEditorLock().isActive()){\n      _grid.getEditorLock().cancelCurrentEdit();\n    }\n\n    if (_grid.getEditorLock().isActive() || !/move|selectAndMove/.test(_grid.getColumns()[cell.cell].behavior)){\n      return false;\n    }\n\n    _dragging = true;\n    e.stopImmediatePropagation();\n\n    let selectedRows = _grid.getSelectedRows();\n\n    if (selectedRows.length == 0 || $.inArray(cell.row, selectedRows) == -1){\n      selectedRows = [cell.row];\n      _grid.setSelectedRows(selectedRows);\n    }\n\n    const rowHeight = _grid.getOptions().rowHeight;\n\n    dd.selectedRows = selectedRows;\n\n    dd.selectionProxy = $(\"<div class='slick-reorder-proxy'/>\")\n      .css('position', 'absolute')\n      .css('zIndex', '99999')\n      .css('width', $(_canvas).innerWidth())\n      .css('height', rowHeight * selectedRows.length)\n      .appendTo(_canvas);\n\n    dd.guide = $(\"<div class='slick-reorder-guide'/>\")\n      .css('position', 'absolute')\n      .css('zIndex', '99998')\n      .css('width', $(_canvas).innerWidth())\n      .css('top', -1000)\n      .appendTo(_canvas);\n\n    dd.insertBefore = -1;\n  }\n\n  function handleDrag(e, dd){\n    if (!_dragging){\n      return;\n    }\n\n    e.stopImmediatePropagation();\n\n    const top = e.pageY - $(_canvas).offset().top;\n    dd.selectionProxy.css('top', top - 5);\n\n    const insertBefore = Math.max(0, Math.min(Math.round(top / _grid.getOptions().rowHeight), _grid.getDataLength()));\n    if (insertBefore !== dd.insertBefore){\n      const eventData = {\n        'rows': dd.selectedRows,\n        'insertBefore': insertBefore\n      };\n\n      if (_self.onBeforeMoveRows.notify(eventData) === false){\n        dd.guide.css('top', -1000);\n        dd.canMove = false;\n      } else {\n        dd.guide.css('top', insertBefore * _grid.getOptions().rowHeight);\n        dd.canMove = true;\n      }\n\n      dd.insertBefore = insertBefore;\n    }\n  }\n\n  function handleDragEnd(e, dd){\n    if (!_dragging){\n      return;\n    }\n    _dragging = false;\n    e.stopImmediatePropagation();\n\n    dd.guide.remove();\n    dd.selectionProxy.remove();\n\n    if (dd.canMove){\n      const eventData = {\n        'rows': dd.selectedRows,\n        'insertBefore': dd.insertBefore\n      };\n      // TODO:  _grid.remapCellCssClasses ?\n      _self.onMoveRows.notify(eventData);\n    }\n  }\n\n  Object.assign(this, {\n    'onBeforeMoveRows': new Slick.Event(),\n    'onMoveRows': new Slick.Event(),\n    init,\n    destroy\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.rowmovemanager/slick.rowmovemanager.js","import RowSelectionModel from './slick.rowselectionmodel';\nexport default RowSelectionModel;\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.rowselectionmodel/index.js","import $ from 'jquery';\nimport Slick from '../../src/slick.core';\n\nSlick.RowSelectionModel = RowSelectionModel;\nexport default RowSelectionModel;\n\nfunction RowSelectionModel(options){\n  let _grid;\n  let _ranges = [];\n  const _self = this;\n  const _handler = new Slick.EventHandler();\n  let _inHandler;\n  let _options;\n  const _defaults = {\n    selectActiveRow: true\n  };\n\n  function init(grid){\n    _options = Object.assign({}, _defaults, options);\n    _grid = grid;\n    _handler.subscribe(_grid.onActiveCellChanged,\n      wrapHandler(handleActiveCellChange));\n    _handler.subscribe(_grid.onKeyDown,\n      wrapHandler(handleKeyDown));\n    _handler.subscribe(_grid.onClick,\n      wrapHandler(handleClick));\n  }\n\n  function destroy(){\n    _handler.unsubscribeAll();\n  }\n\n  function wrapHandler(handler){\n    return function(){\n      if (!_inHandler){\n        _inHandler = true;\n        handler.apply(this, arguments);\n        _inHandler = false;\n      }\n    };\n  }\n\n  function rangesToRows(ranges){\n    const rows = [];\n    for (let i = 0; i < ranges.length; i++){\n      for (let j = ranges[i].fromRow; j <= ranges[i].toRow; j++){\n        rows.push(j);\n      }\n    }\n    return rows;\n  }\n\n  function rowsToRanges(rows){\n    const ranges = [];\n    const lastCell = _grid.getColumns().length - 1;\n    for (let i = 0; i < rows.length; i++){\n      ranges.push(new Slick.Range(rows[i], 0, rows[i], lastCell));\n    }\n    return ranges;\n  }\n\n  function getRowsRange(from, to){\n    let i;\n    const rows = [];\n    for (i = from; i <= to; i++){\n      rows.push(i);\n    }\n    for (i = to; i < from; i++){\n      rows.push(i);\n    }\n    return rows;\n  }\n\n  function getSelectedRows(){\n    return rangesToRows(_ranges);\n  }\n\n  function setSelectedRows(rows){\n    setSelectedRanges(rowsToRanges(rows));\n  }\n\n  function setSelectedRanges(ranges){\n    // simle check for: empty selection didn't change, prevent firing onSelectedRangesChanged\n    if ((!_ranges || _ranges.length === 0) && (!ranges || ranges.length === 0)){\n      return;\n    }\n    _ranges = ranges;\n    _self.onSelectedRangesChanged.notify(_ranges);\n  }\n\n  function getSelectedRanges(){\n    return _ranges;\n  }\n\n  function handleActiveCellChange(e, data){\n    if (_options.selectActiveRow && data.row != null){\n      setSelectedRanges([new Slick.Range(data.row, 0, data.row, _grid.getColumns().length - 1)]);\n    }\n  }\n\n  function handleKeyDown(e){\n    const activeRow = _grid.getActiveCell();\n    if (activeRow && e.shiftKey && !e.ctrlKey && !e.altKey && !e.metaKey && (e.which == 38 || e.which == 40)){\n      let selectedRows = getSelectedRows();\n      selectedRows.sort(function(x, y){\n        return x - y;\n      });\n\n      if (!selectedRows.length){\n        selectedRows = [activeRow.row];\n      }\n\n      let top = selectedRows[0];\n      let bottom = selectedRows[selectedRows.length - 1];\n      let active;\n\n      if (e.which == 40){\n        active = activeRow.row < bottom || top == bottom ? ++bottom : ++top;\n      } else {\n        active = activeRow.row < bottom ? --bottom : --top;\n      }\n\n      if (active >= 0 && active < _grid.getDataLength()){\n        _grid.scrollRowIntoView(active);\n        _ranges = rowsToRanges(getRowsRange(top, bottom));\n        setSelectedRanges(_ranges);\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  function handleClick(e){\n    const cell = _grid.getCellFromEvent(e);\n    if (!cell || !_grid.canCellBeActive(cell.row, cell.cell)){\n      return false;\n    }\n\n    if (!_grid.getOptions().multiSelect || (\n      !e.ctrlKey && !e.shiftKey && !e.metaKey)){\n      return false;\n    }\n\n    let selection = rangesToRows(_ranges);\n    const idx = $.inArray(cell.row, selection);\n\n    if (idx === -1 && (e.ctrlKey || e.metaKey)){\n      selection.push(cell.row);\n      _grid.setActiveCell(cell.row, cell.cell);\n    } else if (idx !== -1 && (e.ctrlKey || e.metaKey)){\n      selection = $.grep(selection, function(o, i){\n        return (o !== cell.row);\n      });\n      _grid.setActiveCell(cell.row, cell.cell);\n    } else if (selection.length && e.shiftKey){\n      const last = selection.pop();\n      const from = Math.min(cell.row, last);\n      const to = Math.max(cell.row, last);\n      selection = [];\n      for (let i = from; i <= to; i++){\n        if (i !== last){\n          selection.push(i);\n        }\n      }\n      selection.push(last);\n      _grid.setActiveCell(cell.row, cell.cell);\n    }\n\n    _ranges = rowsToRanges(selection);\n    setSelectedRanges(_ranges);\n    e.stopImmediatePropagation();\n\n    return true;\n  }\n\n  Object.assign(this, {\n    getSelectedRows,\n    setSelectedRows,\n\n    getSelectedRanges,\n    setSelectedRanges,\n\n    init,\n    destroy,\n\n    'onSelectedRangesChanged': new Slick.Event()\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ../plugins/slick.rowselectionmodel/slick.rowselectionmodel.js","// import 'jquery';\n// import 'jquery-ui/ui/widgets/sortable';\n//\n// import './slick.grid.less';\n// import './slick-default-theme.less';\n\nexport Slick from './slick.core';\nexport Editors from './slick.editors';\nexport Formatters from './slick.formatters';\nexport Data from './slick.dataview';\nexport Grid from './slick.grid';\nexport FrozenGrid from './slick-frozen.grid';\nexport Plugins from '../plugins';\n\n\n\n// WEBPACK FOOTER //\n// ../src/index.js","/**\n * @license\n * (c) 2009-2013 Michael Leibman\n * michael{dot}leibman{at}gmail{dot}com\n * http://github.com/mleibman/slickgrid\n *\n * Distributed under MIT license.\n * All rights reserved.\n *\n * SlickGrid v2.2\n *\n * NOTES:\n *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.\n *     This increases the speed dramatically, but can only be done safely because there are no event handlers\n *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()\n *     and do proper cleanup.\n */\n\nimport $ from 'jquery';\nimport interact from './interact.js';\n\nimport Slick from './slick.core';\n\n// Slick.Grid globals pretense\nSlick.FrozenGrid = SlickGrid;\nglobal.Slick = Slick;\n\nexport default SlickGrid;\n\n// shared across all grids on the page\nvar scrollbarDimensions;\nvar maxSupportedCssHeight; // browser's breaking point\n\n//////////////////////////////////////////////////////////////////////////////////////////////\n// SlickGrid class implementation (available as Slick.Grid)\n\n/**\n * Creates a new instance of the grid.\n * @class SlickGrid\n * @constructor\n * @param {Node}              container   Container node to create the grid in.\n * @param {Array,Object}      data        An array of objects for databinding.\n * @param {Array}             columns     An array of column definitions.\n * @param {Object}            options     Grid options.\n **/\nfunction SlickGrid(container, data, columns, options){\n  // settings\n  var defaults = {\n    explicitInitialization: false,\n    rowHeight: 25,\n    defaultColumnWidth: 80,\n    enableAddRow: false,\n    leaveSpaceForNewRows: false,\n    editable: false,\n    autoEdit: true,\n    enableCellNavigation: true,\n    enableColumnReorder: true,\n    asyncEditorLoading: false,\n    asyncEditorLoadDelay: 100,\n    forceFitColumns: false,\n    enableAsyncPostRender: false,\n    asyncPostRenderDelay: 50,\n    autoHeight: false,\n    editorLock: Slick.GlobalEditorLock,\n    showHeaderRow: false,\n    headerRowHeight: 25,\n    showFooterRow: false,\n    footerRowHeight: 25,\n    showTopPanel: false,\n    topPanelHeight: 25,\n    formatterFactory: null,\n    editorFactory: null,\n    cellFlashingCssClass: \"flashing\",\n    selectedCellCssClass: \"selected\",\n    multiSelect: true,\n    enableTextSelectionOnCells: false,\n    dataItemColumnValueExtractor: null,\n    frozenBottom: false,\n    frozenColumn: -1,\n    frozenRow: -1,\n    fullWidthRows: false,\n    multiColumnSort: false,\n    defaultFormatter: defaultFormatter,\n    forceSyncScrolling: false,\n    addNewRowCssClass: \"new-row\"\n  };\n\n  var columnDefaults = {\n    name: \"\",\n    resizable: true,\n    sortable: false,\n    minWidth: 30,\n    rerenderOnResize: false,\n    headerCssClass: null,\n    defaultSortAsc: true,\n    focusable: true,\n    selectable: true\n  };\n\n  // scroller\n  var th; // virtual height\n  var h; // real scrollable height\n  var ph; // page height\n  var n; // number of pages\n  var cj; // \"jumpiness\" coefficient\n\n  var page = 0; // current page\n  var offset = 0; // current page offset\n  var vScrollDir = 1;\n\n  // private\n  var initialized = false;\n  var $container;\n  var uid = \"slickgrid_\" + Math.round(1000000 * Math.random());\n  var self = this;\n  var $focusSink, $focusSink2;\n  var $groupHeaders = $();\n  var $headerScroller;\n  var $headers;\n  var $headerRow, $headerRowScroller, $headerRowSpacerL, $headerRowSpacerR;\n  var $footerRow, $footerRowScroller, $footerRowSpacerL, $footerRowSpacerR;\n  var $topPanelScroller;\n  var $topPanel;\n  var $viewport;\n  var $canvas;\n  var $style;\n  var $boundAncestors;\n  var treeColumns;\n  var stylesheet, columnCssRulesL, columnCssRulesR;\n  var viewportH, viewportW;\n  var canvasWidth, canvasWidthL, canvasWidthR;\n  var headersWidth, headersWidthL, headersWidthR;\n  var viewportHasHScroll, viewportHasVScroll;\n  var headerColumnWidthDiff = 0,\n    headerColumnHeightDiff = 0, // border+padding\n    cellWidthDiff = 0,\n    cellHeightDiff = 0;\n  var absoluteColumnMinWidth;\n  var hasFrozenRows = false;\n  var frozenRowsHeight = 0;\n  var actualFrozenRow = -1;\n  var paneTopH = 0;\n  var paneBottomH = 0;\n  var viewportTopH = 0;\n  var viewportBottomH = 0;\n  var topPanelH = 0;\n  var headerRowH = 0;\n  var footerRowH = 0;\n\n  var tabbingDirection = 1;\n  var $activeCanvasNode;\n  var $activeViewportNode;\n  var activePosX;\n  var activeRow, activeCell;\n  var activeCellNode = null;\n  var currentEditor = null;\n  var serializedEditorValue;\n  var editController;\n\n  var rowsCache = {};\n  var renderedRows = 0;\n  var numVisibleRows = 0;\n  var prevScrollTop = 0;\n  var scrollTop = 0;\n  var lastRenderedScrollTop = 0;\n  var lastRenderedScrollLeft = 0;\n  var prevScrollLeft = 0;\n  var scrollLeft = 0;\n\n  var selectionModel;\n  var selectedRows = [];\n\n  var plugins = [];\n  var cellCssClasses = {};\n\n  var columnsById = {};\n  var sortColumns = [];\n  var columnPosLeft = [];\n  var columnPosRight = [];\n\n  // async call handles\n  var h_editorLoader = null;\n  var h_render = null;\n  var h_postrender = null;\n  var postProcessedRows = {};\n  var postProcessToRow = null;\n  var postProcessFromRow = null;\n\n  // perf counters\n  var counter_rows_rendered = 0;\n  var counter_rows_removed = 0;\n\n  // These two variables work around a bug with inertial scrolling in Webkit/Blink on Mac.\n  // See http://crbug.com/312427.\n  var rowNodeFromLastMouseWheelEvent; // this node must not be deleted while inertial scrolling\n  var zombieRowNodeFromLastMouseWheelEvent; // node that was hidden instead of getting deleted\n\n  var $paneHeaderL;\n  var $paneHeaderR;\n  var $paneTopL;\n  var $paneTopR;\n  var $paneBottomL;\n  var $paneBottomR;\n\n  var $headerScrollerL;\n  var $headerScrollerR;\n\n  var $headerL;\n  var $headerR;\n\n  var $groupHeadersL;\n  var $groupHeadersR;\n\n  var $headerRowScrollerL;\n  var $headerRowScrollerR;\n\n  var $footerRowScrollerL;\n  var $footerRowScrollerR;\n\n  var $headerRowL;\n  var $headerRowR;\n\n  var $footerRowL;\n  var $footerRowR;\n\n  var $topPanelScrollerL;\n  var $topPanelScrollerR;\n\n  var $topPanelL;\n  var $topPanelR;\n\n  var $viewportTopL;\n  var $viewportTopR;\n  var $viewportBottomL;\n  var $viewportBottomR;\n\n  var $canvasTopL;\n  var $canvasTopR;\n  var $canvasBottomL;\n  var $canvasBottomR;\n\n  var $viewportScrollContainerX;\n  var $viewportScrollContainerY;\n  var $headerScrollContainer;\n  var $headerRowScrollContainer;\n  var $footerRowScrollContainer;\n\n  //////////////////////////////////////////////////////////////////////////////////////////////\n  // Initialization\n\n  function init(){\n    $container = $(container);\n    if ($container.length < 1){\n      throw new Error(\"SlickGrid requires a valid container, \" + container + \" does not exist in the DOM.\");\n    }\n\n    // calculate these only once and share between grid instances\n    maxSupportedCssHeight = maxSupportedCssHeight || getMaxSupportedCssHeight();\n    scrollbarDimensions = scrollbarDimensions || measureScrollbar();\n\n    options = $.extend({}, defaults, options);\n    validateAndEnforceOptions();\n    columnDefaults.width = options.defaultColumnWidth;\n\n    treeColumns = new Slick.TreeColumns(columns);\n    columns = treeColumns.extractColumns();\n\n    columnsById = {};\n    for (var i = 0; i < columns.length; i++){\n      var m = columns[i] = $.extend({}, columnDefaults, columns[i]);\n      columnsById[m.id] = i;\n      if (m.minWidth && m.width < m.minWidth){\n        m.width = m.minWidth;\n      }\n      if (m.maxWidth && m.width > m.maxWidth){\n        m.width = m.maxWidth;\n      }\n    }\n\n    editController = {\n      \"commitCurrentEdit\": commitCurrentEdit,\n      \"cancelCurrentEdit\": cancelCurrentEdit\n    };\n\n    $container.empty()\n      .css(\"overflow\", \"hidden\")\n      .css(\"outline\", 0)\n      .addClass(uid)\n      .addClass(\"ui-widget\");\n\n    // set up a positioning container if needed\n    if (!/relative|absolute|fixed/.test($container.css(\"position\"))){\n      $container.css(\"position\", \"relative\");\n    }\n\n    $focusSink = $(\"<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>\").appendTo($container);\n\n    // Containers used for scrolling frozen columns and rows\n    $paneHeaderL = $(\"<div class='slick-pane slick-pane-header slick-pane-left' tabIndex='0' />\").appendTo($container);\n    $paneHeaderR = $(\"<div class='slick-pane slick-pane-header slick-pane-right' tabIndex='0' />\").appendTo($container);\n    $paneTopL = $(\"<div class='slick-pane slick-pane-top slick-pane-left' tabIndex='0' />\").appendTo($container);\n    $paneTopR = $(\"<div class='slick-pane slick-pane-top slick-pane-right' tabIndex='0' />\").appendTo($container);\n    $paneBottomL = $(\"<div class='slick-pane slick-pane-bottom slick-pane-left' tabIndex='0' />\").appendTo($container);\n    $paneBottomR = $(\"<div class='slick-pane slick-pane-bottom slick-pane-right' tabIndex='0' />\").appendTo($container);\n\n    // Append the header scroller containers\n    $headerScrollerL = $(\"<div class='ui-state-default slick-header slick-header-left' />\").appendTo($paneHeaderL);\n    $headerScrollerR = $(\"<div class='ui-state-default slick-header slick-header-right' />\").appendTo($paneHeaderR);\n\n    // Cache the header scroller containers\n    $headerScroller = $().add($headerScrollerL).add($headerScrollerR);\n\n    if (treeColumns.hasDepth()){\n      $groupHeadersL = [], $groupHeadersR = [];\n      for (var index = 0; index < treeColumns.getDepth() - 1; index++){\n        $groupHeadersL[index] = $(\"<div class='slick-group-header-columns slick-group-header-columns-left' style='left:-1000px' />\").appendTo($headerScrollerL);\n        $groupHeadersR[index] = $(\"<div class='slick-group-header-columns slick-group-header-columns-right' style='left:-1000px' />\").appendTo($headerScrollerR);\n      }\n\n      $groupHeaders = $().add($groupHeadersL).add($groupHeadersR);\n    }\n\n    // Append the columnn containers to the headers\n    $headerL = $(\"<div class='slick-header-columns slick-header-columns-left' style='left:-1000px' />\").appendTo($headerScrollerL);\n    $headerR = $(\"<div class='slick-header-columns slick-header-columns-right' style='left:-1000px' />\").appendTo($headerScrollerR);\n\n    // Cache the header columns\n    $headers = $().add($headerL).add($headerR);\n\n    $headerRowScrollerL = $(\"<div class='ui-state-default slick-headerrow' />\").appendTo($paneTopL);\n    $headerRowScrollerR = $(\"<div class='ui-state-default slick-headerrow' />\").appendTo($paneTopR);\n\n    $headerRowScroller = $().add($headerRowScrollerL).add($headerRowScrollerR);\n\n    $headerRowSpacerL = $(\"<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>\")\n      .css(\"width\", getCanvasWidth() + scrollbarDimensions.width + \"px\")\n      .appendTo($headerRowScrollerL);\n    $headerRowSpacerR = $(\"<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>\")\n      .css(\"width\", getCanvasWidth() + scrollbarDimensions.width + \"px\")\n      .appendTo($headerRowScrollerR);\n\n    $headerRowL = $(\"<div class='slick-headerrow-columns slick-headerrow-columns-left' />\").appendTo($headerRowScrollerL);\n    $headerRowR = $(\"<div class='slick-headerrow-columns slick-headerrow-columns-right' />\").appendTo($headerRowScrollerR);\n\n    $headerRow = $().add($headerRowL).add($headerRowR);\n\n    // Append the top panel scroller\n    $topPanelScrollerL = $(\"<div class='ui-state-default slick-top-panel-scroller' />\").appendTo($paneTopL);\n    $topPanelScrollerR = $(\"<div class='ui-state-default slick-top-panel-scroller' />\").appendTo($paneTopR);\n\n    $topPanelScroller = $().add($topPanelScrollerL).add($topPanelScrollerR);\n\n    // Append the top panel\n    $topPanelL = $(\"<div class='slick-top-panel' style='width:10000px' />\").appendTo($topPanelScrollerL);\n    $topPanelR = $(\"<div class='slick-top-panel' style='width:10000px' />\").appendTo($topPanelScrollerR);\n\n    $topPanel = $().add($topPanelL).add($topPanelR);\n\n    if (!options.showTopPanel){\n      $topPanelScroller.hide();\n    }\n\n    if (!options.showHeaderRow){\n      $headerRowScroller.hide();\n    }\n\n    // Append the viewport containers\n    $viewportTopL = $(\"<div class='slick-viewport slick-viewport-top slick-viewport-left' tabIndex='0' hideFocus />\").appendTo($paneTopL);\n    $viewportTopR = $(\"<div class='slick-viewport slick-viewport-top slick-viewport-right' tabIndex='0' hideFocus />\").appendTo($paneTopR);\n    $viewportBottomL = $(\"<div class='slick-viewport slick-viewport-bottom slick-viewport-left' tabIndex='0' hideFocus />\").appendTo($paneBottomL);\n    $viewportBottomR = $(\"<div class='slick-viewport slick-viewport-bottom slick-viewport-right' tabIndex='0' hideFocus />\").appendTo($paneBottomR);\n\n    // Cache the viewports\n    $viewport = $().add($viewportTopL).add($viewportTopR).add($viewportBottomL).add($viewportBottomR);\n\n    // Default the active viewport to the top left\n    $activeViewportNode = $viewportTopL;\n\n    // Append the canvas containers\n    $canvasTopL = $(\"<div class='grid-canvas grid-canvas-top grid-canvas-left' tabIndex='0' hideFocus />\").appendTo($viewportTopL);\n    $canvasTopR = $(\"<div class='grid-canvas grid-canvas-top grid-canvas-right' tabIndex='0' hideFocus />\").appendTo($viewportTopR);\n    $canvasBottomL = $(\"<div class='grid-canvas grid-canvas-bottom grid-canvas-left' tabIndex='0' hideFocus />\").appendTo($viewportBottomL);\n    $canvasBottomR = $(\"<div class='grid-canvas grid-canvas-bottom grid-canvas-right' tabIndex='0' hideFocus />\").appendTo($viewportBottomR);\n\n    // Cache the canvases\n    $canvas = $().add($canvasTopL).add($canvasTopR).add($canvasBottomL).add($canvasBottomR);\n\n    // Default the active canvas to the top left\n    $activeCanvasNode = $canvasTopL;\n\n    // footer Row\n    $footerRowScrollerR = $(\"<div class='ui-state-default slick-footerrow' />\").appendTo($paneTopR);\n    $footerRowScrollerL = $(\"<div class='ui-state-default slick-footerrow' />\").appendTo($paneTopL);\n\n    $footerRowScroller = $().add($footerRowScrollerL).add($footerRowScrollerR);\n\n    $footerRowSpacerL = $(\"<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>\")\n      .css(\"width\", getCanvasWidth() + scrollbarDimensions.width + \"px\")\n      .appendTo($footerRowScrollerL);\n    $footerRowSpacerR = $(\"<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>\")\n      .css(\"width\", getCanvasWidth() + scrollbarDimensions.width + \"px\")\n      .appendTo($footerRowScrollerR);\n\n    $footerRowL = $(\"<div class='slick-footerrow-columns slick-footerrow-columns-left' />\").appendTo($footerRowScrollerL);\n    $footerRowR = $(\"<div class='slick-footerrow-columns slick-footerrow-columns-right' />\").appendTo($footerRowScrollerR);\n\n    $footerRow = $().add($footerRowL).add($footerRowR);\n\n    if (!options.showFooterRow){\n      $footerRowScroller.hide();\n    }\n\n    $focusSink2 = $focusSink.clone().appendTo($container);\n\n    if (!options.explicitInitialization){\n      finishInitialization();\n    }\n  }\n\n  function finishInitialization(){\n    if (!initialized){\n      initialized = true;\n\n      getViewportWidth();\n      getViewportHeight();\n\n      // header columns and cells may have different padding/border skewing width calculations (box-sizing, hello?)\n      // calculate the diff so we can set consistent sizes\n      measureCellPaddingAndBorder();\n\n      // for usability reasons, all text selection in SlickGrid is disabled\n      // with the exception of input and textarea elements (selection must\n      // be enabled there so that editors work as expected); note that\n      // selection in grid cells (grid body) is already unavailable in\n      // all browsers except IE\n      disableSelection($headers); // disable all text selection in header (including input and textarea)\n\n      if (!options.enableTextSelectionOnCells){\n        // disable text selection in grid cells except in input and textarea elements\n        // (this is IE-specific, because selectstart event will only fire in IE)\n        $viewport.bind(\"selectstart.ui\", function(event){\n          return $(event.target).is(\"input,textarea\");\n        });\n      }\n\n      setFrozenOptions();\n      setPaneVisibility();\n      setScroller();\n      setOverflow();\n\n      updateColumnCaches();\n      createColumnHeaders();\n      createColumnGroupHeaders();\n      createColumnFooter();\n      setupColumnSort();\n      createCssRules();\n      resizeCanvas();\n      bindAncestorScrollEvents();\n\n      $container.bind(\"resize.slickgrid\", resizeCanvas);\n      $viewport.on(\"scroll\", handleScroll);\n\n      if ($.fn.mousewheel && (options.frozenColumn > -1 || hasFrozenRows)){\n        $viewport.on(\"mousewheel\", handleMouseWheel);\n      }\n\n      $headerScroller.bind(\"contextmenu\", handleHeaderContextMenu)\n        .bind(\"click\", handleHeaderClick)\n        .delegate(\".slick-header-column\", \"mouseenter\", handleHeaderMouseEnter)\n        .delegate(\".slick-header-column\", \"mouseleave\", handleHeaderMouseLeave);\n      $headerRowScroller.bind(\"scroll\", handleHeaderRowScroll);\n\n      $footerRowScroller.bind(\"scroll\", handleFooterRowScroll);\n\n      $focusSink.add($focusSink2)\n        .bind(\"keydown\", handleKeyDown);\n      $canvas.bind(\"keydown\", handleKeyDown)\n        .bind(\"click\", handleClick)\n        .bind(\"dblclick\", handleDblClick)\n        .bind(\"contextmenu\", handleContextMenu)\n        .delegate(\".slick-cell\", \"mouseenter\", handleMouseEnter)\n        .delegate(\".slick-cell\", \"mouseleave\", handleMouseLeave);\n\n      // legacy support for drag events\n      interact($canvas[0]).allowFrom('div.slick-cell').draggable({\n        onmove: handleDrag,\n        onstart: handleDragStart,\n        onend: handleDragEnd\n      });\n\n      // Work around http://crbug.com/312427.\n      if (navigator.userAgent.toLowerCase().match(/webkit/) && navigator.userAgent.toLowerCase().match(/macintosh/)){\n        $canvas.on(\"mousewheel\", handleMouseWheel);\n      }\n    }\n  }\n\n  function hasFrozenColumns(){\n    return options.frozenColumn > -1;\n  }\n\n  function registerPlugin(plugin){\n    plugins.unshift(plugin);\n    plugin.init(self);\n  }\n\n  function unregisterPlugin(plugin){\n    for (var i = plugins.length; i >= 0; i--){\n      if (plugins[i] === plugin){\n        if (plugins[i].destroy){\n          plugins[i].destroy();\n        }\n        plugins.splice(i, 1);\n        break;\n      }\n    }\n  }\n\n  function setSelectionModel(model){\n    if (selectionModel){\n      selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);\n      if (selectionModel.destroy){\n        selectionModel.destroy();\n      }\n    }\n\n    selectionModel = model;\n    if (selectionModel){\n      selectionModel.init(self);\n      selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged);\n    }\n  }\n\n  function getSelectionModel(){\n    return selectionModel;\n  }\n\n  function getCanvasNode(){\n    return $canvas[0];\n  }\n\n  function getActiveCanvasNode(element){\n    setActiveCanvasNode(element);\n\n    return $activeCanvasNode[0];\n  }\n\n  function getCanvases(){\n    return $canvas;\n  }\n\n  function setActiveCanvasNode(element){\n    if (element){\n      $activeCanvasNode = $(element.target).closest('.grid-canvas');\n    }\n  }\n\n  function getViewportNode(){\n    return $viewport[0];\n  }\n\n  function getActiveViewportNode(element){\n    setActiveViewPortNode(element);\n\n    return $activeViewportNode[0];\n  }\n\n  function setActiveViewportNode(element){\n    if (element){\n      $activeViewportNode = $(element.target).closest('.slick-viewport');\n    }\n  }\n\n  function measureScrollbar(){\n    var $c = $(\"<div class='scrollbar-fix' style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>\").appendTo(document.body);\n    var dim = {\n      width: $c.width() - $c[0].clientWidth,\n      height: $c.height() - $c[0].clientHeight\n    };\n    $c.remove();\n    return dim;\n  }\n\n  function getHeadersWidth(){\n    headersWidth = headersWidthL = headersWidthR = 0;\n\n    for (var i = 0, ii = columns.length; i < ii; i++){\n      var width = columns[i].width;\n\n      if ((options.frozenColumn) > -1 && (i > options.frozenColumn)){\n        headersWidthR += width;\n      } else {\n        headersWidthL += width;\n      }\n    }\n\n    if (hasFrozenColumns()){\n      headersWidthL = headersWidthL + 1000;\n\n      headersWidthR = Math.max(headersWidthR, viewportW) + headersWidthL;\n      headersWidthR += scrollbarDimensions.width;\n    } else {\n      headersWidthL += scrollbarDimensions.width;\n      headersWidthL = Math.max(headersWidthL, viewportW) + 1000;\n    }\n\n    headersWidth = headersWidthL + headersWidthR;\n  }\n\n  function getHeadersWidthL(){\n    headersWidthL = 0;\n\n    columns.forEach(function(column, i){\n      if (!((options.frozenColumn) > -1 && (i > options.frozenColumn))) headersWidthL += column.width;\n    });\n\n    if (hasFrozenColumns()){\n      headersWidthL += 1000;\n    } else {\n      headersWidthL += scrollbarDimensions.width;\n      headersWidthL = Math.max(headersWidthL, viewportW) + 1000;\n    }\n\n    return headersWidthL;\n  }\n\n  function getHeadersWidthR(){\n    headersWidthR = 0;\n\n    columns.forEach(function(column, i){\n      if ((options.frozenColumn) > -1 && (i > options.frozenColumn)) headersWidthR += column.width;\n    });\n\n    if (hasFrozenColumns()){\n      headersWidthR = Math.max(headersWidthR, viewportW) + getHeadersWidthL();\n      headersWidthR += scrollbarDimensions.width;\n    }\n\n    return headersWidthR;\n  }\n\n  function getCanvasWidth(){\n    var availableWidth = viewportHasVScroll ? viewportW - scrollbarDimensions.width : viewportW;\n\n    var i = columns.length;\n\n    canvasWidthL = canvasWidthR = 0;\n\n    while (i--){\n      if (hasFrozenColumns() && (i > options.frozenColumn)){\n        canvasWidthR += columns[i].width;\n      } else {\n        canvasWidthL += columns[i].width;\n      }\n    }\n\n    var totalRowWidth = canvasWidthL + canvasWidthR;\n\n    return options.fullWidthRows ? Math.max(totalRowWidth, availableWidth) : totalRowWidth;\n  }\n\n  function updateCanvasWidth(forceColumnWidthsUpdate){\n    var oldCanvasWidth = canvasWidth;\n    var oldCanvasWidthL = canvasWidthL;\n    var oldCanvasWidthR = canvasWidthR;\n    var widthChanged;\n    canvasWidth = getCanvasWidth();\n\n    widthChanged = canvasWidth !== oldCanvasWidth || canvasWidthL !== oldCanvasWidthL || canvasWidthR !== oldCanvasWidthR;\n\n    if (widthChanged || hasFrozenColumns() || hasFrozenRows){\n      $canvasTopL.width(canvasWidthL);\n\n      getHeadersWidth();\n\n      $headerL.width(headersWidthL);\n      $headerR.width(headersWidthR);\n\n      if (hasFrozenColumns()){\n        $canvasTopR.width(canvasWidthR);\n\n        $paneHeaderL.width(canvasWidthL);\n        $paneHeaderR.css('left', canvasWidthL);\n        $paneHeaderR.css('width', viewportW - canvasWidthL);\n\n        $paneTopL.width(canvasWidthL);\n        $paneTopR.css('left', canvasWidthL);\n        $paneTopR.css('width', viewportW - canvasWidthL);\n\n        $headerRowScrollerL.width(canvasWidthL);\n        $headerRowScrollerR.width(viewportW - canvasWidthL);\n\n        $headerRowL.width(canvasWidthL);\n        $headerRowR.width(canvasWidthR);\n\n        $footerRowScrollerL.width(canvasWidthL);\n        $footerRowScrollerR.width(viewportW - canvasWidthL);\n\n        $footerRowL.width(canvasWidthL);\n        $footerRowR.width(canvasWidthR);\n\n        $viewportTopL.width(canvasWidthL);\n        $viewportTopR.width(viewportW - canvasWidthL);\n\n        if (hasFrozenRows){\n          $paneBottomL.width(canvasWidthL);\n          $paneBottomR.css('left', canvasWidthL);\n\n          $viewportBottomL.width(canvasWidthL);\n          $viewportBottomR.width(viewportW - canvasWidthL);\n\n          $canvasBottomL.width(canvasWidthL);\n          $canvasBottomR.width(canvasWidthR);\n        }\n      } else {\n        $paneHeaderL.width('100%');\n\n        $paneTopL.width('100%');\n\n        $headerRowScrollerL.width('100%');\n\n        $headerRowL.width(canvasWidth);\n\n        $footerRowScrollerL.width('100%');\n\n        $footerRowL.width(canvasWidth);\n\n        $viewportTopL.width('100%');\n\n        if (hasFrozenRows){\n          $viewportBottomL.width('100%');\n          $canvasBottomL.width(canvasWidthL);\n        }\n      }\n\n      viewportHasHScroll = (canvasWidth > viewportW - scrollbarDimensions.width);\n    }\n\n    $headerRowSpacerL.width(canvasWidth + (viewportHasVScroll ? scrollbarDimensions.width : 0));\n    $headerRowSpacerR.width(canvasWidth + (viewportHasVScroll ? scrollbarDimensions.width : 0));\n\n    $footerRowSpacerL.width(canvasWidth + (viewportHasVScroll ? scrollbarDimensions.width : 0));\n    $footerRowSpacerR.width(canvasWidth + (viewportHasVScroll ? scrollbarDimensions.width : 0));\n\n    if (widthChanged || forceColumnWidthsUpdate){\n      applyColumnWidths();\n    }\n  }\n\n  function disableSelection($target){\n    if ($target && $target.jquery){\n      $target.attr(\"unselectable\", \"on\")\n        .css(\"MozUserSelect\", \"none\")\n        .bind(\"selectstart.ui\", function(){\n          return false;\n        }); // from jquery:ui.core.js 1.7.2\n    }\n  }\n\n  function getMaxSupportedCssHeight(){\n    var supportedHeight = 1000000;\n    // FF reports the height back but still renders blank after ~6M px\n    var testUpTo = navigator.userAgent.toLowerCase().match(/firefox/) ? 6000000 : 1000000000;\n    var div = $(\"<div style='display:none' />\").appendTo(document.body);\n\n    while (true){\n      var test = supportedHeight * 2;\n      div.css(\"height\", test);\n      if (test > testUpTo || div.height() !== test){\n        break;\n      } else {\n        supportedHeight = test;\n      }\n    }\n\n    div.remove();\n    return supportedHeight;\n  }\n\n  // TODO:  this is static.  need to handle page mutation.\n  function bindAncestorScrollEvents(){\n    var elem = (hasFrozenRows && !options.frozenBottom) ? $canvasBottomL[0] : $canvasTopL[0];\n    while ((elem = elem.parentNode) != document.body && elem != null){\n      // bind to scroll containers only\n      if (elem == $viewportTopL[0] || elem.scrollWidth != elem.clientWidth || elem.scrollHeight != elem.clientHeight){\n        var $elem = $(elem);\n        if (!$boundAncestors){\n          $boundAncestors = $elem;\n        } else {\n          $boundAncestors = $boundAncestors.add($elem);\n        }\n        $elem.bind(\"scroll.\" + uid, handleActiveCellPositionChange);\n      }\n    }\n  }\n\n  function unbindAncestorScrollEvents(){\n    if (!$boundAncestors){\n      return;\n    }\n    $boundAncestors.unbind(\"scroll.\" + uid);\n    $boundAncestors = null;\n  }\n\n  function updateColumnHeader(columnId, title, toolTip){\n    if (!initialized){\n      return;\n    }\n    var idx = getColumnIndex(columnId);\n    if (idx == null){\n      return;\n    }\n\n    var columnDef = columns[idx];\n    var $header = $headers.children().eq(idx);\n    if ($header){\n      if (title !== undefined){\n        columns[idx].name = title;\n      }\n      if (toolTip !== undefined){\n        columns[idx].toolTip = toolTip;\n      }\n\n      trigger(self.onBeforeHeaderCellDestroy, {\n        \"node\": $header[0],\n        \"column\": columnDef\n      });\n\n      $header.attr(\"title\", toolTip || \"\")\n        .children().eq(0).html(title);\n\n      trigger(self.onHeaderCellRendered, {\n        \"node\": $header[0],\n        \"column\": columnDef\n      });\n    }\n  }\n\n  function getHeaderRow(){\n    return hasFrozenColumns() ? $headerRow : $headerRow[0];\n  }\n\n  function getHeaderRowColumn(columnId){\n    var idx = getColumnIndex(columnId);\n\n    var $headerRowTarget;\n\n    if (hasFrozenColumns()){\n      if (idx <= options.frozenColumn){\n        $headerRowTarget = $headerRowL;\n      } else {\n        $headerRowTarget = $headerRowR;\n\n        idx -= options.frozenColumn + 1;\n      }\n    } else {\n      $headerRowTarget = $headerRowL;\n    }\n\n    var $header = $headerRowTarget.children().eq(idx);\n    return $header && $header[0];\n  }\n\n  function getFooterRow(){\n    return hasFrozenColumns() ? $footerRow : $footerRow[0];\n  }\n\n  function getFooterRowColumn(columnId){\n    var idx = getColumnIndex(columnId);\n\n    var $footerRowTarget;\n\n    if (hasFrozenColumns()){\n      if (idx <= options.frozenColumn){\n        $footerRowTarget = $footerRowL;\n      } else {\n        $footerRowTarget = $footerRowR;\n\n        idx -= options.frozenColumn + 1;\n      }\n    } else {\n      $footerRowTarget = $footerRowL;\n    }\n\n    var $footer = $footerRowTarget.children().eq(idx);\n    return $footer && $footer[0];\n  }\n\n  function createColumnFooter(){\n    $footerRow.find(\".slick-footerrow-column\")\n      .each(function(){\n        var columnDef = $(this).data(\"column\");\n        if (columnDef){\n          trigger(self.onBeforeFooterRowCellDestroy, {\n            \"node\": this,\n            \"column\": columnDef\n          });\n        }\n      });\n\n    $footerRowL.empty();\n    $footerRowR.empty();\n\n    for (var i = 0; i < columns.length; i++){\n      var m = columns[i];\n\n      var footerRowCell = $(\"<div class='ui-state-default slick-footerrow-column l\" + i + \" r\" + i + \"'></div>\")\n        .data(\"column\", m)\n        .addClass(hasFrozenColumns() && i <= options.frozenColumn ? 'frozen' : '')\n        .appendTo(hasFrozenColumns() && (i > options.frozenColumn) ? $footerRowR : $footerRowL);\n\n      trigger(self.onFooterRowCellRendered, {\n        \"node\": footerRowCell[0],\n        \"column\": m\n      });\n    }\n  }\n\n  function createColumnGroupHeaders(){\n    var columnsLength = 0;\n    var frozenColumnsValid = false;\n\n    if (!treeColumns.hasDepth()) return;\n\n    for (var index = 0; index < $groupHeadersL.length; index++){\n\n      $groupHeadersL[index].empty();\n      $groupHeadersR[index].empty();\n\n      var groupColumns = treeColumns.getColumnsInDepth(index);\n\n      for (var indexGroup in groupColumns){\n        var m = groupColumns[indexGroup];\n\n        columnsLength += m.extractColumns().length;\n\n        if (hasFrozenColumns() && index == 0 && (columnsLength - 1) === options.frozenColumn) frozenColumnsValid = true;\n\n        $(\"<div class='ui-state-default slick-group-header-column' />\")\n          .html(\"<span class='slick-column-name'>\" + m.name + \"</span>\")\n          .attr(\"id\", \"\" + uid + m.id)\n          .attr(\"title\", m.toolTip || \"\")\n          .data(\"column\", m)\n          .addClass(m.headerCssClass || \"\")\n          .addClass(hasFrozenColumns() && (columnsLength - 1) <= options.frozenColumn ? 'frozen' : '')\n          .appendTo(hasFrozenColumns() && (columnsLength - 1) > options.frozenColumn ? $groupHeadersR[index] : $groupHeadersL[index]);\n      }\n\n      if (hasFrozenColumns() && index == 0 && !frozenColumnsValid){\n        $groupHeadersL[index].empty();\n        $groupHeadersR[index].empty();\n        alert(\"All columns of group should to be grouped!\");\n        break;\n      }\n    }\n\n    applyColumnGroupHeaderWidths();\n  }\n\n  function createColumnHeaders(){\n    function onMouseEnter(){\n      $(this).addClass(\"ui-state-hover\");\n    }\n\n    function onMouseLeave(){\n      $(this).removeClass(\"ui-state-hover\");\n    }\n\n    $headers.find(\".slick-header-column\")\n      .each(function(){\n        var columnDef = $(this).data(\"column\");\n        if (columnDef){\n          trigger(self.onBeforeHeaderCellDestroy, {\n            \"node\": this,\n            \"column\": columnDef\n          });\n        }\n      });\n\n    $headerL.empty();\n    $headerR.empty();\n\n    getHeadersWidth();\n\n    $headerL.width(headersWidthL);\n    $headerR.width(headersWidthR);\n\n    $headerRow.find(\".slick-headerrow-column\")\n      .each(function(){\n        var columnDef = $(this).data(\"column\");\n        if (columnDef){\n          trigger(self.onBeforeHeaderRowCellDestroy, {\n            \"node\": this,\n            \"column\": columnDef\n          });\n        }\n      });\n\n    $headerRowL.empty();\n    $headerRowR.empty();\n\n    for (var i = 0; i < columns.length; i++){\n      var m = columns[i];\n\n      var $headerTarget = hasFrozenColumns() ? ((i <= options.frozenColumn) ? $headerL : $headerR) : $headerL;\n      var $headerRowTarget = hasFrozenColumns() ? ((i <= options.frozenColumn) ? $headerRowL : $headerRowR) : $headerRowL;\n\n      var header = $(\"<div class='ui-state-default slick-header-column' />\")\n        .html(\"<span class='slick-column-name'>\" + m.name + \"</span>\")\n        .width(m.width - headerColumnWidthDiff)\n        .attr(\"id\", \"\" + uid + m.id)\n        .attr(\"title\", m.toolTip || \"\")\n        .data(\"column\", m)\n        .addClass(m.headerCssClass || \"\")\n        .addClass(hasFrozenColumns() && i <= options.frozenColumn ? 'frozen' : '')\n        .appendTo($headerTarget);\n\n      if (options.enableColumnReorder || m.sortable){\n        header.on('mouseenter', onMouseEnter)\n          .on('mouseleave', onMouseLeave);\n      }\n\n      if (m.sortable){\n        header.addClass(\"slick-header-sortable\");\n        header.append(\"<span class='slick-sort-indicator' />\");\n      }\n\n      trigger(self.onHeaderCellRendered, {\n        \"node\": header[0],\n        \"column\": m\n      });\n\n      if (options.showHeaderRow){\n        var headerRowCell = $(\"<div class='ui-state-default slick-headerrow-column l\" + i + \" r\" + i + \"'></div>\")\n          .data(\"column\", m)\n          .appendTo($headerRowTarget);\n\n        trigger(self.onHeaderRowCellRendered, {\n          \"node\": headerRowCell[0],\n          \"column\": m\n        });\n      }\n    }\n\n    setSortColumns(sortColumns);\n    setupColumnResize();\n    if (options.enableColumnReorder){\n      setupColumnReorder();\n    }\n  }\n\n  function setupColumnSort(){\n    $headers.click(function(e){\n      // temporary workaround for a bug in jQuery 1.7.1 (http://bugs.jquery.com/ticket/11328)\n      e.metaKey = e.metaKey || e.ctrlKey;\n\n      if ($(e.target).hasClass(\"slick-resizable-handle\")){\n        return;\n      }\n\n      var $col = $(e.target).closest(\".slick-header-column\");\n      if (!$col.length){\n        return;\n      }\n\n      var column = $col.data(\"column\");\n      if (column.sortable){\n        if (!getEditorLock().commitCurrentEdit()){\n          return;\n        }\n\n        var sortOpts = null;\n        var i = 0;\n        for (; i < sortColumns.length; i++){\n          if (sortColumns[i].columnId == column.id){\n            sortOpts = sortColumns[i];\n            sortOpts.sortAsc = !sortOpts.sortAsc;\n            break;\n          }\n        }\n\n        if (e.metaKey && options.multiColumnSort){\n          if (sortOpts){\n            sortColumns.splice(i, 1);\n          }\n        } else {\n          if ((!e.shiftKey && !e.metaKey) || !options.multiColumnSort){\n            sortColumns = [];\n          }\n\n          if (!sortOpts){\n            sortOpts = {\n              columnId: column.id,\n              sortAsc: column.defaultSortAsc\n            };\n            sortColumns.push(sortOpts);\n          } else if (sortColumns.length == 0){\n            sortColumns.push(sortOpts);\n          }\n        }\n\n        setSortColumns(sortColumns);\n\n        if (!options.multiColumnSort){\n          trigger(self.onSort, {\n            multiColumnSort: false,\n            sortCol: column,\n            sortAsc: sortOpts.sortAsc\n          }, e);\n        } else {\n          trigger(self.onSort, {\n            multiColumnSort: true,\n            sortCols: $.map(sortColumns, function(col){\n              return {\n                sortCol: columns[getColumnIndex(col.columnId)],\n                sortAsc: col.sortAsc\n              };\n            })\n          }, e);\n        }\n      }\n    });\n  }\n\n  function currentPositionInHeader(id){\n    var currentPosition = 0;\n    $headers.find('.slick-header-column').each(function(i){\n      if (this.id == id){\n        currentPosition = i;\n        return false;\n      }\n    });\n\n    return currentPosition;\n  }\n\n  function limitPositionInGroup(idColumn){\n    var groupColumnOfPreviousPosition,\n      startLimit = 0,\n      endLimit = 0;\n\n    treeColumns.getColumnsInDepth($groupHeadersL.length - 1)\n      .some(function(groupColumn){\n        startLimit = endLimit;\n        endLimit += groupColumn.columns.length;\n\n        groupColumn.columns.some(function(column){\n\n          if (column.id === idColumn) groupColumnOfPreviousPosition = groupColumn;\n\n          return groupColumnOfPreviousPosition;\n        });\n\n        return groupColumnOfPreviousPosition;\n      });\n\n    endLimit--;\n\n    return {\n      start: startLimit,\n      end: endLimit,\n      group: groupColumnOfPreviousPosition\n    }\n  }\n\n  function remove(arr, elem){\n    var index = arr.lastIndexOf(elem);\n    if (index > -1){\n      arr.splice(index, 1);\n      remove(arr, elem);\n    }\n  }\n\n  function columnPositionValidInGroup($item){\n    var currentPosition = currentPositionInHeader($item[0].id);\n    var limit = limitPositionInGroup($item.data('column').id);\n    var positionValid = limit.start <= currentPosition && currentPosition <= limit.end;\n\n    return {\n      limit: limit,\n      valid: positionValid,\n      message: positionValid ? '' : 'Column \"'.concat($item.text(), '\" can be reordered only within the \"', limit.group.name, '\" group!')\n    };\n  }\n\n  function setupColumnReorder(){\n    let x = 0;\n    let delta = 0;\n    let placeholder = document.createElement('div');\n\n    placeholder.className = 'interact-placeholder';\n\n    interact('.slick-header-column')\n      .ignoreFrom('.slick-resizable-handle')\n      .draggable({\n        inertia: true,\n        // keep the element within the area of it's parent\n        restrict: {\n          restriction: 'parent',\n          endOnly: true,\n          elementRect: {top: 0, left: 0, bottom: 0, right: 0}\n        },\n        // enable autoScroll\n        autoScroll: true,\n        axis: 'x',\n        onstart: event => {\n          x = 0;\n          delta = event.target.offsetWidth;\n\n          // get old order\n          $headers.find('.slick-header-column').each(function(index){\n            $(this).data('index', index);\n          });\n\n          placeholder.style.height = event.target.offsetHeight + 'px';\n          placeholder.style.width = delta + 'px';\n\n          $(event.target).after(placeholder).css({\n            position: 'absolute',\n            zIndex: 1000,\n            marginLeft: $(event.target).position().left - 1000\n          });\n        },\n\n        onmove: event => {\n          x += event.dx;\n          event.target.style.transform = `translate3d(${x}px, -3px, 100px)`;\n          // event.target.style.marginLeft = x + 'px';\n        },\n\n        onend: event => {\n          x = 0;\n          delta = 0;\n\n          if (treeColumns.hasDepth()) {\n            var validPositionInGroup = columnPositionValidInGroup($(event.target));\n            var limit = validPositionInGroup.limit;\n\n            var cancel = !validPositionInGroup.valid;\n\n            if (cancel)\n              alert(validPositionInGroup.message);\n          }\n\n          placeholder.parentNode.removeChild(placeholder);\n\n          if (cancel){\n            event.target.style.transform = 'none';\n            setColumns(getColumns());\n            return;\n          }\n\n          $(event.target).css({\n            position: 'relative',\n            zIndex: '',\n            marginLeft: 0,\n            transform: 'none'\n          });\n\n          const newColumns = [];\n          $headers.find('.slick-header-column').each(function(index){\n            newColumns.push(columns[$(this).data('index')]);\n            $(this).removeData('index');\n          });\n\n          setColumns(newColumns);\n\n          trigger(self.onColumnsReordered, { impactedColumns : getImpactedColumns( limit ), grid: self });\n          setupColumnResize();\n        }\n      })\n      .dropzone({\n        accept: '.slick-header-column',\n\n        ondragenter: event => {\n          event.target.classList.add('interact-drop-active');\n          event.relatedTarget.classList.add('interact-can-drop');\n        },\n\n        ondragleave: event => {\n          event.target.classList.remove('interact-drop-active');\n          event.relatedTarget.classList.remove('interact-can-drop');\n        },\n\n        ondrop: event => {\n          event.target.classList.remove('interact-drop-active');\n          event.relatedTarget.classList.remove('interact-can-drop');\n          $(event.target)[x > 0 ? 'after' : 'before'](event.relatedTarget);\n        }\n      });\n  }\n\n  function getImpactedColumns(limit){\n    var impactedColumns = [];\n\n    if (limit != undefined){\n\n      for (var i = limit.start; i <= limit.end; i++){\n        impactedColumns.push(columns[i]);\n      }\n    } else {\n\n      impactedColumns = columns;\n    }\n\n    return impactedColumns;\n  }\n\n  function setupColumnResize(){\n    var $col, j, c, pageX, columnElements, minPageX, maxPageX, firstResizable, lastResizable;\n    columnElements = $headers.children();\n    columnElements.find('.slick-resizable-handle').remove();\n    columnElements.each(function(i, e){\n      if (columns[i].resizable){\n        if (firstResizable === undefined){\n          firstResizable = i;\n        }\n        lastResizable = i;\n      }\n    });\n    if (firstResizable === undefined){\n      return;\n    }\n    columnElements.each(function(i, element){\n      if (i < firstResizable || (options.forceFitColumns && i >= lastResizable)){\n        return;\n      }\n      $col = $(element);\n\n      const $handle = $(\"<div class='slick-resizable-handle' />\");\n      $handle.appendTo(element);\n\n      if ($col.data('resizable'))\n        return;\n\n      const activeColumn = columns[i];\n      if (activeColumn.resizable){\n        $col.data('resizable', true);\n        interact(element).resizable({\n          preserveAspectRatio: false,\n          edges: { left: true, right: true, bottom: false, top: false }\n        }).on('resizestart', function(event){\n          if (!getEditorLock().commitCurrentEdit()){\n            return false;\n          }\n          activeColumn.previousWidth = event.rect.width;\n          event.target.classList.add('slick-header-column-active');\n        }).on('resizemove', function(event){\n          let x = event.dx;\n          let width = activeColumn.width += x;\n\n          if (activeColumn.minWidth > 0 && activeColumn.minWidth > width)\n            width = activeColumn.minWidth;\n          else if (activeColumn.maxWidth > 0 && activeColumn.maxWidth < width)\n            width = activeColumn.maxWidth;\n\n          activeColumn.width = width;\n\n          if (options.forceFitColumns){\n            autosizeColumns();\n          }\n          applyColumnHeaderWidths();\n          if (options.syncColumnCellResize){\n            applyColumnWidths();\n          }\n        }).on('resizeend', function(event){\n          event.target.classList.remove('slick-header-column-active');\n          if (treeColumns.hasDepth())\n            createColumnGroupHeaders();\n\n          invalidateAllRows();\n          updateCanvasWidth(true);\n          render();\n          trigger(self.onColumnsResized, {grid: self});\n        });\n      }\n    });\n  }\n\n  function getVBoxDelta($el){\n    var p = [\"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\"];\n    var delta = 0;\n    $.each(p, function(n, val){\n      delta += parseFloat($el.css(val)) || 0;\n    });\n    return delta;\n  }\n\n  function setFrozenOptions(){\n    options.frozenColumn = (options.frozenColumn >= 0 && options.frozenColumn < columns.length) ? parseInt(options.frozenColumn) : -1;\n\n    options.frozenRow = (options.frozenRow >= 0 && options.frozenRow < numVisibleRows) ? parseInt(options.frozenRow) : -1;\n\n    if (options.frozenRow > -1){\n      hasFrozenRows = true;\n      frozenRowsHeight = (options.frozenRow) * options.rowHeight;\n\n      var dataLength = getDataLength() || this.data.length;\n\n      actualFrozenRow = (options.frozenBottom) ? (dataLength - options.frozenRow) : options.frozenRow;\n    } else {\n      hasFrozenRows = false;\n    }\n  }\n\n  function setPaneVisibility(){\n    if (hasFrozenColumns()){\n      $paneHeaderR.show();\n      $paneTopR.show();\n\n      if (hasFrozenRows){\n        $paneBottomL.show();\n        $paneBottomR.show();\n      } else {\n        $paneBottomR.hide();\n        $paneBottomL.hide();\n      }\n    } else {\n      $paneHeaderR.hide();\n      $paneTopR.hide();\n      $paneBottomR.hide();\n\n      if (hasFrozenRows){\n        $paneBottomL.show();\n      } else {\n        $paneBottomR.hide();\n        $paneBottomL.hide();\n      }\n    }\n  }\n\n  function setOverflow(){\n    $viewportTopL.css({\n      'overflow-x': (hasFrozenColumns()) ? (hasFrozenRows ? 'hidden' : 'scroll') : (hasFrozenRows ? 'hidden' : 'auto'),\n      'overflow-y': (hasFrozenColumns()) ? (hasFrozenRows ? 'hidden' : 'hidden') : (hasFrozenRows ? 'scroll' : 'auto')\n    });\n\n    $viewportTopR.css({\n      'overflow-x': (hasFrozenColumns()) ? (hasFrozenRows ? 'hidden' : 'scroll') : (hasFrozenRows ? 'hidden' : 'auto'),\n      'overflow-y': (hasFrozenColumns()) ? (hasFrozenRows ? 'scroll' : 'auto') : (hasFrozenRows ? 'scroll' : 'auto')\n    });\n\n    $viewportBottomL.css({\n      'overflow-x': (hasFrozenColumns()) ? (hasFrozenRows ? 'scroll' : 'auto') : (hasFrozenRows ? 'auto' : 'auto'),\n      'overflow-y': (hasFrozenColumns()) ? (hasFrozenRows ? 'hidden' : 'hidden') : (hasFrozenRows ? 'scroll' : 'auto')\n    });\n\n    $viewportBottomR.css({\n      'overflow-x': (hasFrozenColumns()) ? (hasFrozenRows ? 'scroll' : 'auto') : (hasFrozenRows ? 'auto' : 'auto'),\n      'overflow-y': (hasFrozenColumns()) ? (hasFrozenRows ? 'auto' : 'auto') : (hasFrozenRows ? 'auto' : 'auto')\n    });\n  }\n\n  function setScroller(){\n    if (hasFrozenColumns()){\n      $headerScrollContainer = $headerScrollerR;\n      $headerRowScrollContainer = $headerRowScrollerR;\n      $footerRowScrollContainer = $footerRowScrollerR\n\n      if (hasFrozenRows){\n        if (options.frozenBottom){\n          $viewportScrollContainerX = $viewportBottomR;\n          $viewportScrollContainerY = $viewportTopR;\n        } else {\n          $viewportScrollContainerX = $viewportScrollContainerY = $viewportBottomR;\n        }\n      } else {\n        $viewportScrollContainerX = $viewportScrollContainerY = $viewportTopR;\n      }\n    } else {\n      $headerScrollContainer = $headerScrollerL;\n      $headerRowScrollContainer = $headerRowScrollerL;\n      $footerRowScrollContainer = $footerRowScrollerL;\n\n      if (hasFrozenRows){\n        if (options.frozenBottom){\n          $viewportScrollContainerX = $viewportBottomL;\n          $viewportScrollContainerY = $viewportTopL;\n        } else {\n          $viewportScrollContainerX = $viewportScrollContainerY = $viewportBottomL;\n        }\n      } else {\n        $viewportScrollContainerX = $viewportScrollContainerY = $viewportTopL;\n      }\n    }\n  }\n\n  function measureCellPaddingAndBorder(){\n    var el;\n    var h = [\"borderLeftWidth\", \"borderRightWidth\", \"paddingLeft\", \"paddingRight\"];\n    var v = [\"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\"];\n\n    el = $(\"<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>\").appendTo($headers);\n    headerColumnWidthDiff = headerColumnHeightDiff = 0;\n    if (el.css(\"box-sizing\") != \"border-box\" && el.css(\"-moz-box-sizing\") != \"border-box\" && el.css(\"-webkit-box-sizing\") != \"border-box\"){\n      $.each(h, function(n, val){\n        headerColumnWidthDiff += parseFloat(el.css(val)) || 0;\n      });\n      $.each(v, function(n, val){\n        headerColumnHeightDiff += parseFloat(el.css(val)) || 0;\n      });\n    }\n    el.remove();\n\n    var r = $(\"<div class='slick-row' />\").appendTo($canvas);\n    el = $(\"<div class='slick-cell' id='' style='visibility:hidden'>-</div>\").appendTo(r);\n    cellWidthDiff = cellHeightDiff = 0;\n    if (el.css(\"box-sizing\") != \"border-box\" && el.css(\"-moz-box-sizing\") != \"border-box\" && el.css(\"-webkit-box-sizing\") != \"border-box\"){\n      $.each(h, function(n, val){\n        cellWidthDiff += parseFloat(el.css(val)) || 0;\n      });\n      $.each(v, function(n, val){\n        cellHeightDiff += parseFloat(el.css(val)) || 0;\n      });\n    }\n    r.remove();\n\n    absoluteColumnMinWidth = Math.max(headerColumnWidthDiff, cellWidthDiff);\n  }\n\n  function createCssRules(){\n    $style = $(\"<style type='text/css' rel='stylesheet' />\").appendTo($(\"head\"));\n    var rowHeight = (options.rowHeight - cellHeightDiff);\n    var rules = [\".\" + uid + \" .slick-group-header-column { left: 1000px; }\", \".\" + uid + \" .slick-header-column { left: 1000px; }\", \".\" + uid + \" .slick-top-panel { height:\" + options.topPanelHeight + \"px; }\", \".\" + uid + \" .slick-headerrow-columns { height:\" + options.headerRowHeight + \"px; }\", \".\" + uid + \" .slick-cell { height:\" + rowHeight + \"px; }\", \".\" + uid + \" .slick-row { height:\" + options.rowHeight + \"px; }\", \".\" + uid + \" .slick-footerrow-columns { height:\" + options.footerRowHeight + \"px; }\"];\n\n    for (var i = 0; i < columns.length; i++){\n      rules.push(\".\" + uid + \" .l\" + i + \" { }\");\n      rules.push(\".\" + uid + \" .r\" + i + \" { }\");\n    }\n\n    if ($style[0].styleSheet){ // IE\n      $style[0].styleSheet.cssText = rules.join(\" \");\n    } else {\n      $style[0].appendChild(document.createTextNode(rules.join(\" \")));\n    }\n  }\n\n  function getColumnCssRules(idx){\n    if (!stylesheet){\n      var sheets = document.styleSheets;\n      for (var i = 0; i < sheets.length; i++){\n        if ((sheets[i].ownerNode || sheets[i].owningElement) == $style[0]){\n          stylesheet = sheets[i];\n          break;\n        }\n      }\n\n      if (!stylesheet){\n        throw new Error(\"Cannot find stylesheet.\");\n      }\n\n      // find and cache column CSS rules\n      columnCssRulesL = [];\n      columnCssRulesR = [];\n      var cssRules = (stylesheet.cssRules || stylesheet.rules);\n      var matches, columnIdx;\n      for (var i = 0; i < cssRules.length; i++){\n        var selector = cssRules[i].selectorText;\n        if (matches = /\\.l\\d+/.exec(selector)){\n          columnIdx = parseInt(matches[0].substr(2, matches[0].length - 2), 10);\n          columnCssRulesL[columnIdx] = cssRules[i];\n        } else if (matches = /\\.r\\d+/.exec(selector)){\n          columnIdx = parseInt(matches[0].substr(2, matches[0].length - 2), 10);\n          columnCssRulesR[columnIdx] = cssRules[i];\n        }\n      }\n    }\n\n    return {\n      \"left\": columnCssRulesL[idx],\n      \"right\": columnCssRulesR[idx]\n    };\n  }\n\n  function removeCssRules(){\n    $style.remove();\n    stylesheet = null;\n  }\n\n  function destroy(){\n    getEditorLock().cancelCurrentEdit();\n\n    trigger(self.onBeforeDestroy, {});\n\n    var i = plugins.length;\n    while (i--){\n      unregisterPlugin(plugins[i]);\n    }\n\n    if (options.enableColumnReorder){\n      $headers.filter(\":ui-sortable\").sortable(\"destroy\");\n    }\n\n    unbindAncestorScrollEvents();\n    $container.unbind(\".slickgrid\");\n    removeCssRules();\n\n    $canvas.unbind(\"draginit dragstart dragend drag\");\n    $container.empty().removeClass(uid);\n  }\n\n  //////////////////////////////////////////////////////////////////////////////////////////////\n  // General\n\n  function trigger(evt, args, e){\n    e = e || new Slick.EventData();\n    args = args || {};\n    args.grid = self;\n    return evt.notify(args, e, self);\n  }\n\n  function getEditorLock(){\n    return options.editorLock;\n  }\n\n  function getEditController(){\n    return editController;\n  }\n\n  function getColumnIndex(id){\n    return columnsById[id];\n  }\n\n  function autosizeColumns(){\n    var i, c,\n      widths = [],\n      shrinkLeeway = 0,\n      total = 0,\n      prevTotal,\n      availWidth = viewportHasVScroll ? viewportW - scrollbarDimensions.width : viewportW;\n\n    for (i = 0; i < columns.length; i++){\n      c = columns[i];\n      widths.push(c.width);\n      total += c.width;\n      if (c.resizable){\n        shrinkLeeway += c.width - Math.max(c.minWidth, absoluteColumnMinWidth);\n      }\n    }\n\n    // shrink\n    prevTotal = total;\n    while (total > availWidth && shrinkLeeway){\n      var shrinkProportion = (total - availWidth) / shrinkLeeway;\n      for (i = 0; i < columns.length && total > availWidth; i++){\n        c = columns[i];\n        var width = widths[i];\n        if (!c.resizable || width <= c.minWidth || width <= absoluteColumnMinWidth){\n          continue;\n        }\n        var absMinWidth = Math.max(c.minWidth, absoluteColumnMinWidth);\n        var shrinkSize = Math.floor(shrinkProportion * (width - absMinWidth)) || 1;\n        shrinkSize = Math.min(shrinkSize, width - absMinWidth);\n        total -= shrinkSize;\n        shrinkLeeway -= shrinkSize;\n        widths[i] -= shrinkSize;\n      }\n      if (prevTotal <= total){ // avoid infinite loop\n        break;\n      }\n      prevTotal = total;\n    }\n\n    // grow\n    prevTotal = total;\n    while (total < availWidth){\n      var growProportion = availWidth / total;\n      for (i = 0; i < columns.length && total < availWidth; i++){\n        c = columns[i];\n        var currentWidth = widths[i];\n        var growSize;\n\n        if (!c.resizable || c.maxWidth <= currentWidth){\n          growSize = 0;\n        } else {\n          growSize = Math.min(Math.floor(growProportion * currentWidth) - currentWidth, (c.maxWidth - currentWidth) || 1000000) || 1;\n        }\n        total += growSize;\n        widths[i] += growSize;\n      }\n      if (prevTotal >= total){ // avoid infinite loop\n        break;\n      }\n      prevTotal = total;\n    }\n\n    var reRender = false;\n    for (i = 0; i < columns.length; i++){\n      if (columns[i].rerenderOnResize && columns[i].width != widths[i]){\n        reRender = true;\n      }\n      columns[i].width = widths[i];\n    }\n\n    applyColumnHeaderWidths();\n    applyColumnGroupHeaderWidths();\n    updateCanvasWidth(true);\n    if (reRender){\n      invalidateAllRows();\n      render();\n    }\n  }\n\n  function applyColumnGroupHeaderWidths(){\n    if (!treeColumns.hasDepth()) return;\n\n    for (var depth = $groupHeadersL.length - 1; depth >= 0; depth--){\n\n      var groupColumns = treeColumns.getColumnsInDepth(depth);\n\n      $().add($groupHeadersL[depth]).add($groupHeadersR[depth]).each(function(i){\n        var $groupHeader = $(this),\n          currentColumnIndex = 0;\n\n        $groupHeader.width(i == 0 ? getHeadersWidthL() : getHeadersWidthR());\n\n        $groupHeader.children().each(function(){\n          var $groupHeaderColumn = $(this);\n\n          var m = $(this).data('column');\n\n          m.width = 0;\n\n          m.columns.forEach(function(){\n            var $headerColumn = $groupHeader.next().children(':eq(' + (currentColumnIndex++) + ')');\n            m.width += $headerColumn.outerWidth();\n          })\n\n          $groupHeaderColumn.width(m.width - headerColumnWidthDiff);\n\n        });\n\n      })\n\n    }\n  }\n\n  function applyColumnHeaderWidths(){\n    if (!initialized){\n      return;\n    }\n    var h;\n    for (var i = 0, headers = $headers.children(), ii = headers.length; i < ii; i++){\n      h = $(headers[i]);\n      if (h.width() !== columns[i].width - headerColumnWidthDiff){\n        h.width(columns[i].width - headerColumnWidthDiff);\n      }\n    }\n\n    updateColumnCaches();\n  }\n\n  function applyColumnWidths(){\n    var x = 0,\n      w, rule;\n    for (var i = 0; i < columns.length; i++){\n      w = columns[i].width;\n\n      rule = getColumnCssRules(i);\n      rule.left.style.left = x + \"px\";\n      rule.right.style.right = (((options.frozenColumn != -1 && i > options.frozenColumn) ? canvasWidthR : canvasWidthL) - x - w) + \"px\";\n\n      // If this column is frozen, reset the css left value since the\n      // column starts in a new viewport.\n      if (options.frozenColumn == i){\n        x = 0;\n      } else {\n        x += columns[i].width;\n      }\n    }\n  }\n\n  function setSortColumn(columnId, ascending){\n    setSortColumns([{\n      columnId: columnId,\n      sortAsc: ascending\n    }]);\n  }\n\n  function setSortColumns(cols){\n    sortColumns = cols;\n\n    var headerColumnEls = $headers.children();\n    headerColumnEls.removeClass(\"slick-header-column-sorted\")\n      .find(\".slick-sort-indicator\")\n      .removeClass(\"slick-sort-indicator-asc slick-sort-indicator-desc\");\n\n    $.each(sortColumns, function(i, col){\n      if (col.sortAsc == null){\n        col.sortAsc = true;\n      }\n      var columnIndex = getColumnIndex(col.columnId);\n      if (columnIndex != null){\n        headerColumnEls.eq(columnIndex)\n          .addClass(\"slick-header-column-sorted\")\n          .find(\".slick-sort-indicator\")\n          .addClass(col.sortAsc ? \"slick-sort-indicator-asc\" : \"slick-sort-indicator-desc\");\n      }\n    });\n  }\n\n  function getSortColumns(){\n    return sortColumns;\n  }\n\n  function handleSelectedRangesChanged(e, ranges){\n    selectedRows = [];\n    var hash = {};\n    for (var i = 0; i < ranges.length; i++){\n      for (var j = ranges[i].fromRow; j <= ranges[i].toRow; j++){\n        if (!hash[j]){ // prevent duplicates\n          selectedRows.push(j);\n          hash[j] = {};\n        }\n        for (var k = ranges[i].fromCell; k <= ranges[i].toCell; k++){\n          if (canCellBeSelected(j, k)){\n            hash[j][columns[k].id] = options.selectedCellCssClass;\n          }\n        }\n      }\n    }\n\n    setCellCssStyles(options.selectedCellCssClass, hash);\n\n    trigger(self.onSelectedRowsChanged, {\n      rows: getSelectedRows()\n    }, e);\n  }\n\n  function getColumns(){\n    return columns;\n  }\n\n  function updateColumnCaches(){\n    // Pre-calculate cell boundaries.\n    columnPosLeft = [];\n    columnPosRight = [];\n    var x = 0;\n    for (var i = 0, ii = columns.length; i < ii; i++){\n      columnPosLeft[i] = x;\n      columnPosRight[i] = x + columns[i].width;\n\n      if (options.frozenColumn == i){\n        x = 0;\n      } else {\n        x += columns[i].width;\n      }\n    }\n  }\n\n  function setColumns(columnDefinitions){\n    var _treeColumns = new Slick.TreeColumns(columnDefinitions);\n    if (_treeColumns.hasDepth()){\n      treeColumns = _treeColumns;\n      columns = treeColumns.extractColumns();\n    } else {\n      columns = columnDefinitions;\n    }\n\n    columnsById = {};\n    for (var i = 0; i < columns.length; i++){\n      var m = columns[i] = $.extend({}, columnDefaults, columns[i]);\n      columnsById[m.id] = i;\n      if (m.minWidth && m.width < m.minWidth){\n        m.width = m.minWidth;\n      }\n      if (m.maxWidth && m.width > m.maxWidth){\n        m.width = m.maxWidth;\n      }\n    }\n\n    updateColumnCaches();\n\n    if (initialized){\n      setPaneVisibility();\n      setOverflow();\n\n      invalidateAllRows();\n      createColumnHeaders();\n      createColumnGroupHeaders();\n      createColumnFooter();\n      removeCssRules();\n      createCssRules();\n      resizeCanvas();\n      updateCanvasWidth();\n      applyColumnWidths();\n      handleScroll();\n    }\n  }\n\n  function getOptions(){\n    return options;\n  }\n\n  function setOptions(args){\n    if (!getEditorLock().commitCurrentEdit()){\n      return;\n    }\n\n    makeActiveCellNormal();\n\n    if (options.enableAddRow !== args.enableAddRow){\n      invalidateRow(getDataLength());\n    }\n\n    options = $.extend(options, args);\n    validateAndEnforceOptions();\n\n    setFrozenOptions();\n    setScroller();\n    zombieRowNodeFromLastMouseWheelEvent = null;\n\n    setColumns(treeColumns.extractColumns());\n    render();\n  }\n\n  function validateAndEnforceOptions(){\n    if (options.autoHeight){\n      options.leaveSpaceForNewRows = false;\n    }\n  }\n\n  function setData(newData, scrollToTop){\n    data = newData;\n    invalidateAllRows();\n    updateRowCount();\n    if (scrollToTop){\n      scrollTo(0);\n    }\n  }\n\n  function getData(){\n    return data;\n  }\n\n  function getDataLength(){\n    if (data.getLength){\n      return data.getLength();\n    } else {\n      return data.length;\n    }\n  }\n\n  function getDataLengthIncludingAddNew(){\n    return getDataLength() + (options.enableAddRow ? 1 : 0);\n  }\n\n  function getDataItem(i){\n    if (data.getItem){\n      return data.getItem(i);\n    } else {\n      return data[i];\n    }\n  }\n\n  function getTopPanel(){\n    return $topPanel[0];\n  }\n\n  function setTopPanelVisibility(visible){\n    if (options.showTopPanel != visible){\n      options.showTopPanel = visible;\n      if (visible){\n        $topPanelScroller.slideDown(\"fast\", resizeCanvas);\n      } else {\n        $topPanelScroller.slideUp(\"fast\", resizeCanvas);\n      }\n    }\n  }\n\n  function setHeaderRowVisibility(visible){\n    if (options.showHeaderRow != visible){\n      options.showHeaderRow = visible;\n      if (visible){\n        $headerRowScroller.slideDown(\"fast\", resizeCanvas);\n      } else {\n        $headerRowScroller.slideUp(\"fast\", resizeCanvas);\n      }\n    }\n  }\n\n  function setFooterRowVisibility(visible){\n    if (options.showFooterRow != visible){\n      options.showFooterRow = visible;\n      if (visible){\n        $footerRowScroller.fadeIn(\"fast\", resizeCanvas);\n      } else {\n        $footerRowScroller.slideDown(\"fast\", resizeCanvas);\n      }\n    }\n  }\n\n  function getContainerNode(){\n    return $container.get(0);\n  }\n\n  //////////////////////////////////////////////////////////////////////////////////////////////\n  // Rendering / Scrolling\n\n  function getRowTop(row){\n    return options.rowHeight * row - offset;\n  }\n\n  function getRowFromPosition(y){\n    return Math.floor((y + offset) / options.rowHeight);\n  }\n\n  function scrollTo(y){\n    y = Math.max(y, 0);\n    y = Math.min(y, th - $viewportScrollContainerY.height() + ((viewportHasHScroll || hasFrozenColumns()) ? scrollbarDimensions.height : 0));\n\n    var oldOffset = offset;\n\n    page = Math.min(n - 1, Math.floor(y / ph));\n    offset = Math.round(page * cj);\n    var newScrollTop = y - offset;\n\n    if (offset != oldOffset){\n      var range = getVisibleRange(newScrollTop);\n      cleanupRows(range);\n      updateRowPositions();\n    }\n\n    if (prevScrollTop != newScrollTop){\n      vScrollDir = (prevScrollTop + oldOffset < newScrollTop + offset) ? 1 : -1;\n\n      lastRenderedScrollTop = (scrollTop = prevScrollTop = newScrollTop);\n\n      if (hasFrozenColumns()){\n        $viewportTopL[0].scrollTop = newScrollTop;\n      }\n\n      if (hasFrozenRows){\n        $viewportBottomL[0].scrollTop = $viewportBottomR[0].scrollTop = newScrollTop;\n      }\n\n      $viewportScrollContainerY[0].scrollTop = newScrollTop;\n\n      trigger(self.onViewportChanged, {});\n    }\n  }\n\n  function defaultFormatter(row, cell, value, columnDef, dataContext){\n    if (value == null){\n      return \"\";\n    } else {\n      return (value + \"\").replace(/&/g, \"&\").replace(/</g, \"<\").replace(/>/g, \">\");\n    }\n  }\n\n  function getFormatter(row, column){\n    var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);\n\n    // look up by id, then index\n    var columnOverrides = rowMetadata && rowMetadata.columns && (rowMetadata.columns[column.id] || rowMetadata.columns[getColumnIndex(column.id)]);\n\n    return (columnOverrides && columnOverrides.formatter) || (rowMetadata && rowMetadata.formatter) || column.formatter || (options.formatterFactory && options.formatterFactory.getFormatter(column)) || options.defaultFormatter;\n  }\n\n  function callFormatter(row, cell, value, m, item){\n\n    var result;\n\n    // pass metadata to formatter\n    var metadata = data.getItemMetadata && data.getItemMetadata(row);\n    metadata = metadata && metadata.columns;\n\n    if (metadata){\n      var columnData = metadata[m.id] || metadata[cell];\n      result = getFormatter(row, m)(row, cell, value, m, item, columnData);\n    } else {\n      result = getFormatter(row, m)(row, cell, value, m, item);\n    }\n\n    return result;\n  }\n\n  function getEditor(row, cell){\n    var column = columns[cell];\n    var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);\n    var columnMetadata = rowMetadata && rowMetadata.columns;\n\n    if (columnMetadata && columnMetadata[column.id] && columnMetadata[column.id].editor !== undefined){\n      return columnMetadata[column.id].editor;\n    }\n    if (columnMetadata && columnMetadata[cell] && columnMetadata[cell].editor !== undefined){\n      return columnMetadata[cell].editor;\n    }\n\n    return column.editor || (options.editorFactory && options.editorFactory.getEditor(column));\n  }\n\n  function getDataItemValueForColumn(item, columnDef){\n    if (options.dataItemColumnValueExtractor){\n      return options.dataItemColumnValueExtractor(item, columnDef);\n    }\n    return item[columnDef.field];\n  }\n\n  function appendRowHtml(stringArrayL, stringArrayR, row, range, dataLength){\n    var d = getDataItem(row);\n    var dataLoading = row < dataLength && !d;\n    var rowCss = \"slick-row\" + (hasFrozenRows && row < options.frozenRow ? ' frozen' : '') + (dataLoading ? \" loading\" : \"\") + (row === activeRow ? \" active\" : \"\") + (row % 2 == 1 ? \" odd\" : \" even\");\n\n    if (!d){\n      rowCss += \" \" + options.addNewRowCssClass;\n    }\n\n    var metadata = data.getItemMetadata && data.getItemMetadata(row);\n\n    if (metadata && metadata.cssClasses){\n      rowCss += \" \" + metadata.cssClasses;\n    }\n\n    var frozenRowOffset = getFrozenRowOffset(row);\n\n    var rowHtml = \"<div class='ui-widget-content \" + rowCss + \"' style='top:\" + (getRowTop(row) - frozenRowOffset) + \"px'>\";\n\n    stringArrayL.push(rowHtml);\n\n    if (hasFrozenColumns()){\n      stringArrayR.push(rowHtml);\n    }\n\n    var colspan, m;\n    for (var i = 0, ii = columns.length; i < ii; i++){\n      m = columns[i];\n      colspan = 1;\n      if (metadata && metadata.columns){\n        var columnData = metadata.columns[m.id] || metadata.columns[i];\n        colspan = (columnData && columnData.colspan) || 1;\n        if (colspan === \"*\"){\n          colspan = ii - i;\n        }\n      }\n\n      // Do not render cells outside of the viewport.\n      if (columnPosRight[Math.min(ii - 1, i + colspan - 1)] > range.leftPx){\n        if (columnPosLeft[i] > range.rightPx){\n          // All columns to the right are outside the range.\n          break;\n        }\n\n        if (hasFrozenColumns() && (i > options.frozenColumn)){\n          appendCellHtml(stringArrayR, row, i, colspan, d);\n        } else {\n          appendCellHtml(stringArrayL, row, i, colspan, d);\n        }\n      } else if (hasFrozenColumns() && (i <= options.frozenColumn)){\n        appendCellHtml(stringArrayL, row, i, colspan, d);\n      }\n\n      if (colspan > 1){\n        i += (colspan - 1);\n      }\n    }\n\n    stringArrayL.push(\"</div>\");\n\n    if (hasFrozenColumns()){\n      stringArrayR.push(\"</div>\");\n    }\n  }\n\n  function appendCellHtml(stringArray, row, cell, colspan, item){\n    var m = columns[cell];\n    var cellCss = \"slick-cell l\" + cell + \" r\" + Math.min(columns.length - 1, cell + colspan - 1) + (m.cssClass ? \" \" + m.cssClass : \"\");\n\n    if (hasFrozenColumns() && cell <= options.frozenColumn) cellCss += ' frozen';\n\n    if (row === activeRow && cell === activeCell) cellCss += \" active\";\n\n    // TODO:  merge them together in the setter\n    for (var key in cellCssClasses){\n      if (cellCssClasses[key][row] && cellCssClasses[key][row][m.id]){\n        cellCss += (\" \" + cellCssClasses[key][row][m.id]);\n      }\n    }\n\n    stringArray.push(\"<div class='\" + cellCss + \"'>\");\n\n    // if there is a corresponding row (if not, this is the Add New row or this data hasn't been loaded yet)\n    if (item){\n      var value = getDataItemValueForColumn(item, m);\n      stringArray.push(callFormatter(row, cell, value, m, item));\n    }\n\n    stringArray.push(\"</div>\");\n\n    rowsCache[row].cellRenderQueue.push(cell);\n    rowsCache[row].cellColSpans[cell] = colspan;\n  }\n\n  function cleanupRows(rangeToKeep){\n    for (var i in rowsCache){\n      var removeFrozenRow = true;\n\n      if (hasFrozenRows && ((options.frozenBottom && i >= actualFrozenRow) // Frozen bottom rows\n          ||\n          (!options.frozenBottom && i <= actualFrozenRow) // Frozen top rows\n        )){\n        removeFrozenRow = false;\n      }\n\n      if (((i = parseInt(i, 10)) !== activeRow) && (i < rangeToKeep.top || i > rangeToKeep.bottom) && (removeFrozenRow)){\n        removeRowFromCache(i);\n      }\n    }\n  }\n\n  function invalidate(){\n    updateRowCount();\n    invalidateAllRows();\n    render();\n  }\n\n  function invalidateAllRows(){\n    if (currentEditor){\n      makeActiveCellNormal();\n    }\n    for (var row in rowsCache){\n      removeRowFromCache(row);\n    }\n  }\n\n  function removeRowFromCache(row){\n    var cacheEntry = rowsCache[row];\n    if (!cacheEntry){\n      return;\n    }\n\n    if (rowNodeFromLastMouseWheelEvent == cacheEntry.rowNode[0] || (hasFrozenColumns() && rowNodeFromLastMouseWheelEvent == cacheEntry.rowNode[1])){\n\n      cacheEntry.rowNode.hide();\n\n      zombieRowNodeFromLastMouseWheelEvent = cacheEntry.rowNode;\n    } else {\n\n      cacheEntry.rowNode.each(function(){\n        this.parentElement.removeChild(this);\n      });\n\n    }\n\n    delete rowsCache[row];\n    delete postProcessedRows[row];\n    renderedRows--;\n    counter_rows_removed++;\n  }\n\n  function invalidateRows(rows){\n    var i, rl;\n    if (!rows || !rows.length){\n      return;\n    }\n    vScrollDir = 0;\n    for (i = 0, rl = rows.length; i < rl; i++){\n      if (currentEditor && activeRow === rows[i]){\n        makeActiveCellNormal();\n      }\n      if (rowsCache[rows[i]]){\n        removeRowFromCache(rows[i]);\n      }\n    }\n  }\n\n  function invalidateRow(row){\n    invalidateRows([row]);\n  }\n\n  function updateCell(row, cell){\n    var cellNode = getCellNode(row, cell);\n    if (!cellNode){\n      return;\n    }\n\n    var m = columns[cell],\n      d = getDataItem(row);\n    if (currentEditor && activeRow === row && activeCell === cell){\n      currentEditor.loadValue(d);\n    } else {\n      cellNode.innerHTML = d ? callFormatter(row, cell, getDataItemValueForColumn(d, m), m, d) : \"\";\n      invalidatePostProcessingResults(row);\n    }\n  }\n\n  function updateRow(row){\n    var cacheEntry = rowsCache[row];\n    if (!cacheEntry){\n      return;\n    }\n\n    ensureCellNodesInRowsCache(row);\n\n    var d = getDataItem(row);\n\n    for (var columnIdx in cacheEntry.cellNodesByColumnIdx){\n      if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)){\n        continue;\n      }\n\n      columnIdx = columnIdx | 0;\n      var m = columns[columnIdx],\n        node = cacheEntry.cellNodesByColumnIdx[columnIdx][0];\n\n      if (row === activeRow && columnIdx === activeCell && currentEditor){\n        currentEditor.loadValue(d);\n      } else if (d){\n        node.innerHTML = callFormatter(row, columnIdx, getDataItemValueForColumn(d, m), m, d);\n      } else {\n        node.innerHTML = \"\";\n      }\n    }\n\n    invalidatePostProcessingResults(row);\n  }\n\n  function getViewportHeight(){\n    if (options.autoHeight){\n      viewportH = options.rowHeight * getDataLengthIncludingAddNew() + ((options.frozenColumn == -1) ? $headers.outerHeight() : 0);\n    } else {\n      topPanelH = (options.showTopPanel) ? options.topPanelHeight + getVBoxDelta($topPanelScroller) : 0;\n\n      headerRowH = (options.showHeaderRow) ? options.headerRowHeight + getVBoxDelta($headerRowScroller) : 0;\n\n      footerRowH = (options.showFooterRow) ? options.footerRowHeight + getVBoxDelta($footerRowScroller) : 0;\n\n      viewportH = parseFloat($.css($container[0], \"height\", true)) - parseFloat($.css($container[0], \"paddingTop\", true)) - parseFloat($.css($container[0], \"paddingBottom\", true)) - parseFloat($.css($headerScroller[0], \"height\")) - getVBoxDelta($headerScroller) - topPanelH - headerRowH - footerRowH;\n    }\n\n    numVisibleRows = Math.ceil(viewportH / options.rowHeight);\n  }\n\n  function getViewportWidth(){\n    viewportW = parseFloat($.css($container[0], \"width\", true));\n  }\n\n  function resizeCanvas(){\n    if (!initialized){\n      return;\n    }\n\n    paneTopH = 0\n    paneBottomH = 0\n    viewportTopH = 0\n    viewportBottomH = 0;\n\n    getViewportWidth();\n    getViewportHeight();\n\n    // Account for Frozen Rows\n    if (hasFrozenRows){\n      if (options.frozenBottom){\n        paneTopH = viewportH - frozenRowsHeight - scrollbarDimensions.height;\n\n        paneBottomH = frozenRowsHeight + scrollbarDimensions.height;\n      } else {\n        paneTopH = frozenRowsHeight;\n        paneBottomH = viewportH - frozenRowsHeight;\n      }\n    } else {\n      paneTopH = viewportH;\n    }\n\n    // The top pane includes the top panel and the header row\n    paneTopH += topPanelH + headerRowH + footerRowH;\n\n    if (hasFrozenColumns() && options.autoHeight){\n      paneTopH += scrollbarDimensions.height;\n    }\n\n    // The top viewport does not contain the top panel or header row\n    viewportTopH = paneTopH - topPanelH - headerRowH - footerRowH;\n\n    if (options.autoHeight){\n      if (hasFrozenColumns()){\n        $container.height(\n          paneTopH + parseFloat($.css($headerScrollerL[0], \"height\")));\n      }\n\n      $paneTopL.css('position', 'relative');\n    }\n\n    $paneTopL.css({\n      'top': $paneHeaderL.height(),\n      'height': paneTopH\n    });\n\n    var paneBottomTop = $paneTopL.position().top + paneTopH;\n\n    $viewportTopL.height(viewportTopH);\n\n    if (hasFrozenColumns()){\n      $paneTopR.css({\n        'top': $paneHeaderL.height(),\n        'height': paneTopH\n      });\n\n      $viewportTopR.height(viewportTopH);\n\n      if (hasFrozenRows){\n        $paneBottomL.css({\n          'top': paneBottomTop,\n          'height': paneBottomH\n        });\n\n        $paneBottomR.css({\n          'top': paneBottomTop,\n          'height': paneBottomH\n        });\n\n        $viewportBottomR.height(paneBottomH);\n      }\n    } else {\n      if (hasFrozenRows){\n        $paneBottomL.css({\n          'width': '100%',\n          'height': paneBottomH\n        });\n\n        $paneBottomL.css('top', paneBottomTop);\n      }\n    }\n\n    if (hasFrozenRows){\n      $viewportBottomL.height(paneBottomH);\n\n      if (options.frozenBottom){\n        $canvasBottomL.height(frozenRowsHeight);\n\n        if (hasFrozenColumns()){\n          $canvasBottomR.height(frozenRowsHeight);\n        }\n      } else {\n        $canvasTopL.height(frozenRowsHeight);\n\n        if (hasFrozenColumns()){\n          $canvasTopR.height(frozenRowsHeight);\n        }\n      }\n    } else {\n      $viewportTopR.height(viewportTopH);\n    }\n\n    if (options.forceFitColumns){\n      autosizeColumns();\n    }\n\n    updateRowCount();\n    handleScroll();\n    // Since the width has changed, force the render() to reevaluate virtually rendered cells.\n    lastRenderedScrollLeft = -1;\n    render();\n  }\n\n  function updateRowCount(){\n    if (!initialized){\n      return;\n    }\n\n    var dataLengthIncludingAddNew = getDataLengthIncludingAddNew();\n    var numberOfRows = 0;\n    var oldH = (hasFrozenRows && !options.frozenBottom) ? $canvasBottomL.height() : $canvasTopL.height();\n\n    if (hasFrozenRows){\n      var numberOfRows = getDataLength() - options.frozenRow;\n    } else {\n      var numberOfRows = dataLengthIncludingAddNew + (options.leaveSpaceForNewRows ? numVisibleRows - 1 : 0);\n    }\n\n    var tempViewportH = $viewportScrollContainerY.height();\n    var oldViewportHasVScroll = viewportHasVScroll;\n    // with autoHeight, we do not need to accommodate the vertical scroll bar\n    viewportHasVScroll = !options.autoHeight && (numberOfRows * options.rowHeight > tempViewportH);\n\n    makeActiveCellNormal();\n\n    // remove the rows that are now outside of the data range\n    // this helps avoid redundant calls to .removeRow() when the size of the data decreased by thousands of rows\n    var l = dataLengthIncludingAddNew - 1;\n    for (var i in rowsCache){\n      if (i >= l){\n        removeRowFromCache(i);\n      }\n    }\n\n    th = Math.max(options.rowHeight * numberOfRows, tempViewportH - scrollbarDimensions.height);\n\n    if (activeCellNode && activeRow > l){\n      resetActiveCell();\n    }\n\n    if (th < maxSupportedCssHeight){\n      // just one page\n      h = ph = th;\n      n = 1;\n      cj = 0;\n    } else {\n      // break into pages\n      h = maxSupportedCssHeight;\n      ph = h / 100;\n      n = Math.floor(th / ph);\n      cj = (th - h) / (n - 1);\n    }\n\n    if (h !== oldH){\n      if (hasFrozenRows && !options.frozenBottom){\n        $canvasBottomL.css(\"height\", h);\n\n        if (hasFrozenColumns()){\n          $canvasBottomR.css(\"height\", h);\n        }\n      } else {\n        $canvasTopL.css(\"height\", h);\n        $canvasTopR.css(\"height\", h);\n      }\n\n      scrollTop = $viewportScrollContainerY[0].scrollTop;\n    }\n\n    var oldScrollTopInRange = (scrollTop + offset <= th - tempViewportH);\n\n    if (th == 0 || scrollTop == 0){\n      page = offset = 0;\n    } else if (oldScrollTopInRange){\n      // maintain virtual position\n      scrollTo(scrollTop + offset);\n    } else {\n      // scroll to bottom\n      scrollTo(th - tempViewportH);\n    }\n\n    if (h != oldH && options.autoHeight){\n      resizeCanvas();\n    }\n\n    if (options.forceFitColumns && oldViewportHasVScroll != viewportHasVScroll){\n      autosizeColumns();\n    }\n    updateCanvasWidth(false);\n  }\n\n  function getVisibleRange(viewportTop, viewportLeft){\n    if (viewportTop == null){\n      viewportTop = scrollTop;\n    }\n    if (viewportLeft == null){\n      viewportLeft = scrollLeft;\n    }\n\n    return {\n      top: getRowFromPosition(viewportTop),\n      bottom: getRowFromPosition(viewportTop + viewportH) + 1,\n      leftPx: viewportLeft,\n      rightPx: viewportLeft + viewportW\n    };\n  }\n\n  function getRenderedRange(viewportTop, viewportLeft){\n    var range = getVisibleRange(viewportTop, viewportLeft);\n    var buffer = Math.round(viewportH / options.rowHeight);\n    var minBuffer = 3;\n\n    if (vScrollDir == -1){\n      range.top -= buffer;\n      range.bottom += minBuffer;\n    } else if (vScrollDir == 1){\n      range.top -= minBuffer;\n      range.bottom += buffer;\n    } else {\n      range.top -= minBuffer;\n      range.bottom += minBuffer;\n    }\n\n    range.top = Math.max(0, range.top);\n    range.bottom = Math.min(getDataLengthIncludingAddNew() - 1, range.bottom);\n\n    range.leftPx -= viewportW;\n    range.rightPx += viewportW;\n\n    range.leftPx = Math.max(0, range.leftPx);\n    range.rightPx = Math.min(canvasWidth, range.rightPx);\n\n    return range;\n  }\n\n  function ensureCellNodesInRowsCache(row){\n    var cacheEntry = rowsCache[row];\n    if (cacheEntry){\n      if (cacheEntry.cellRenderQueue.length){\n        var $lastNode = cacheEntry.rowNode.children().last();\n        while (cacheEntry.cellRenderQueue.length){\n          var columnIdx = cacheEntry.cellRenderQueue.pop();\n\n          cacheEntry.cellNodesByColumnIdx[columnIdx] = $lastNode;\n          $lastNode = $lastNode.prev();\n\n          // Hack to retrieve the frozen columns because\n          if ($lastNode.length == 0){\n            $lastNode = $(cacheEntry.rowNode[0]).children().last();\n          }\n        }\n      }\n    }\n  }\n\n  function cleanUpCells(range, row){\n    // Ignore frozen rows\n    if (hasFrozenRows && ((options.frozenBottom && row > actualFrozenRow) // Frozen bottom rows\n        ||\n        (row <= actualFrozenRow) // Frozen top rows\n      )){\n      return;\n    }\n\n    var totalCellsRemoved = 0;\n    var cacheEntry = rowsCache[row];\n\n    // Remove cells outside the range.\n    var cellsToRemove = [];\n    for (var i in cacheEntry.cellNodesByColumnIdx){\n      // I really hate it when people mess with Array.prototype.\n      if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(i)){\n        continue;\n      }\n\n      // This is a string, so it needs to be cast back to a number.\n      i = i | 0;\n\n      // Ignore frozen columns\n      if (i <= options.frozenColumn){\n        continue;\n      }\n\n      var colspan = cacheEntry.cellColSpans[i];\n      if (columnPosLeft[i] > range.rightPx || columnPosRight[Math.min(columns.length - 1, i + colspan - 1)] < range.leftPx){\n        if (!(row == activeRow && i == activeCell)){\n          cellsToRemove.push(i);\n        }\n      }\n    }\n\n    var cellToRemove;\n    while ((cellToRemove = cellsToRemove.pop()) != null){\n      cacheEntry.cellNodesByColumnIdx[cellToRemove][0].parentElement.removeChild(cacheEntry.cellNodesByColumnIdx[cellToRemove][0]);\n      delete cacheEntry.cellColSpans[cellToRemove];\n      delete cacheEntry.cellNodesByColumnIdx[cellToRemove];\n      if (postProcessedRows[row]){\n        delete postProcessedRows[row][cellToRemove];\n      }\n      totalCellsRemoved++;\n    }\n  }\n\n  function cleanUpAndRenderCells(range){\n    var cacheEntry;\n    var stringArray = [];\n    var processedRows = [];\n    var cellsAdded;\n    var totalCellsAdded = 0;\n    var colspan;\n\n    for (var row = range.top, btm = range.bottom; row <= btm; row++){\n      cacheEntry = rowsCache[row];\n      if (!cacheEntry){\n        continue;\n      }\n\n      // cellRenderQueue populated in renderRows() needs to be cleared first\n      ensureCellNodesInRowsCache(row);\n\n      cleanUpCells(range, row);\n\n      // Render missing cells.\n      cellsAdded = 0;\n\n      var metadata = data.getItemMetadata && data.getItemMetadata(row);\n      metadata = metadata && metadata.columns;\n\n      var d = getDataItem(row);\n\n      // TODO:  shorten this loop (index? heuristics? binary search?)\n      for (var i = 0, ii = columns.length; i < ii; i++){\n        // Cells to the right are outside the range.\n        if (columnPosLeft[i] > range.rightPx){\n          break;\n        }\n\n        // Already rendered.\n        if ((colspan = cacheEntry.cellColSpans[i]) != null){\n          i += (colspan > 1 ? colspan - 1 : 0);\n          continue;\n        }\n\n        colspan = 1;\n        if (metadata){\n          var columnData = metadata[columns[i].id] || metadata[i];\n          colspan = (columnData && columnData.colspan) || 1;\n          if (colspan === \"*\"){\n            colspan = ii - i;\n          }\n        }\n\n        if (columnPosRight[Math.min(ii - 1, i + colspan - 1)] > range.leftPx){\n          appendCellHtml(stringArray, row, i, colspan, d);\n          cellsAdded++;\n        }\n\n        i += (colspan > 1 ? colspan - 1 : 0);\n      }\n\n      if (cellsAdded){\n        totalCellsAdded += cellsAdded;\n        processedRows.push(row);\n      }\n    }\n\n    if (!stringArray.length){\n      return;\n    }\n\n    var x = document.createElement(\"div\");\n    x.innerHTML = stringArray.join(\"\");\n\n    var processedRow;\n    var $node;\n    while ((processedRow = processedRows.pop()) != null){\n      cacheEntry = rowsCache[processedRow];\n      var columnIdx;\n      while ((columnIdx = cacheEntry.cellRenderQueue.pop()) != null){\n        $node = $(x).children().last();\n\n        if (hasFrozenColumns() && (columnIdx > options.frozenColumn)){\n          $(cacheEntry.rowNode[1]).append($node);\n        } else {\n          $(cacheEntry.rowNode[0]).append($node);\n        }\n\n        cacheEntry.cellNodesByColumnIdx[columnIdx] = $node;\n      }\n    }\n  }\n\n  function renderRows(range){\n    var stringArrayL = [],\n      stringArrayR = [],\n      rows = [],\n      needToReselectCell = false,\n      dataLength = getDataLength();\n\n    for (var i = range.top, ii = range.bottom; i <= ii; i++){\n      if (rowsCache[i] || (hasFrozenRows && options.frozenBottom && i == getDataLength())){\n        continue;\n      }\n      renderedRows++;\n      rows.push(i);\n\n      // Create an entry right away so that appendRowHtml() can\n      // start populatating it.\n      rowsCache[i] = {\n        \"rowNode\": null,\n\n        // ColSpans of rendered cells (by column idx).\n        // Can also be used for checking whether a cell has been rendered.\n        \"cellColSpans\": [],\n\n        // Cell nodes (by column idx).  Lazy-populated by ensureCellNodesInRowsCache().\n        \"cellNodesByColumnIdx\": [],\n\n        // Column indices of cell nodes that have been rendered, but not yet indexed in\n        // cellNodesByColumnIdx.  These are in the same order as cell nodes added at the\n        // end of the row.\n        \"cellRenderQueue\": []\n      };\n\n      appendRowHtml(stringArrayL, stringArrayR, i, range, dataLength);\n      if (activeCellNode && activeRow === i){\n        needToReselectCell = true;\n      }\n      counter_rows_rendered++;\n    }\n\n    if (!rows.length){\n      return;\n    }\n\n    var x = document.createElement(\"div\"),\n      xRight = document.createElement(\"div\");\n\n    x.innerHTML = stringArrayL.join(\"\");\n    xRight.innerHTML = stringArrayR.join(\"\");\n\n    for (var i = 0, ii = rows.length; i < ii; i++){\n      if ((hasFrozenRows) && (rows[i] >= actualFrozenRow)){\n        if (hasFrozenColumns()){\n          rowsCache[rows[i]].rowNode = $()\n            .add($(x.firstChild).appendTo($canvasBottomL))\n            .add($(xRight.firstChild).appendTo($canvasBottomR));\n        } else {\n          rowsCache[rows[i]].rowNode = $()\n            .add($(x.firstChild).appendTo($canvasBottomL));\n        }\n      } else if (hasFrozenColumns()){\n        rowsCache[rows[i]].rowNode = $()\n          .add($(x.firstChild).appendTo($canvasTopL))\n          .add($(xRight.firstChild).appendTo($canvasTopR));\n      } else {\n        rowsCache[rows[i]].rowNode = $()\n          .add($(x.firstChild).appendTo($canvasTopL));\n      }\n    }\n\n    if (needToReselectCell){\n      activeCellNode = getCellNode(activeRow, activeCell);\n    }\n  }\n\n  function startPostProcessing(){\n    if (!options.enableAsyncPostRender){\n      return;\n    }\n    clearTimeout(h_postrender);\n    h_postrender = setTimeout(asyncPostProcessRows, options.asyncPostRenderDelay);\n  }\n\n  function invalidatePostProcessingResults(row){\n    delete postProcessedRows[row];\n    postProcessFromRow = Math.min(postProcessFromRow, row);\n    postProcessToRow = Math.max(postProcessToRow, row);\n    startPostProcessing();\n  }\n\n  function updateRowPositions(){\n    for (var row in rowsCache){\n      rowsCache[row].rowNode.css('top', getRowTop(row) + \"px\");\n    }\n  }\n\n  function render(){\n    if (!initialized){\n      return;\n    }\n    var visible = getVisibleRange();\n    var rendered = getRenderedRange();\n\n    // remove rows no longer in the viewport\n    cleanupRows(rendered);\n\n    // add new rows & missing cells in existing rows\n    if (lastRenderedScrollLeft != scrollLeft){\n\n      if (hasFrozenRows){\n\n        var renderedFrozenRows = $.extend(true, {}, rendered);\n\n        if (options.frozenBottom){\n\n          renderedFrozenRows.top = actualFrozenRow;\n          renderedFrozenRows.bottom = getDataLength();\n        } else {\n\n          renderedFrozenRows.top = 0;\n          renderedFrozenRows.bottom = options.frozenRow;\n        }\n\n        cleanUpAndRenderCells(renderedFrozenRows);\n      }\n\n      cleanUpAndRenderCells(rendered);\n    }\n\n    // render missing rows\n    renderRows(rendered);\n\n    // Render frozen rows\n    if (hasFrozenRows){\n      if (options.frozenBottom){\n        renderRows({\n          top: actualFrozenRow,\n          bottom: getDataLength() - 1,\n          leftPx: rendered.leftPx,\n          rightPx: rendered.rightPx\n        });\n      } else {\n        renderRows({\n          top: 0,\n          bottom: options.frozenRow - 1,\n          leftPx: rendered.leftPx,\n          rightPx: rendered.rightPx\n        });\n      }\n    }\n\n    postProcessFromRow = visible.top;\n    postProcessToRow = Math.min(getDataLengthIncludingAddNew() - 1, visible.bottom);\n    startPostProcessing();\n\n    lastRenderedScrollTop = scrollTop;\n    lastRenderedScrollLeft = scrollLeft;\n    h_render = null;\n  }\n\n  function handleHeaderRowScroll(){\n    var scrollLeft = $headerRowScrollContainer[0].scrollLeft;\n    if (scrollLeft != $viewportScrollContainerX[0].scrollLeft){\n      $viewportScrollContainerX[0].scrollLeft = scrollLeft;\n    }\n  }\n\n  function handleFooterRowScroll(){\n    var scrollLeft = $footerRowScrollContainer[0].scrollLeft;\n    if (scrollLeft != $viewportScrollContainerX[0].scrollLeft){\n      $viewportScrollContainerX[0].scrollLeft = scrollLeft;\n    }\n  }\n\n  function handleMouseWheel(e, delta, deltaX, deltaY){\n    var $rowNode = $(e.target).closest(\".slick-row\");\n    var rowNode = $rowNode[0];\n\n    if (rowNode != rowNodeFromLastMouseWheelEvent){\n\n      var $gridCanvas = $rowNode.parents('.grid-canvas');\n      var left = $gridCanvas.hasClass('grid-canvas-left');\n\n      if (zombieRowNodeFromLastMouseWheelEvent && zombieRowNodeFromLastMouseWheelEvent[left ? 0 : 1] != rowNode){\n        var zombieRow = zombieRowNodeFromLastMouseWheelEvent[left || zombieRowNodeFromLastMouseWheelEvent.length == 1 ? 0 : 1];\n        zombieRow.parentElement.removeChild(zombieRow);\n\n        zombieRowNodeFromLastMouseWheelEvent = null;\n      }\n\n      rowNodeFromLastMouseWheelEvent = rowNode;\n    }\n\n    scrollTop = Math.max(0, $viewportScrollContainerY[0].scrollTop - (deltaY * options.rowHeight));\n    scrollLeft = $viewportScrollContainerX[0].scrollLeft + (deltaX * 10);\n    var handled = _handleScroll(true);\n    if (handled) e.preventDefault();\n  }\n\n  function handleScroll(){\n    scrollTop = $viewportScrollContainerY[0].scrollTop;\n    scrollLeft = $viewportScrollContainerX[0].scrollLeft;\n    return _handleScroll(false);\n  }\n\n  function _handleScroll(isMouseWheel){\n    var maxScrollDistanceY = $viewportScrollContainerY[0].scrollHeight - $viewportScrollContainerY[0].clientHeight;\n    var maxScrollDistanceX = $viewportScrollContainerY[0].scrollWidth - $viewportScrollContainerY[0].clientWidth;\n    var hasFrozenCols = hasFrozenColumns();\n\n    // Ceiling the max scroll values\n    if (scrollTop > maxScrollDistanceY){\n      scrollTop = maxScrollDistanceY;\n    }\n    if (scrollLeft > maxScrollDistanceX){\n      scrollLeft = maxScrollDistanceX;\n    }\n\n    var vScrollDist = Math.abs(scrollTop - prevScrollTop);\n    var hScrollDist = Math.abs(scrollLeft - prevScrollLeft);\n\n    if (hScrollDist){\n      prevScrollLeft = scrollLeft;\n\n      $viewportScrollContainerX[0].scrollLeft = scrollLeft;\n      $headerScrollContainer[0].scrollLeft = scrollLeft;\n      $topPanelScroller[0].scrollLeft = scrollLeft;\n      $headerRowScrollContainer[0].scrollLeft = scrollLeft;\n      $footerRowScrollContainer[0].scrollLeft = scrollLeft;\n\n      if (hasFrozenCols){\n        if (hasFrozenRows){\n          $viewportTopR[0].scrollLeft = scrollLeft;\n        }\n      } else {\n        if (hasFrozenRows){\n          $viewportTopL[0].scrollLeft = scrollLeft;\n        }\n      }\n    }\n\n    if (vScrollDist){\n      vScrollDir = prevScrollTop < scrollTop ? 1 : -1;\n      prevScrollTop = scrollTop;\n\n      if (isMouseWheel){\n        $viewportScrollContainerY[0].scrollTop = scrollTop;\n      }\n\n      if (hasFrozenCols){\n        if (hasFrozenRows && !options.frozenBottom){\n          $viewportBottomL[0].scrollTop = scrollTop;\n        } else {\n          $viewportTopL[0].scrollTop = scrollTop;\n        }\n      }\n\n      // switch virtual pages if needed\n      if (vScrollDist < viewportH){\n        scrollTo(scrollTop + offset);\n      } else {\n        var oldOffset = offset;\n        if (h == viewportH){\n          page = 0;\n        } else {\n          page = Math.min(n - 1, Math.floor(scrollTop * ((th - viewportH) / (h - viewportH)) * (1 / ph)));\n        }\n        offset = Math.round(page * cj);\n        if (oldOffset != offset){\n          invalidateAllRows();\n        }\n      }\n    }\n\n    if (hScrollDist || vScrollDist){\n      if (h_render){\n        clearTimeout(h_render);\n      }\n\n      if (Math.abs(lastRenderedScrollTop - scrollTop) > 20 || Math.abs(lastRenderedScrollLeft - scrollLeft) > 20){\n        if (options.forceSyncScrolling || (\n          Math.abs(lastRenderedScrollTop - scrollTop) < viewportH && Math.abs(lastRenderedScrollLeft - scrollLeft) < viewportW)){\n          render();\n        } else {\n          h_render = setTimeout(render, 50);\n        }\n\n        trigger(self.onViewportChanged, {});\n      }\n    }\n\n    trigger(self.onScroll, {\n      scrollLeft: scrollLeft,\n      scrollTop: scrollTop\n    });\n\n    if (hScrollDist || vScrollDist) return true;\n    return false;\n  }\n\n  function asyncPostProcessRows(){\n    var dataLength = getDataLength();\n    while (postProcessFromRow <= postProcessToRow){\n      var row = (vScrollDir >= 0) ? postProcessFromRow++ : postProcessToRow--;\n      var cacheEntry = rowsCache[row];\n      if (!cacheEntry || row >= dataLength){\n        continue;\n      }\n\n      if (!postProcessedRows[row]){\n        postProcessedRows[row] = {};\n      }\n\n      ensureCellNodesInRowsCache(row);\n      for (var columnIdx in cacheEntry.cellNodesByColumnIdx){\n        if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)){\n          continue;\n        }\n\n        columnIdx = columnIdx | 0;\n\n        var m = columns[columnIdx];\n        if (m.asyncPostRender && !postProcessedRows[row][columnIdx]){\n          var node = cacheEntry.cellNodesByColumnIdx[columnIdx];\n          if (node){\n            m.asyncPostRender(node, row, getDataItem(row), m);\n          }\n          postProcessedRows[row][columnIdx] = true;\n        }\n      }\n\n      h_postrender = setTimeout(asyncPostProcessRows, options.asyncPostRenderDelay);\n      return;\n    }\n  }\n\n  function updateCellCssStylesOnRenderedRows(addedHash, removedHash){\n    var node, columnId, addedRowHash, removedRowHash;\n    for (var row in rowsCache){\n      removedRowHash = removedHash && removedHash[row];\n      addedRowHash = addedHash && addedHash[row];\n\n      if (removedRowHash){\n        for (columnId in removedRowHash){\n          if (!addedRowHash || removedRowHash[columnId] != addedRowHash[columnId]){\n            node = getCellNode(row, getColumnIndex(columnId));\n            if (node){\n              $(node).removeClass(removedRowHash[columnId]);\n            }\n          }\n        }\n      }\n\n      if (addedRowHash){\n        for (columnId in addedRowHash){\n          if (!removedRowHash || removedRowHash[columnId] != addedRowHash[columnId]){\n            node = getCellNode(row, getColumnIndex(columnId));\n            if (node){\n              $(node).addClass(addedRowHash[columnId]);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  function addCellCssStyles(key, hash){\n    if (cellCssClasses[key]){\n      throw \"addCellCssStyles: cell CSS hash with key '\" + key + \"' already exists.\";\n    }\n\n    cellCssClasses[key] = hash;\n    updateCellCssStylesOnRenderedRows(hash, null);\n\n    trigger(self.onCellCssStylesChanged, {\n      \"key\": key,\n      \"hash\": hash\n    });\n  }\n\n  function removeCellCssStyles(key){\n    if (!cellCssClasses[key]){\n      return;\n    }\n\n    updateCellCssStylesOnRenderedRows(null, cellCssClasses[key]);\n    delete cellCssClasses[key];\n\n    trigger(self.onCellCssStylesChanged, {\n      \"key\": key,\n      \"hash\": null\n    });\n  }\n\n  function setCellCssStyles(key, hash){\n    var prevHash = cellCssClasses[key];\n\n    cellCssClasses[key] = hash;\n    updateCellCssStylesOnRenderedRows(hash, prevHash);\n\n    trigger(self.onCellCssStylesChanged, {\n      \"key\": key,\n      \"hash\": hash\n    });\n  }\n\n  function getCellCssStyles(key){\n    return cellCssClasses[key];\n  }\n\n  function flashCell(row, cell, speed){\n    speed = speed || 100;\n    if (rowsCache[row]){\n      var $cell = $(getCellNode(row, cell));\n\n      function toggleCellClass(times){\n        if (!times){\n          return;\n        }\n        setTimeout(function(){\n            $cell.queue(function(){\n              $cell.toggleClass(options.cellFlashingCssClass).dequeue();\n              toggleCellClass(times - 1);\n            });\n          },\n          speed);\n      }\n\n      toggleCellClass(4);\n    }\n  }\n\n  //////////////////////////////////////////////////////////////////////////////////////////////\n  // Interactivity\n\n  function handleDragInit(e, dd){\n    var cell = getCellFromEvent(e);\n    if (!cell || !cellExists(cell.row, cell.cell)){\n      return false;\n    }\n\n    var retval = trigger(self.onDragInit, dd, e);\n    if (e.isImmediatePropagationStopped()){\n      return retval;\n    }\n\n    // if nobody claims to be handling drag'n'drop by stopping immediate propagation,\n    // cancel out of it\n    return false;\n  }\n\n  function handleDragStart(interactEvent){\n    var event = $.Event(interactEvent.originalEvent.type, interactEvent.originalEvent);\n    var cell = getCellFromEvent(event);\n    if (!cell || !cellExists(cell.row, cell.cell)){\n      return false;\n    }\n\n    var retval = trigger(self.onDragStart, interactEvent, event);\n    if (event.isImmediatePropagationStopped()){\n      return retval;\n    }\n\n    return false;\n  }\n\n  function handleDrag(interactEvent){\n    var event = $.Event(interactEvent.originalEvent.type, interactEvent.originalEvent);\n    return trigger(self.onDrag, interactEvent, event);\n  }\n\n  function handleDragEnd(interactEvent){\n    trigger(self.onDragEnd, interactEvent, $.Event('mousedown'));\n  }\n\n  function handleKeyDown(e){\n    trigger(self.onKeyDown, {\n      row: activeRow,\n      cell: activeCell\n    }, e);\n    var handled = e.isImmediatePropagationStopped();\n\n    if (!handled){\n      if (!e.shiftKey && !e.altKey && !e.ctrlKey){\n        if (e.which == 27){\n          if (!getEditorLock().isActive()){\n            return; // no editing mode to cancel, allow bubbling and default processing (exit without cancelling the event)\n          }\n          cancelEditAndSetFocus();\n        } else if (e.which == 34){\n          navigatePageDown();\n          handled = true;\n        } else if (e.which == 33){\n          navigatePageUp();\n          handled = true;\n        } else if (e.which == 37){\n          handled = navigateLeft();\n        } else if (e.which == 39){\n          handled = navigateRight();\n        } else if (e.which == 38){\n          handled = navigateUp();\n        } else if (e.which == 40){\n          handled = navigateDown();\n        } else if (e.which == 9){\n          handled = navigateNext();\n        } else if (e.which == 13){\n          if (options.editable){\n            if (currentEditor){\n              // adding new row\n              if (activeRow === getDataLength()){\n                navigateDown();\n              } else {\n                commitEditAndSetFocus();\n              }\n            } else {\n              if (getEditorLock().commitCurrentEdit()){\n                makeActiveCellEditable();\n              }\n            }\n          }\n          handled = true;\n        }\n      } else if (e.which == 9 && e.shiftKey && !e.ctrlKey && !e.altKey){\n        handled = navigatePrev();\n      }\n    }\n\n    if (handled){\n      // the event has been handled so don't let parent element (bubbling/propagation) or browser (default) handle it\n      e.stopPropagation();\n      e.preventDefault();\n      try {\n        e.originalEvent.keyCode = 0; // prevent default behaviour for special keys in IE browsers (F3, F5, etc.)\n      }\n        // ignore exceptions - setting the original event's keycode throws access denied exception for \"Ctrl\"\n        // (hitting control key only, nothing else), \"Shift\" (maybe others)\n      catch (error) {\n      }\n    }\n  }\n\n  function handleClick(e){\n    if (!currentEditor){\n      // if this click resulted in some cell child node getting focus,\n      // don't steal it back - keyboard events will still bubble up\n      // IE9+ seems to default DIVs to tabIndex=0 instead of -1, so check for cell clicks directly.\n      if (e.target != document.activeElement || $(e.target).hasClass(\"slick-cell\")){\n        setFocus();\n      }\n    }\n\n    var cell = getCellFromEvent(e);\n    if (!cell || (currentEditor !== null && activeRow == cell.row && activeCell == cell.cell)){\n      return;\n    }\n\n    trigger(self.onClick, {\n      row: cell.row,\n      cell: cell.cell\n    }, e);\n    if (e.isImmediatePropagationStopped()){\n      return;\n    }\n\n    if ((activeCell != cell.cell || activeRow != cell.row) && canCellBeActive(cell.row, cell.cell)){\n      if (!getEditorLock().isActive() || getEditorLock().commitCurrentEdit()){\n\n        scrollRowIntoView(cell.row, false);\n        setActiveCellInternal(getCellNode(cell.row, cell.cell));\n      }\n    }\n  }\n\n  function handleContextMenu(e){\n    var $cell = $(e.target).closest(\".slick-cell\", $canvas);\n    if ($cell.length === 0){\n      return;\n    }\n\n    // are we editing this cell?\n    if (activeCellNode === $cell[0] && currentEditor !== null){\n      return;\n    }\n\n    trigger(self.onContextMenu, {}, e);\n  }\n\n  function handleDblClick(e){\n    var cell = getCellFromEvent(e);\n    if (!cell || (currentEditor !== null && activeRow == cell.row && activeCell == cell.cell)){\n      return;\n    }\n\n    trigger(self.onDblClick, {\n      row: cell.row,\n      cell: cell.cell\n    }, e);\n    if (e.isImmediatePropagationStopped()){\n      return;\n    }\n\n    if (options.editable){\n      gotoCell(cell.row, cell.cell, true);\n    }\n  }\n\n  function handleHeaderMouseEnter(e){\n    trigger(self.onHeaderMouseEnter, {\n      \"column\": $(this).data(\"column\")\n    }, e);\n  }\n\n  function handleHeaderMouseLeave(e){\n    trigger(self.onHeaderMouseLeave, {\n      \"column\": $(this).data(\"column\")\n    }, e);\n  }\n\n  function handleHeaderContextMenu(e){\n    var $header = $(e.target).closest(\".slick-header-column\", \".slick-header-columns\");\n    var column = $header && $header.data(\"column\");\n    trigger(self.onHeaderContextMenu, {\n      column: column\n    }, e);\n  }\n\n  function handleHeaderClick(e){\n    var $header = $(e.target).closest(\".slick-header-column\", \".slick-header-columns\");\n    var column = $header && $header.data(\"column\");\n    if (column){\n      trigger(self.onHeaderClick, {\n        column: column\n      }, e);\n    }\n  }\n\n  function handleMouseEnter(e){\n    trigger(self.onMouseEnter, {}, e);\n  }\n\n  function handleMouseLeave(e){\n    trigger(self.onMouseLeave, {}, e);\n  }\n\n  function cellExists(row, cell){\n    return !(row < 0 || row >= getDataLength() || cell < 0 || cell >= columns.length);\n  }\n\n  function getCellFromPoint(x, y){\n    var row = getRowFromPosition(y);\n    var cell = 0;\n\n    var w = 0;\n    for (var i = 0; i < columns.length && w < x; i++){\n      w += columns[i].width;\n      cell++;\n    }\n\n    if (cell < 0){\n      cell = 0;\n    }\n\n    return {\n      row: row,\n      cell: cell - 1\n    };\n  }\n\n  function getCellFromNode(cellNode){\n    // read column number from .l<columnNumber> CSS class\n    var cls = /l\\d+/.exec(cellNode.className);\n    if (!cls){\n      throw \"getCellFromNode: cannot get cell - \" + cellNode.className;\n    }\n    return parseInt(cls[0].substr(1, cls[0].length - 1), 10);\n  }\n\n  function getRowFromNode(rowNode){\n    for (var row in rowsCache)\n      for (var i in rowsCache[row].rowNode)\n        if (rowsCache[row].rowNode[i] === rowNode) return row | 0;\n\n    return null;\n  }\n\n  function getFrozenRowOffset(row){\n    var offset = (hasFrozenRows) ? (options.frozenBottom) ? (row >= actualFrozenRow) ? (h < viewportTopH) ? (actualFrozenRow * options.rowHeight) : h : 0 : (row >= actualFrozenRow) ? frozenRowsHeight : 0 : 0;\n\n    return offset;\n  }\n\n  function getCellFromEvent(e){\n    var row, cell;\n    var $cell = $(e.target).closest(\".slick-cell\", $canvas);\n    if (!$cell.length){\n      return null;\n    }\n\n    row = getRowFromNode($cell[0].parentNode);\n\n    if (hasFrozenRows){\n\n      var c = $cell.parents('.grid-canvas').offset();\n\n      var rowOffset = 0;\n      var isBottom = $cell.parents('.grid-canvas-bottom').length;\n\n      if (isBottom){\n        rowOffset = (options.frozenBottom) ? $canvasTopL.height() : frozenRowsHeight;\n      }\n\n      row = getCellFromPoint(e.clientX - c.left, e.clientY - c.top + rowOffset + $(document).scrollTop()).row;\n    }\n\n    cell = getCellFromNode($cell[0]);\n\n    if (row == null || cell == null){\n      return null;\n    } else {\n      return {\n        \"row\": row,\n        \"cell\": cell\n      };\n    }\n  }\n\n  function getCellNodeBox(row, cell){\n    if (!cellExists(row, cell)){\n      return null;\n    }\n\n    var frozenRowOffset = getFrozenRowOffset(row);\n\n    var y1 = getRowTop(row) - frozenRowOffset;\n    var y2 = y1 + options.rowHeight - 1;\n    var x1 = 0;\n    for (var i = 0; i < cell; i++){\n      x1 += columns[i].width;\n\n      if (options.frozenColumn == i){\n        x1 = 0;\n      }\n    }\n    var x2 = x1 + columns[cell].width;\n\n    return {\n      top: y1,\n      left: x1,\n      bottom: y2,\n      right: x2\n    };\n  }\n\n  //////////////////////////////////////////////////////////////////////////////////////////////\n  // Cell switching\n\n  function resetActiveCell(){\n    setActiveCellInternal(null, false);\n  }\n\n  function setFocus(){\n    if (tabbingDirection == -1){\n      $focusSink[0].focus();\n    } else {\n      $focusSink2[0].focus();\n    }\n  }\n\n  function scrollCellIntoView(row, cell, doPaging){\n    // Don't scroll to frozen cells\n    if (cell <= options.frozenColumn){\n      return;\n    }\n\n    if (row < actualFrozenRow){\n      scrollRowIntoView(row, doPaging);\n    }\n\n    var colspan = getColspan(row, cell);\n    var left = columnPosLeft[cell],\n      right = columnPosRight[cell + (colspan > 1 ? colspan - 1 : 0)],\n      scrollRight = scrollLeft + $viewportScrollContainerX.width();\n\n    if (left < scrollLeft){\n      $viewportScrollContainerX.scrollLeft(left);\n      handleScroll();\n      render();\n    } else if (right > scrollRight){\n      $viewportScrollContainerX.scrollLeft(Math.min(left, right - $viewportScrollContainerX[0].clientWidth));\n      handleScroll();\n      render();\n    }\n  }\n\n  function setActiveCellInternal(newCell, opt_editMode){\n    if (activeCellNode !== null){\n      makeActiveCellNormal();\n      $(activeCellNode).removeClass(\"active\");\n      if (rowsCache[activeRow]){\n        $(rowsCache[activeRow].rowNode).removeClass(\"active\");\n      }\n    }\n\n    var activeCellChanged = (activeCellNode !== newCell);\n    activeCellNode = newCell;\n\n    if (activeCellNode != null){\n      var $activeCellNode = $(activeCellNode);\n      var $activeCellOffset = $activeCellNode.offset();\n\n      var rowOffset = Math.floor($activeCellNode.parents('.grid-canvas').offset().top);\n      var isBottom = $activeCellNode.parents('.grid-canvas-bottom').length;\n\n      if (hasFrozenRows && isBottom){\n        rowOffset -= (options.frozenBottom) ? $canvasTopL.height() : frozenRowsHeight;\n      }\n\n      var cell = getCellFromPoint($activeCellOffset.left, Math.ceil($activeCellOffset.top) - rowOffset);\n\n      activeRow = cell.row;\n      activeCell = activePosX = activeCell = activePosX = getCellFromNode(activeCellNode[0]);\n\n      $activeCellNode.addClass(\"active\");\n      if (rowsCache[activeRow]){\n        $(rowsCache[activeRow].rowNode).addClass('active');\n      }\n\n      if (opt_editMode == null){\n        opt_editMode = (activeRow == getDataLength()) || options.autoEdit;\n      }\n\n      if (options.editable && opt_editMode && isCellPotentiallyEditable(activeRow, activeCell)){\n        clearTimeout(h_editorLoader);\n\n        if (options.asyncEditorLoading){\n          h_editorLoader = setTimeout(function(){\n            makeActiveCellEditable();\n          }, options.asyncEditorLoadDelay);\n        } else {\n          makeActiveCellEditable();\n        }\n      }\n    } else {\n      activeRow = activeCell = null;\n    }\n\n    if (activeCellChanged){\n      setTimeout(scrollActiveCellIntoView, 50);\n      trigger(self.onActiveCellChanged, getActiveCell());\n    }\n  }\n\n  function clearTextSelection(){\n    if (document.selection && document.selection.empty){\n      try {\n        //IE fails here if selected element is not in dom\n        document.selection.empty();\n      } catch (e) {\n      }\n    } else if (window.getSelection){\n      var sel = window.getSelection();\n      if (sel && sel.removeAllRanges){\n        sel.removeAllRanges();\n      }\n    }\n  }\n\n  function isCellPotentiallyEditable(row, cell){\n    var dataLength = getDataLength();\n    // is the data for this row loaded?\n    if (row < dataLength && !getDataItem(row)){\n      return false;\n    }\n\n    // are we in the Add New row?  can we create new from this cell?\n    if (columns[cell].cannotTriggerInsert && row >= dataLength){\n      return false;\n    }\n\n    // does this cell have an editor?\n    if (!getEditor(row, cell)){\n      return false;\n    }\n\n    return true;\n  }\n\n  function makeActiveCellNormal(){\n    if (!currentEditor){\n      return;\n    }\n    trigger(self.onBeforeCellEditorDestroy, {\n      editor: currentEditor\n    });\n    currentEditor.destroy();\n    currentEditor = null;\n\n    if (activeCellNode){\n      var d = getDataItem(activeRow);\n      $(activeCellNode).removeClass(\"editable invalid\");\n      if (d){\n        var column = columns[activeCell];\n        activeCellNode[0].innerHTML = callFormatter(activeRow, activeCell, getDataItemValueForColumn(d, column), column, d);\n        invalidatePostProcessingResults(activeRow);\n      }\n    }\n\n    // if there previously was text selected on a page (such as selected text in the edit cell just removed),\n    // IE can't set focus to anything else correctly\n    if (navigator.userAgent.toLowerCase().match(/msie/)){\n      clearTextSelection();\n    }\n\n    getEditorLock().deactivate(editController);\n  }\n\n  function makeActiveCellEditable(editor){\n    if (!activeCellNode){\n      return;\n    }\n    if (!options.editable){\n      throw \"Grid : makeActiveCellEditable : should never get called when options.editable is false\";\n    }\n\n    // cancel pending async call if there is one\n    clearTimeout(h_editorLoader);\n\n    if (!isCellPotentiallyEditable(activeRow, activeCell)){\n      return;\n    }\n\n    var columnDef = columns[activeCell];\n    var item = getDataItem(activeRow);\n\n    if (trigger(self.onBeforeEditCell, {\n        row: activeRow,\n        cell: activeCell,\n        item: item,\n        column: columnDef\n      }) === false){\n      setFocus();\n      return;\n    }\n\n    getEditorLock().activate(editController);\n    $(activeCellNode).addClass(\"editable\");\n\n    // don't clear the cell if a custom editor is passed through\n    if (!editor){\n      activeCellNode[0].innerHTML = \"\";\n    }\n\n    currentEditor = new (editor || getEditor(activeRow, activeCell))({\n      grid: self,\n      gridPosition: absBox($container[0]),\n      position: absBox(activeCellNode[0]),\n      container: activeCellNode,\n      column: columnDef,\n      item: item || {},\n      commitChanges: commitEditAndSetFocus,\n      cancelChanges: cancelEditAndSetFocus\n    });\n\n    if (item){\n      currentEditor.loadValue(item);\n    }\n\n    serializedEditorValue = currentEditor.serializeValue();\n\n    if (currentEditor.position){\n      handleActiveCellPositionChange();\n    }\n  }\n\n  function commitEditAndSetFocus(){\n    // if the commit fails, it would do so due to a validation error\n    // if so, do not steal the focus from the editor\n    if (getEditorLock().commitCurrentEdit()){\n      setFocus();\n      if (options.autoEdit){\n        navigateDown();\n      }\n    }\n  }\n\n  function cancelEditAndSetFocus(){\n    if (getEditorLock().cancelCurrentEdit()){\n      setFocus();\n    }\n  }\n\n  function absBox(elem){\n    var box = {\n      top: elem.offsetTop,\n      left: elem.offsetLeft,\n      bottom: 0,\n      right: 0,\n      width: $(elem).outerWidth(),\n      height: $(elem).outerHeight(),\n      visible: true\n    };\n    box.bottom = box.top + box.height;\n    box.right = box.left + box.width;\n\n    // walk up the tree\n    var offsetParent = elem.offsetParent;\n    while ((elem = elem.parentNode) != document.body){\n      if (box.visible && elem.scrollHeight != elem.offsetHeight && $(elem).css(\"overflowY\") != \"visible\"){\n        box.visible = box.bottom > elem.scrollTop && box.top < elem.scrollTop + elem.clientHeight;\n      }\n\n      if (box.visible && elem.scrollWidth != elem.offsetWidth && $(elem).css(\"overflowX\") != \"visible\"){\n        box.visible = box.right > elem.scrollLeft && box.left < elem.scrollLeft + elem.clientWidth;\n      }\n\n      box.left -= elem.scrollLeft;\n      box.top -= elem.scrollTop;\n\n      if (elem === offsetParent){\n        box.left += elem.offsetLeft;\n        box.top += elem.offsetTop;\n        offsetParent = elem.offsetParent;\n      }\n\n      box.bottom = box.top + box.height;\n      box.right = box.left + box.width;\n    }\n\n    return box;\n  }\n\n  function getActiveCellPosition(){\n    return absBox(activeCellNode[0]);\n  }\n\n  function getGridPosition(){\n    return absBox($container[0])\n  }\n\n  function handleActiveCellPositionChange(){\n    if (!activeCellNode){\n      return;\n    }\n\n    trigger(self.onActiveCellPositionChanged, {});\n\n    if (currentEditor){\n      var cellBox = getActiveCellPosition();\n      if (currentEditor.show && currentEditor.hide){\n        if (!cellBox.visible){\n          currentEditor.hide();\n        } else {\n          currentEditor.show();\n        }\n      }\n\n      if (currentEditor.position){\n        currentEditor.position(cellBox);\n      }\n    }\n  }\n\n  function getCellEditor(){\n    return currentEditor;\n  }\n\n  function getActiveCell(){\n    if (!activeCellNode){\n      return null;\n    } else {\n      return {\n        row: activeRow,\n        cell: activeCell\n      };\n    }\n  }\n\n  function getActiveCellNode(){\n    return activeCellNode;\n  }\n\n  function scrollActiveCellIntoView(){\n    if (activeRow != null && activeCell != null){\n      scrollCellIntoView(activeRow, activeCell);\n    }\n  }\n\n  function scrollRowIntoView(row, doPaging){\n\n    if (!hasFrozenRows || (!options.frozenBottom && row > actualFrozenRow - 1) || (options.frozenBottom && row < actualFrozenRow - 1)){\n\n      var viewportScrollH = $viewportScrollContainerY.height();\n\n      var rowAtTop = row * options.rowHeight;\n      var rowAtBottom = (row + 1) * options.rowHeight - viewportScrollH + (viewportHasHScroll ? scrollbarDimensions.height : 0);\n\n      // need to page down?\n      if ((row + 1) * options.rowHeight > scrollTop + viewportScrollH + offset){\n        scrollTo(doPaging ? rowAtTop : rowAtBottom);\n        render();\n      }\n      // or page up?\n      else if (row * options.rowHeight < scrollTop + offset){\n        scrollTo(doPaging ? rowAtBottom : rowAtTop);\n        render();\n      }\n    }\n  }\n\n  function scrollRowToTop(row){\n    scrollTo(row * options.rowHeight);\n    render();\n  }\n\n  function scrollPage(dir){\n    var deltaRows = dir * numVisibleRows;\n    scrollTo((getRowFromPosition(scrollTop) + deltaRows) * options.rowHeight);\n    render();\n\n    if (options.enableCellNavigation && activeRow != null){\n      var row = activeRow + deltaRows;\n      var dataLengthIncludingAddNew = getDataLengthIncludingAddNew();\n      if (row >= dataLengthIncludingAddNew){\n        row = dataLengthIncludingAddNew - 1;\n      }\n      if (row < 0){\n        row = 0;\n      }\n\n      var cell = 0,\n        prevCell = null;\n      var prevActivePosX = activePosX;\n      while (cell <= activePosX){\n        if (canCellBeActive(row, cell)){\n          prevCell = cell;\n        }\n        cell += getColspan(row, cell);\n      }\n\n      if (prevCell !== null){\n        setActiveCellInternal(getCellNode(row, prevCell));\n        activePosX = prevActivePosX;\n      } else {\n        resetActiveCell();\n      }\n    }\n  }\n\n  function navigatePageDown(){\n    scrollPage(1);\n  }\n\n  function navigatePageUp(){\n    scrollPage(-1);\n  }\n\n  function getColspan(row, cell){\n    var metadata = data.getItemMetadata && data.getItemMetadata(row);\n    if (!metadata || !metadata.columns){\n      return 1;\n    }\n\n    var columnData = columns[cell] && (metadata.columns[columns[cell].id] || metadata.columns[cell]);\n    var colspan = (columnData && columnData.colspan);\n    if (colspan === \"*\"){\n      colspan = columns.length - cell;\n    } else {\n      colspan = colspan || 1;\n    }\n\n    return colspan;\n  }\n\n  function findFirstFocusableCell(row){\n    var cell = 0;\n    while (cell < columns.length){\n      if (canCellBeActive(row, cell)){\n        return cell;\n      }\n      cell += getColspan(row, cell);\n    }\n    return null;\n  }\n\n  function findLastFocusableCell(row){\n    var cell = 0;\n    var lastFocusableCell = null;\n    while (cell < columns.length){\n      if (canCellBeActive(row, cell)){\n        lastFocusableCell = cell;\n      }\n      cell += getColspan(row, cell);\n    }\n    return lastFocusableCell;\n  }\n\n  function gotoRight(row, cell, posX){\n    if (cell >= columns.length){\n      return null;\n    }\n\n    do {\n      cell += getColspan(row, cell);\n    }\n    while (cell < columns.length && !canCellBeActive(row, cell));\n\n    if (cell < columns.length){\n      return {\n        \"row\": row,\n        \"cell\": cell,\n        \"posX\": cell\n      };\n    }\n    return null;\n  }\n\n  function gotoLeft(row, cell, posX){\n    if (cell <= 0){\n      return null;\n    }\n\n    var firstFocusableCell = findFirstFocusableCell(row);\n    if (firstFocusableCell === null || firstFocusableCell >= cell){\n      return null;\n    }\n\n    var prev = {\n      \"row\": row,\n      \"cell\": firstFocusableCell,\n      \"posX\": firstFocusableCell\n    };\n    var pos;\n    while (true){\n      pos = gotoRight(prev.row, prev.cell, prev.posX);\n      if (!pos){\n        return null;\n      }\n      if (pos.cell >= cell){\n        return prev;\n      }\n      prev = pos;\n    }\n  }\n\n  function gotoDown(row, cell, posX){\n    var prevCell;\n    var dataLengthIncludingAddNew = getDataLengthIncludingAddNew();\n    while (true){\n      if (++row >= dataLengthIncludingAddNew){\n        return null;\n      }\n\n      prevCell = cell = 0;\n      while (cell <= posX){\n        prevCell = cell;\n        cell += getColspan(row, cell);\n      }\n\n      if (canCellBeActive(row, prevCell)){\n        return {\n          \"row\": row,\n          \"cell\": prevCell,\n          \"posX\": posX\n        };\n      }\n    }\n  }\n\n  function gotoUp(row, cell, posX){\n    var prevCell;\n    while (true){\n      if (--row < 0){\n        return null;\n      }\n\n      prevCell = cell = 0;\n      while (cell <= posX){\n        prevCell = cell;\n        cell += getColspan(row, cell);\n      }\n\n      if (canCellBeActive(row, prevCell)){\n        return {\n          \"row\": row,\n          \"cell\": prevCell,\n          \"posX\": posX\n        };\n      }\n    }\n  }\n\n  function gotoNext(row, cell, posX){\n    if (row == null && cell == null){\n      row = cell = posX = 0;\n      if (canCellBeActive(row, cell)){\n        return {\n          \"row\": row,\n          \"cell\": cell,\n          \"posX\": cell\n        };\n      }\n    }\n\n    var pos = gotoRight(row, cell, posX);\n    if (pos){\n      return pos;\n    }\n\n    var firstFocusableCell = null;\n    var dataLengthIncludingAddNew = getDataLengthIncludingAddNew();\n    while (++row < dataLengthIncludingAddNew){\n      firstFocusableCell = findFirstFocusableCell(row);\n      if (firstFocusableCell !== null){\n        return {\n          \"row\": row,\n          \"cell\": firstFocusableCell,\n          \"posX\": firstFocusableCell\n        };\n      }\n    }\n    return null;\n  }\n\n  function gotoPrev(row, cell, posX){\n    if (row == null && cell == null){\n      row = getDataLengthIncludingAddNew() - 1;\n      cell = posX = columns.length - 1;\n      if (canCellBeActive(row, cell)){\n        return {\n          \"row\": row,\n          \"cell\": cell,\n          \"posX\": cell\n        };\n      }\n    }\n\n    var pos;\n    var lastSelectableCell;\n    while (!pos){\n      pos = gotoLeft(row, cell, posX);\n      if (pos){\n        break;\n      }\n      if (--row < 0){\n        return null;\n      }\n\n      cell = 0;\n      lastSelectableCell = findLastFocusableCell(row);\n      if (lastSelectableCell !== null){\n        pos = {\n          \"row\": row,\n          \"cell\": lastSelectableCell,\n          \"posX\": lastSelectableCell\n        };\n      }\n    }\n    return pos;\n  }\n\n  function navigateRight(){\n    return navigate(\"right\");\n  }\n\n  function navigateLeft(){\n    return navigate(\"left\");\n  }\n\n  function navigateDown(){\n    return navigate(\"down\");\n  }\n\n  function navigateUp(){\n    return navigate(\"up\");\n  }\n\n  function navigateNext(){\n    return navigate(\"next\");\n  }\n\n  function navigatePrev(){\n    return navigate(\"prev\");\n  }\n\n  /**\n   * @param {string} dir Navigation direction.\n   * @return {boolean} Whether navigation resulted in a change of active cell.\n   */\n  function navigate(dir){\n    if (!options.enableCellNavigation){\n      return false;\n    }\n\n    if (!activeCellNode && dir != \"prev\" && dir != \"next\"){\n      return false;\n    }\n\n    if (!getEditorLock().commitCurrentEdit()){\n      return true;\n    }\n    setFocus();\n\n    var tabbingDirections = {\n      \"up\": -1,\n      \"down\": 1,\n      \"left\": -1,\n      \"right\": 1,\n      \"prev\": -1,\n      \"next\": 1\n    };\n    tabbingDirection = tabbingDirections[dir];\n\n    var stepFunctions = {\n      \"up\": gotoUp,\n      \"down\": gotoDown,\n      \"left\": gotoLeft,\n      \"right\": gotoRight,\n      \"prev\": gotoPrev,\n      \"next\": gotoNext\n    };\n    var stepFn = stepFunctions[dir];\n    var pos = stepFn(activeRow, activeCell, activePosX);\n    if (pos){\n      if (hasFrozenRows && options.frozenBottom & pos.row == getDataLength()){\n        return;\n      }\n\n      var isAddNewRow = (pos.row == getDataLength());\n\n      if ((!options.frozenBottom && pos.row >= actualFrozenRow) || (options.frozenBottom && pos.row < actualFrozenRow)){\n        scrollCellIntoView(pos.row, pos.cell, !isAddNewRow);\n      }\n\n      setActiveCellInternal(getCellNode(pos.row, pos.cell))\n      activePosX = pos.posX;\n      return true;\n    } else {\n      setActiveCellInternal(getCellNode(activeRow, activeCell));\n      return false;\n    }\n  }\n\n  function getCellNode(row, cell){\n    if (rowsCache[row]){\n      ensureCellNodesInRowsCache(row);\n      return rowsCache[row].cellNodesByColumnIdx[cell];\n    }\n    return null;\n  }\n\n  function setActiveCell(row, cell){\n    if (!initialized){\n      return;\n    }\n    if (row > getDataLength() || row < 0 || cell >= columns.length || cell < 0){\n      return;\n    }\n\n    if (!options.enableCellNavigation){\n      return;\n    }\n\n    scrollCellIntoView(row, cell, false);\n    setActiveCellInternal(getCellNode(row, cell), false);\n  }\n\n  function canCellBeActive(row, cell){\n    if (!options.enableCellNavigation || row >= getDataLengthIncludingAddNew() || row < 0 || cell >= columns.length || cell < 0){\n      return false;\n    }\n\n    var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);\n    if (rowMetadata && typeof rowMetadata.focusable === \"boolean\"){\n      return rowMetadata.focusable;\n    }\n\n    var columnMetadata = rowMetadata && rowMetadata.columns;\n    if (columnMetadata && columns[cell] && columnMetadata[columns[cell].id] && typeof columnMetadata[columns[cell].id].focusable === \"boolean\"){\n      return columnMetadata[columns[cell].id].focusable;\n    }\n    if (columnMetadata && columnMetadata[cell] && typeof columnMetadata[cell].focusable === \"boolean\"){\n      return columnMetadata[cell].focusable;\n    }\n\n    return columns[cell] && columns[cell].focusable;\n  }\n\n  function canCellBeSelected(row, cell){\n    if (row >= getDataLength() || row < 0 || cell >= columns.length || cell < 0){\n      return false;\n    }\n\n    var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);\n    if (rowMetadata && typeof rowMetadata.selectable === \"boolean\"){\n      return rowMetadata.selectable;\n    }\n\n    var columnMetadata = rowMetadata && rowMetadata.columns && (rowMetadata.columns[columns[cell].id] || rowMetadata.columns[cell]);\n    if (columnMetadata && typeof columnMetadata.selectable === \"boolean\"){\n      return columnMetadata.selectable;\n    }\n\n    return columns[cell].selectable;\n  }\n\n  function gotoCell(row, cell, forceEdit){\n    if (!initialized){\n      return;\n    }\n    if (!canCellBeActive(row, cell)){\n      return;\n    }\n\n    if (!getEditorLock().commitCurrentEdit()){\n      return;\n    }\n\n    scrollCellIntoView(row, cell, false);\n\n    var newCell = getCellNode(row, cell);\n\n    // if selecting the 'add new' row, start editing right away\n    setActiveCellInternal(newCell, forceEdit || (row === getDataLength()) || options.autoEdit);\n\n    // if no editor was created, set the focus back on the grid\n    if (!currentEditor){\n      setFocus();\n    }\n  }\n\n  //////////////////////////////////////////////////////////////////////////////////////////////\n  // IEditor implementation for the editor lock\n\n  function commitCurrentEdit(){\n    var item = getDataItem(activeRow);\n    var column = columns[activeCell];\n\n    if (currentEditor){\n      if (currentEditor.isValueChanged()){\n        var validationResults = currentEditor.validate();\n\n        if (validationResults.valid){\n          if (activeRow < getDataLength()){\n            var editCommand = {\n              row: activeRow,\n              cell: activeCell,\n              editor: currentEditor,\n              serializedValue: currentEditor.serializeValue(),\n              prevSerializedValue: serializedEditorValue,\n              execute: function(){\n                this.editor.applyValue(item, this.serializedValue);\n                updateRow(this.row);\n                trigger(self.onCellChange, {\n                  row: activeRow,\n                  cell: activeCell,\n                  item: item\n                });\n              },\n              undo: function(){\n                this.editor.applyValue(item, this.prevSerializedValue);\n                updateRow(this.row);\n                trigger(self.onCellChange, {\n                  row: activeRow,\n                  cell: activeCell,\n                  item: item\n                });\n              }\n            };\n\n            if (options.editCommandHandler){\n              makeActiveCellNormal();\n              options.editCommandHandler(item, column, editCommand);\n            } else {\n              editCommand.execute();\n              makeActiveCellNormal();\n            }\n\n          } else {\n            var newItem = {};\n            currentEditor.applyValue(newItem, currentEditor.serializeValue());\n            makeActiveCellNormal();\n            trigger(self.onAddNewRow, {\n              item: newItem,\n              column: column\n            });\n          }\n\n          // check whether the lock has been re-acquired by event handlers\n          return !getEditorLock().isActive();\n        } else {\n          // Re-add the CSS class to trigger transitions, if any.\n          $(activeCellNode).removeClass(\"invalid\");\n          $(activeCellNode).width(); // force layout\n          $(activeCellNode).addClass(\"invalid\");\n\n          trigger(self.onValidationError, {\n            editor: currentEditor,\n            cellNode: activeCellNode,\n            validationResults: validationResults,\n            row: activeRow,\n            cell: activeCell,\n            column: column\n          });\n\n          currentEditor.focus();\n          return false;\n        }\n      }\n\n      makeActiveCellNormal();\n    }\n    return true;\n  }\n\n  function cancelCurrentEdit(){\n    makeActiveCellNormal();\n    return true;\n  }\n\n  function rowsToRanges(rows){\n    var ranges = [];\n    var lastCell = columns.length - 1;\n    for (var i = 0; i < rows.length; i++){\n      ranges.push(new Slick.Range(rows[i], 0, rows[i], lastCell));\n    }\n    return ranges;\n  }\n\n  function getSelectedRows(){\n    if (!selectionModel){\n      throw \"Selection model is not set\";\n    }\n    return selectedRows;\n  }\n\n  function setSelectedRows(rows){\n    if (!selectionModel){\n      throw \"Selection model is not set\";\n    }\n    selectionModel.setSelectedRanges(rowsToRanges(rows));\n  }\n\n  //////////////////////////////////////////////////////////////////////////////////////////////\n  // Debug\n\n  this.debug = function(){\n    var s = \"\";\n\n    s += (\"\\n\" + \"counter_rows_rendered:  \" + counter_rows_rendered);\n    s += (\"\\n\" + \"counter_rows_removed:  \" + counter_rows_removed);\n    s += (\"\\n\" + \"renderedRows:  \" + renderedRows);\n    s += (\"\\n\" + \"numVisibleRows:  \" + numVisibleRows);\n    s += (\"\\n\" + \"maxSupportedCssHeight:  \" + maxSupportedCssHeight);\n    s += (\"\\n\" + \"n(umber of pages):  \" + n);\n    s += (\"\\n\" + \"(current) page:  \" + page);\n    s += (\"\\n\" + \"page height (ph):  \" + ph);\n    s += (\"\\n\" + \"vScrollDir:  \" + vScrollDir);\n\n    alert(s);\n  };\n\n  // a debug helper to be able to access private members\n  this.eval = function(expr){\n    return eval(expr);\n  };\n\n  //////////////////////////////////////////////////////////////////////////////////////////////\n  // Public API\n\n  $.extend(this, {\n    \"slickGridVersion\": \"2.1\",\n\n    // Events\n    \"onScroll\": new Slick.Event(),\n    \"onSort\": new Slick.Event(),\n    \"onHeaderMouseEnter\": new Slick.Event(),\n    \"onHeaderMouseLeave\": new Slick.Event(),\n    \"onHeaderContextMenu\": new Slick.Event(),\n    \"onHeaderClick\": new Slick.Event(),\n    \"onHeaderCellRendered\": new Slick.Event(),\n    \"onBeforeHeaderCellDestroy\": new Slick.Event(),\n    \"onHeaderRowCellRendered\": new Slick.Event(),\n    \"onFooterRowCellRendered\": new Slick.Event(),\n    \"onBeforeHeaderRowCellDestroy\": new Slick.Event(),\n    \"onBeforeFooterRowCellDestroy\": new Slick.Event(),\n    \"onMouseEnter\": new Slick.Event(),\n    \"onMouseLeave\": new Slick.Event(),\n    \"onClick\": new Slick.Event(),\n    \"onDblClick\": new Slick.Event(),\n    \"onContextMenu\": new Slick.Event(),\n    \"onKeyDown\": new Slick.Event(),\n    \"onAddNewRow\": new Slick.Event(),\n    \"onValidationError\": new Slick.Event(),\n    \"onViewportChanged\": new Slick.Event(),\n    \"onColumnsReordered\": new Slick.Event(),\n    \"onColumnsResized\": new Slick.Event(),\n    \"onCellChange\": new Slick.Event(),\n    \"onBeforeEditCell\": new Slick.Event(),\n    \"onBeforeCellEditorDestroy\": new Slick.Event(),\n    \"onBeforeDestroy\": new Slick.Event(),\n    \"onActiveCellChanged\": new Slick.Event(),\n    \"onActiveCellPositionChanged\": new Slick.Event(),\n    \"onDragInit\": new Slick.Event(),\n    \"onDragStart\": new Slick.Event(),\n    \"onDrag\": new Slick.Event(),\n    \"onDragEnd\": new Slick.Event(),\n    \"onSelectedRowsChanged\": new Slick.Event(),\n    \"onCellCssStylesChanged\": new Slick.Event(),\n\n    // Methods\n    \"registerPlugin\": registerPlugin,\n    \"unregisterPlugin\": unregisterPlugin,\n    \"getColumns\": getColumns,\n    \"setColumns\": setColumns,\n    \"getColumnIndex\": getColumnIndex,\n    \"updateColumnHeader\": updateColumnHeader,\n    \"setSortColumn\": setSortColumn,\n    \"setSortColumns\": setSortColumns,\n    \"getSortColumns\": getSortColumns,\n    \"autosizeColumns\": autosizeColumns,\n    \"getOptions\": getOptions,\n    \"setOptions\": setOptions,\n    \"getData\": getData,\n    \"getDataLength\": getDataLength,\n    \"getDataItem\": getDataItem,\n    \"setData\": setData,\n    \"getSelectionModel\": getSelectionModel,\n    \"setSelectionModel\": setSelectionModel,\n    \"getSelectedRows\": getSelectedRows,\n    \"setSelectedRows\": setSelectedRows,\n    \"getContainerNode\": getContainerNode,\n\n    \"render\": render,\n    \"invalidate\": invalidate,\n    \"invalidateRow\": invalidateRow,\n    \"invalidateRows\": invalidateRows,\n    \"invalidateAllRows\": invalidateAllRows,\n    \"updateCell\": updateCell,\n    \"updateRow\": updateRow,\n    \"getViewport\": getVisibleRange,\n    \"getRenderedRange\": getRenderedRange,\n    \"resizeCanvas\": resizeCanvas,\n    \"updateRowCount\": updateRowCount,\n    \"scrollRowIntoView\": scrollRowIntoView,\n    \"scrollRowToTop\": scrollRowToTop,\n    \"scrollCellIntoView\": scrollCellIntoView,\n    \"getCanvasNode\": getCanvasNode,\n    \"getCanvases\": getCanvases,\n    \"getActiveCanvasNode\": getActiveCanvasNode,\n    \"setActiveCanvasNode\": setActiveCanvasNode,\n    \"getViewportNode\": getViewportNode,\n    \"getActiveViewportNode\": getActiveViewportNode,\n    \"setActiveViewportNode\": setActiveViewportNode,\n    \"focus\": setFocus,\n\n    \"getCellFromPoint\": getCellFromPoint,\n    \"getCellFromEvent\": getCellFromEvent,\n    \"getActiveCell\": getActiveCell,\n    \"setActiveCell\": setActiveCell,\n    \"getActiveCellNode\": getActiveCellNode,\n    \"getActiveCellPosition\": getActiveCellPosition,\n    \"resetActiveCell\": resetActiveCell,\n    \"editActiveCell\": makeActiveCellEditable,\n    \"getCellEditor\": getCellEditor,\n    \"getCellNode\": getCellNode,\n    \"getCellNodeBox\": getCellNodeBox,\n    \"canCellBeSelected\": canCellBeSelected,\n    \"canCellBeActive\": canCellBeActive,\n    \"navigatePrev\": navigatePrev,\n    \"navigateNext\": navigateNext,\n    \"navigateUp\": navigateUp,\n    \"navigateDown\": navigateDown,\n    \"navigateLeft\": navigateLeft,\n    \"navigateRight\": navigateRight,\n    \"navigatePageUp\": navigatePageUp,\n    \"navigatePageDown\": navigatePageDown,\n    \"gotoCell\": gotoCell,\n    \"getTopPanel\": getTopPanel,\n    \"setTopPanelVisibility\": setTopPanelVisibility,\n    \"setHeaderRowVisibility\": setHeaderRowVisibility,\n    \"getHeaderRow\": getHeaderRow,\n    \"getHeaderRowColumn\": getHeaderRowColumn,\n    \"setFooterRowVisibility\": setFooterRowVisibility,\n    \"getFooterRow\": getFooterRow,\n    \"getFooterRowColumn\": getFooterRowColumn,\n    \"getGridPosition\": getGridPosition,\n    \"flashCell\": flashCell,\n    \"addCellCssStyles\": addCellCssStyles,\n    \"setCellCssStyles\": setCellCssStyles,\n    \"removeCellCssStyles\": removeCellCssStyles,\n    \"getCellCssStyles\": getCellCssStyles,\n    \"getFrozenRowOffset\": getFrozenRowOffset,\n\n    \"init\": finishInitialization,\n    \"destroy\": destroy,\n\n    // IEditor implementation\n    \"getEditorLock\": getEditorLock,\n    \"getEditController\": getEditController\n  });\n\n  init();\n}\n\n\n\n// WEBPACK FOOTER //\n// ../src/slick-frozen.grid.js","import Slick from './slick.core';\nimport $ from 'jquery';\n\nconst Aggregators = {\n  Avg: AvgAggregator,\n  Min: MinAggregator,\n  Max: MaxAggregator,\n  Sum: SumAggregator\n};\n\nconst Data = {\n  DataView,\n  Aggregators\n};\n\nexport default Data;\nSlick.Data = Data;\n\n/** *\n * A sample Model implementation.\n * Provides a filtered view of the underlying data.\n *\n * Relies on the data item having an \"id\" property uniquely identifying it.\n */\nfunction DataView(options){\n  var self = this;\n\n  var defaults = {\n    groupItemMetadataProvider: null,\n    inlineFilters: false\n  };\n\n  // private\n  var idProperty = 'id';  // property holding a unique row id\n  var items = [];         // data by index\n  var rows = [];          // data by row\n  var idxById = {};       // indexes by id\n  var rowsById = null;    // rows by id; lazy-calculated\n  var filter = null;      // filter function\n  var updated = null;     // updated item ids\n  var suspend = false;    // suspends the recalculation\n  var sortAsc = true;\n  var fastSortField;\n  var sortComparer;\n  var refreshHints = {};\n  var prevRefreshHints = {};\n  var filterArgs;\n  var filteredItems = [];\n  var compiledFilter;\n  var compiledFilterWithCaching;\n  var filterCache = [];\n\n  // grouping\n  var groupingInfoDefaults = {\n    getter: null,\n    formatter: null,\n    comparer: function(a, b){\n      return (a.value === b.value ? 0 :\n          (a.value > b.value ? 1 : -1)\n      );\n    },\n    predefinedValues: [],\n    aggregators: [],\n    aggregateEmpty: false,\n    aggregateCollapsed: false,\n    aggregateChildGroups: false,\n    collapsed: false,\n    displayTotalsRow: true,\n    lazyTotalsCalculation: false\n  };\n  var groupingInfos = [];\n  var groups = [];\n  var toggledGroupsByLevel = [];\n  var groupingDelimiter = ':|:';\n\n  var pagesize = 0;\n  var pagenum = 0;\n  var totalRows = 0;\n\n  // events\n  var onRowCountChanged = new Slick.Event();\n  var onRowsChanged = new Slick.Event();\n  var onPagingInfoChanged = new Slick.Event();\n\n  options = $.extend(true, {}, defaults, options);\n\n  function beginUpdate(){\n    suspend = true;\n  }\n\n  function endUpdate(){\n    suspend = false;\n    refresh();\n  }\n\n  function setRefreshHints(hints){\n    refreshHints = hints;\n  }\n\n  function setFilterArgs(args){\n    filterArgs = args;\n  }\n\n  function updateIdxById(startingIndex){\n    startingIndex = startingIndex || 0;\n    var id;\n    for (var i = startingIndex, l = items.length; i < l; i++){\n      id = items[i][idProperty];\n      if (id === undefined){\n        throw \"Each data element must implement a unique 'id' property\";\n      }\n      idxById[id] = i;\n    }\n  }\n\n  function ensureIdUniqueness(){\n    var id;\n    for (var i = 0, l = items.length; i < l; i++){\n      id = items[i][idProperty];\n      if (id === undefined || idxById[id] !== i){\n        throw \"Each data element must implement a unique 'id' property\";\n      }\n    }\n  }\n\n  function getItems(){\n    return items;\n  }\n\n  function setItems(data, objectIdProperty){\n    if (objectIdProperty !== undefined){\n      idProperty = objectIdProperty;\n    }\n    items = filteredItems = data;\n    idxById = {};\n    updateIdxById();\n    ensureIdUniqueness();\n    refresh();\n  }\n\n  function setPagingOptions(args){\n    if (args.pageSize != undefined){\n      pagesize = args.pageSize;\n      pagenum = pagesize ? Math.min(pagenum, Math.max(0, Math.ceil(totalRows / pagesize) - 1)) : 0;\n    }\n\n    if (args.pageNum != undefined){\n      pagenum = Math.min(args.pageNum, Math.max(0, Math.ceil(totalRows / pagesize) - 1));\n    }\n\n    onPagingInfoChanged.notify(getPagingInfo(), null, self);\n\n    refresh();\n  }\n\n  function getPagingInfo(){\n    var totalPages = pagesize ? Math.max(1, Math.ceil(totalRows / pagesize)) : 1;\n    return {pageSize: pagesize, pageNum: pagenum, totalRows: totalRows, totalPages: totalPages, dataView: self};\n  }\n\n  function sort(comparer, ascending){\n    sortAsc = ascending;\n    sortComparer = comparer;\n    fastSortField = null;\n    if (ascending === false){\n      items.reverse();\n    }\n    items.sort(comparer);\n    if (ascending === false){\n      items.reverse();\n    }\n    idxById = {};\n    updateIdxById();\n    refresh();\n  }\n\n  /** *\n   * Provides a workaround for the extremely slow sorting in IE.\n   * Does a [lexicographic] sort on a give column by temporarily overriding Object.prototype.toString\n   * to return the value of that field and then doing a native Array.sort().\n   */\n  function fastSort(field, ascending){\n    sortAsc = ascending;\n    fastSortField = field;\n    sortComparer = null;\n    var oldToString = Object.prototype.toString;\n    Object.prototype.toString = (typeof field == 'function') ? field : function(){\n      return this[field];\n    };\n    // an extra reversal for descending sort keeps the sort stable\n    // (assuming a stable native sort implementation, which isn't true in some cases)\n    if (ascending === false){\n      items.reverse();\n    }\n    items.sort();\n    Object.prototype.toString = oldToString;\n    if (ascending === false){\n      items.reverse();\n    }\n    idxById = {};\n    updateIdxById();\n    refresh();\n  }\n\n  function reSort(){\n    if (sortComparer){\n      sort(sortComparer, sortAsc);\n    } else if (fastSortField){\n      fastSort(fastSortField, sortAsc);\n    }\n  }\n\n  function setFilter(filterFn){\n    filter = filterFn;\n    if (options.inlineFilters){\n      compiledFilter = compileFilter();\n      compiledFilterWithCaching = compileFilterWithCaching();\n    }\n    refresh();\n  }\n\n  function getGrouping(){\n    return groupingInfos;\n  }\n\n  function setGrouping(groupingInfo){\n    if (!options.groupItemMetadataProvider){\n      options.groupItemMetadataProvider = new Slick.Data.GroupItemMetadataProvider();\n    }\n\n    groups = [];\n    toggledGroupsByLevel = [];\n    groupingInfo = groupingInfo || [];\n    groupingInfos = (groupingInfo instanceof Array) ? groupingInfo : [groupingInfo];\n\n    for (var i = 0; i < groupingInfos.length; i++){\n      var gi = groupingInfos[i] = $.extend(true, {}, groupingInfoDefaults, groupingInfos[i]);\n      gi.getterIsAFn = typeof gi.getter === 'function';\n\n      // pre-compile accumulator loops\n      gi.compiledAccumulators = [];\n      var idx = gi.aggregators.length;\n      while (idx--){\n        gi.compiledAccumulators[idx] = compileAccumulatorLoop(gi.aggregators[idx]);\n      }\n\n      toggledGroupsByLevel[i] = {};\n    }\n\n    refresh();\n  }\n\n  /**\n   * @deprecated Please use {@link setGrouping}.\n   */\n  function groupBy(valueGetter, valueFormatter, sortComparer){\n    if (valueGetter == null){\n      setGrouping([]);\n      return;\n    }\n\n    setGrouping({\n      getter: valueGetter,\n      formatter: valueFormatter,\n      comparer: sortComparer\n    });\n  }\n\n  /**\n   * @deprecated Please use {@link setGrouping}.\n   */\n  function setAggregators(groupAggregators, includeCollapsed){\n    if (!groupingInfos.length){\n      throw new Error('At least one grouping must be specified before calling setAggregators().');\n    }\n\n    groupingInfos[0].aggregators = groupAggregators;\n    groupingInfos[0].aggregateCollapsed = includeCollapsed;\n\n    setGrouping(groupingInfos);\n  }\n\n  function getItemByIdx(i){\n    return items[i];\n  }\n\n  function getIdxById(id){\n    return idxById[id];\n  }\n\n  function ensureRowsByIdCache(){\n    if (!rowsById){\n      rowsById = {};\n      for (var i = 0, l = rows.length; i < l; i++){\n        rowsById[rows[i][idProperty]] = i;\n      }\n    }\n  }\n\n  function getRowById(id){\n    ensureRowsByIdCache();\n    return rowsById[id];\n  }\n\n  function getItemById(id){\n    return items[idxById[id]];\n  }\n\n  function mapIdsToRows(idArray){\n    var rows = [];\n    ensureRowsByIdCache();\n    for (var i = 0, l = idArray.length; i < l; i++){\n      var row = rowsById[idArray[i]];\n      if (row != null){\n        rows[rows.length] = row;\n      }\n    }\n    return rows;\n  }\n\n  function mapRowsToIds(rowArray){\n    var ids = [];\n    for (var i = 0, l = rowArray.length; i < l; i++){\n      if (rowArray[i] < rows.length){\n        ids[ids.length] = rows[rowArray[i]][idProperty];\n      }\n    }\n    return ids;\n  }\n\n  function updateItem(id, item){\n    if (idxById[id] === undefined || id !== item[idProperty]){\n      throw 'Invalid or non-matching id';\n    }\n    items[idxById[id]] = item;\n    if (!updated){\n      updated = {};\n    }\n    updated[id] = true;\n    refresh();\n  }\n\n  function insertItem(insertBefore, item){\n    items.splice(insertBefore, 0, item);\n    updateIdxById(insertBefore);\n    refresh();\n  }\n\n  function addItem(item){\n    items.push(item);\n    updateIdxById(items.length - 1);\n    refresh();\n  }\n\n  function deleteItem(id){\n    var idx = idxById[id];\n    if (idx === undefined){\n      throw 'Invalid id';\n    }\n    delete idxById[id];\n    items.splice(idx, 1);\n    updateIdxById(idx);\n    refresh();\n  }\n\n  function getLength(){\n    return rows.length;\n  }\n\n  function getItem(i){\n    var item = rows[i];\n\n    // if this is a group row, make sure totals are calculated and update the title\n    if (item && item.__group && item.totals && !item.totals.initialized){\n      var gi = groupingInfos[item.level];\n      if (!gi.displayTotalsRow){\n        calculateTotals(item.totals);\n        item.title = gi.formatter ? gi.formatter(item) : item.value;\n      }\n    }\n    // if this is a totals row, make sure it's calculated\n    else if (item && item.__groupTotals && !item.initialized){\n      calculateTotals(item);\n    }\n\n    return item;\n  }\n\n  function getItemMetadata(i){\n    var item = rows[i];\n    if (item === undefined){\n      return null;\n    }\n\n    // overrides for grouping rows\n    if (item.__group){\n      return options.groupItemMetadataProvider.getGroupRowMetadata(item);\n    }\n\n    // overrides for totals rows\n    if (item.__groupTotals){\n      return options.groupItemMetadataProvider.getTotalsRowMetadata(item);\n    }\n\n    return null;\n  }\n\n  function expandCollapseAllGroups(level, collapse){\n    if (level == null){\n      for (var i = 0; i < groupingInfos.length; i++){\n        toggledGroupsByLevel[i] = {};\n        groupingInfos[i].collapsed = collapse;\n      }\n    } else {\n      toggledGroupsByLevel[level] = {};\n      groupingInfos[level].collapsed = collapse;\n    }\n    refresh();\n  }\n\n  /**\n   * @param level {Number} Optional level to collapse.  If not specified, applies to all levels.\n   */\n  function collapseAllGroups(level){\n    expandCollapseAllGroups(level, true);\n  }\n\n  /**\n   * @param level {Number} Optional level to expand.  If not specified, applies to all levels.\n   */\n  function expandAllGroups(level){\n    expandCollapseAllGroups(level, false);\n  }\n\n  function expandCollapseGroup(level, groupingKey, collapse){\n    toggledGroupsByLevel[level][groupingKey] = groupingInfos[level].collapsed ^ collapse;\n    refresh();\n  }\n\n  /**\n   * @param varArgs Either a Slick.Group's \"groupingKey\" property, or a\n   *     variable argument list of grouping values denoting a unique path to the row.  For\n   *     example, calling collapseGroup('high', '10%') will collapse the '10%' subgroup of\n   *     the 'high' group.\n   */\n  function collapseGroup(varArgs){\n    var args = Array.prototype.slice.call(arguments);\n    var arg0 = args[0];\n    if (args.length == 1 && arg0.indexOf(groupingDelimiter) != -1){\n      expandCollapseGroup(arg0.split(groupingDelimiter).length - 1, arg0, true);\n    } else {\n      expandCollapseGroup(args.length - 1, args.join(groupingDelimiter), true);\n    }\n  }\n\n  /**\n   * @param varArgs Either a Slick.Group's \"groupingKey\" property, or a\n   *     variable argument list of grouping values denoting a unique path to the row.  For\n   *     example, calling expandGroup('high', '10%') will expand the '10%' subgroup of\n   *     the 'high' group.\n   */\n  function expandGroup(varArgs){\n    var args = Array.prototype.slice.call(arguments);\n    var arg0 = args[0];\n    if (args.length == 1 && arg0.indexOf(groupingDelimiter) != -1){\n      expandCollapseGroup(arg0.split(groupingDelimiter).length - 1, arg0, false);\n    } else {\n      expandCollapseGroup(args.length - 1, args.join(groupingDelimiter), false);\n    }\n  }\n\n  function getGroups(){\n    return groups;\n  }\n\n  function extractGroups(rows, parentGroup){\n    var group;\n    var val;\n    var groups = [];\n    var groupsByVal = {};\n    var r;\n    var level = parentGroup ? parentGroup.level + 1 : 0;\n    var gi = groupingInfos[level];\n\n    for (var i = 0, l = gi.predefinedValues.length; i < l; i++){\n      val = gi.predefinedValues[i];\n      group = groupsByVal[val];\n      if (!group){\n        group = new Slick.Group();\n        group.value = val;\n        group.level = level;\n        group.groupingKey = (parentGroup ? parentGroup.groupingKey + groupingDelimiter : '') + val;\n        groups[groups.length] = group;\n        groupsByVal[val] = group;\n      }\n    }\n\n    for (var i = 0, l = rows.length; i < l; i++){\n      r = rows[i];\n      val = gi.getterIsAFn ? gi.getter(r) : r[gi.getter];\n      group = groupsByVal[val];\n      if (!group){\n        group = new Slick.Group();\n        group.value = val;\n        group.level = level;\n        group.groupingKey = (parentGroup ? parentGroup.groupingKey + groupingDelimiter : '') + val;\n        groups[groups.length] = group;\n        groupsByVal[val] = group;\n      }\n\n      group.rows[group.count++] = r;\n    }\n\n    if (level < groupingInfos.length - 1){\n      for (var i = 0; i < groups.length; i++){\n        group = groups[i];\n        group.groups = extractGroups(group.rows, group);\n      }\n    }\n\n    groups.sort(groupingInfos[level].comparer);\n\n    return groups;\n  }\n\n  function calculateTotals(totals){\n    var group = totals.group;\n    var gi = groupingInfos[group.level];\n    var isLeafLevel = (group.level == groupingInfos.length);\n    var agg, idx = gi.aggregators.length;\n\n    if (!isLeafLevel && gi.aggregateChildGroups){\n      // make sure all the subgroups are calculated\n      var i = group.groups.length;\n      while (i--){\n        if (!group.groups[i].totals.initialized){\n          calculateTotals(group.groups[i].totals);\n        }\n      }\n    }\n\n    while (idx--){\n      agg = gi.aggregators[idx];\n      agg.init();\n      if (!isLeafLevel && gi.aggregateChildGroups){\n        gi.compiledAccumulators[idx].call(agg, group.groups);\n      } else {\n        gi.compiledAccumulators[idx].call(agg, group.rows);\n      }\n      agg.storeResult(totals);\n    }\n    totals.initialized = true;\n  }\n\n  function addGroupTotals(group){\n    var gi = groupingInfos[group.level];\n    var totals = new Slick.GroupTotals();\n    totals.group = group;\n    group.totals = totals;\n    if (!gi.lazyTotalsCalculation){\n      calculateTotals(totals);\n    }\n  }\n\n  function addTotals(groups, level){\n    level = level || 0;\n    var gi = groupingInfos[level];\n    var groupCollapsed = gi.collapsed;\n    var toggledGroups = toggledGroupsByLevel[level];\n    var idx = groups.length, g;\n    while (idx--){\n      g = groups[idx];\n\n      if (g.collapsed && !gi.aggregateCollapsed){\n        continue;\n      }\n\n      // Do a depth-first aggregation so that parent group aggregators can access subgroup totals.\n      if (g.groups){\n        addTotals(g.groups, level + 1);\n      }\n\n      if (gi.aggregators.length && (\n        gi.aggregateEmpty || g.rows.length || (g.groups && g.groups.length))){\n        addGroupTotals(g);\n      }\n\n      g.collapsed = groupCollapsed ^ toggledGroups[g.groupingKey];\n      g.title = gi.formatter ? gi.formatter(g) : g.value;\n    }\n  }\n\n  function flattenGroupedRows(groups, level){\n    level = level || 0;\n    var gi = groupingInfos[level];\n    var groupedRows = [], rows, gl = 0, g;\n    for (var i = 0, l = groups.length; i < l; i++){\n      g = groups[i];\n      groupedRows[gl++] = g;\n\n      if (!g.collapsed){\n        rows = g.groups ? flattenGroupedRows(g.groups, level + 1) : g.rows;\n        for (var j = 0, jj = rows.length; j < jj; j++){\n          groupedRows[gl++] = rows[j];\n        }\n      }\n\n      if (g.totals && gi.displayTotalsRow && (!g.collapsed || gi.aggregateCollapsed)){\n        groupedRows[gl++] = g.totals;\n      }\n    }\n    return groupedRows;\n  }\n\n  function getFunctionInfo(fn){\n    var fnRegex = /^function[^(]*\\(([^)]*)\\)\\s*{([\\s\\S]*)}$/;\n    var matches = fn.toString().match(fnRegex);\n    return {\n      params: matches[1].split(','),\n      body: matches[2]\n    };\n  }\n\n  function compileAccumulatorLoop(aggregator){\n    var accumulatorInfo = getFunctionInfo(aggregator.accumulate);\n    var fn = new Function(\n      '_items',\n      'for (var ' + accumulatorInfo.params[0] + ', _i=0, _il=_items.length; _i<_il; _i++) {' +\n      accumulatorInfo.params[0] + ' = _items[_i]; ' +\n      accumulatorInfo.body +\n      '}'\n    );\n    fn.displayName = 'compiledAccumulatorLoop';\n    return fn;\n  }\n\n  function compileFilter(){\n    var filterInfo = getFunctionInfo(filter);\n\n    var filterPath1 = '{ continue _coreloop; }$1';\n    var filterPath2 = '{ _retval[_idx++] = $item$; continue _coreloop; }$1';\n    // make some allowances for minification - there's only so far we can go with RegEx\n    var filterBody = filterInfo.body\n      .replace(/return false\\s*([;}]|\\}|$)/gi, filterPath1)\n      .replace(/return!1([;}]|\\}|$)/gi, filterPath1)\n      .replace(/return true\\s*([;}]|\\}|$)/gi, filterPath2)\n      .replace(/return!0([;}]|\\}|$)/gi, filterPath2)\n      .replace(/return ([^;}]+?)\\s*([;}]|$)/gi,\n        '{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2');\n\n    // This preserves the function template code after JS compression,\n    // so that replace() commands still work as expected.\n    var tpl = [\n      // \"function(_items, _args) { \",\n      'var _retval = [], _idx = 0; ',\n      'var $item$, $args$ = _args; ',\n      '_coreloop: ',\n      'for (var _i = 0, _il = _items.length; _i < _il; _i++) { ',\n      '$item$ = _items[_i]; ',\n      '$filter$; ',\n      '} ',\n      'return _retval; '\n      // \"}\"\n    ].join('');\n    tpl = tpl.replace(/\\$filter\\$/gi, filterBody);\n    tpl = tpl.replace(/\\$item\\$/gi, filterInfo.params[0]);\n    tpl = tpl.replace(/\\$args\\$/gi, filterInfo.params[1]);\n\n    var fn = new Function('_items,_args', tpl);\n    fn.displayName = fn.name = 'compiledFilter';\n\n    return fn;\n  }\n\n  function compileFilterWithCaching(){\n    var filterInfo = getFunctionInfo(filter);\n\n    var filterPath1 = '{ continue _coreloop; }$1';\n    var filterPath2 = '{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1';\n    // make some allowances for minification - there's only so far we can go with RegEx\n    var filterBody = filterInfo.body\n      .replace(/return false\\s*([;}]|\\}|$)/gi, filterPath1)\n      .replace(/return!1([;}]|\\}|$)/gi, filterPath1)\n      .replace(/return true\\s*([;}]|\\}|$)/gi, filterPath2)\n      .replace(/return!0([;}]|\\}|$)/gi, filterPath2)\n      .replace(/return ([^;}]+?)\\s*([;}]|$)/gi,\n        '{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2');\n\n    // This preserves the function template code after JS compression,\n    // so that replace() commands still work as expected.\n    var tpl = [\n      // \"function(_items, _args, _cache) { \",\n      'var _retval = [], _idx = 0; ',\n      'var $item$, $args$ = _args; ',\n      '_coreloop: ',\n      'for (var _i = 0, _il = _items.length; _i < _il; _i++) { ',\n      '$item$ = _items[_i]; ',\n      'if (_cache[_i]) { ',\n      '_retval[_idx++] = $item$; ',\n      'continue _coreloop; ',\n      '} ',\n      '$filter$; ',\n      '} ',\n      'return _retval; '\n      // \"}\"\n    ].join('');\n    tpl = tpl.replace(/\\$filter\\$/gi, filterBody);\n    tpl = tpl.replace(/\\$item\\$/gi, filterInfo.params[0]);\n    tpl = tpl.replace(/\\$args\\$/gi, filterInfo.params[1]);\n\n    var fn = new Function('_items,_args,_cache', tpl);\n    fn.displayName = 'compiledFilterWithCaching';\n    return fn;\n  }\n\n  function uncompiledFilter(items, args){\n    var retval = [], idx = 0;\n\n    for (var i = 0, ii = items.length; i < ii; i++){\n      if (filter(items[i], args)){\n        retval[idx++] = items[i];\n      }\n    }\n\n    return retval;\n  }\n\n  function uncompiledFilterWithCaching(items, args, cache){\n    var retval = [], idx = 0, item;\n\n    for (var i = 0, ii = items.length; i < ii; i++){\n      item = items[i];\n      if (cache[i]){\n        retval[idx++] = item;\n      } else if (filter(item, args)){\n        retval[idx++] = item;\n        cache[i] = true;\n      }\n    }\n\n    return retval;\n  }\n\n  function getFilteredAndPagedItems(items){\n    if (filter){\n      var batchFilter = options.inlineFilters ? compiledFilter : uncompiledFilter;\n      var batchFilterWithCaching = options.inlineFilters ? compiledFilterWithCaching : uncompiledFilterWithCaching;\n\n      if (refreshHints.isFilterNarrowing){\n        filteredItems = batchFilter(filteredItems, filterArgs);\n      } else if (refreshHints.isFilterExpanding){\n        filteredItems = batchFilterWithCaching(items, filterArgs, filterCache);\n      } else if (!refreshHints.isFilterUnchanged){\n        filteredItems = batchFilter(items, filterArgs);\n      }\n    } else {\n      // special case:  if not filtering and not paging, the resulting\n      // rows collection needs to be a copy so that changes due to sort\n      // can be caught\n      filteredItems = pagesize ? items : items.concat();\n    }\n\n    // get the current page\n    var paged;\n    if (pagesize){\n      if (filteredItems.length < pagenum * pagesize){\n        pagenum = Math.floor(filteredItems.length / pagesize);\n      }\n      paged = filteredItems.slice(pagesize * pagenum, pagesize * pagenum + pagesize);\n    } else {\n      paged = filteredItems;\n    }\n\n    return {totalRows: filteredItems.length, rows: paged};\n  }\n\n  function getRowDiffs(rows, newRows){\n    var item, r, eitherIsNonData, diff = [];\n    var from = 0, to = newRows.length;\n\n    if (refreshHints && refreshHints.ignoreDiffsBefore){\n      from = Math.max(0,\n        Math.min(newRows.length, refreshHints.ignoreDiffsBefore));\n    }\n\n    if (refreshHints && refreshHints.ignoreDiffsAfter){\n      to = Math.min(newRows.length,\n        Math.max(0, refreshHints.ignoreDiffsAfter));\n    }\n\n    for (var i = from, rl = rows.length; i < to; i++){\n      if (i >= rl){\n        diff[diff.length] = i;\n      } else {\n        item = newRows[i];\n        r = rows[i];\n\n        if ((groupingInfos.length && (eitherIsNonData = (item.__nonDataRow) || (r.__nonDataRow)) &&\n          item.__group !== r.__group ||\n          item.__group && !item.equals(r))\n          || (eitherIsNonData &&\n          // no good way to compare totals since they are arbitrary DTOs\n          // deep object comparison is pretty expensive\n          // always considering them 'dirty' seems easier for the time being\n          (item.__groupTotals || r.__groupTotals))\n          || item[idProperty] != r[idProperty]\n          || (updated && updated[item[idProperty]])\n        ){\n          diff[diff.length] = i;\n        }\n      }\n    }\n    return diff;\n  }\n\n  function recalc(_items){\n    rowsById = null;\n\n    if (refreshHints.isFilterNarrowing != prevRefreshHints.isFilterNarrowing ||\n      refreshHints.isFilterExpanding != prevRefreshHints.isFilterExpanding){\n      filterCache = [];\n    }\n\n    var filteredItems = getFilteredAndPagedItems(_items);\n    totalRows = filteredItems.totalRows;\n    var newRows = filteredItems.rows;\n\n    groups = [];\n    if (groupingInfos.length){\n      groups = extractGroups(newRows);\n      if (groups.length){\n        addTotals(groups);\n        newRows = flattenGroupedRows(groups);\n      }\n    }\n\n    var diff = getRowDiffs(rows, newRows);\n\n    rows = newRows;\n\n    return diff;\n  }\n\n  function refresh(){\n    if (suspend){\n      return;\n    }\n\n    var countBefore = rows.length;\n    var totalRowsBefore = totalRows;\n\n    var diff = recalc(items, filter); // pass as direct refs to avoid closure perf hit\n\n    // if the current page is no longer valid, go to last page and recalc\n    // we suffer a performance penalty here, but the main loop (recalc) remains highly optimized\n    if (pagesize && totalRows < pagenum * pagesize){\n      pagenum = Math.max(0, Math.ceil(totalRows / pagesize) - 1);\n      diff = recalc(items, filter);\n    }\n\n    updated = null;\n    prevRefreshHints = refreshHints;\n    refreshHints = {};\n\n    if (totalRowsBefore !== totalRows){\n      onPagingInfoChanged.notify(getPagingInfo(), null, self);\n    }\n    if (countBefore !== rows.length){\n      onRowCountChanged.notify({previous: countBefore, current: rows.length, dataView: self}, null, self);\n    }\n    if (diff.length > 0){\n      onRowsChanged.notify({rows: diff, dataView: self}, null, self);\n    }\n  }\n\n  /** *\n   * Wires the grid and the DataView together to keep row selection tied to item ids.\n   * This is useful since, without it, the grid only knows about rows, so if the items\n   * move around, the same rows stay selected instead of the selection moving along\n   * with the items.\n   *\n   * NOTE:  This doesn't work with cell selection model.\n   *\n   * @param grid {Slick.Grid} The grid to sync selection with.\n   * @param preserveHidden {Boolean} Whether to keep selected items that go out of the\n   *     view due to them getting filtered out.\n   * @param preserveHiddenOnSelectionChange {Boolean} Whether to keep selected items\n   *     that are currently out of the view (see preserveHidden) as selected when selection\n   *     changes.\n   * @return {Slick.Event} An event that notifies when an internal list of selected row ids\n   *     changes.  This is useful since, in combination with the above two options, it allows\n   *     access to the full list selected row ids, and not just the ones visible to the grid.\n   * @method syncGridSelection\n   */\n  function syncGridSelection(grid, preserveHidden, preserveHiddenOnSelectionChange){\n    var self = this;\n    var inHandler;\n    var selectedRowIds = self.mapRowsToIds(grid.getSelectedRows());\n    var onSelectedRowIdsChanged = new Slick.Event();\n\n    function setSelectedRowIds(rowIds){\n      if (selectedRowIds.join(',') == rowIds.join(',')){\n        return;\n      }\n\n      selectedRowIds = rowIds;\n\n      onSelectedRowIdsChanged.notify({\n        'grid': grid,\n        'ids': selectedRowIds,\n        'dataView': self\n      }, new Slick.EventData(), self);\n    }\n\n    function update(){\n      if (selectedRowIds.length > 0){\n        inHandler = true;\n        var selectedRows = self.mapIdsToRows(selectedRowIds);\n        if (!preserveHidden){\n          setSelectedRowIds(self.mapRowsToIds(selectedRows));\n        }\n        grid.setSelectedRows(selectedRows);\n        inHandler = false;\n      }\n    }\n\n    grid.onSelectedRowsChanged.subscribe(function(e, args){\n      if (inHandler){\n        return;\n      }\n      var newSelectedRowIds = self.mapRowsToIds(grid.getSelectedRows());\n      if (!preserveHiddenOnSelectionChange || !grid.getOptions().multiSelect){\n        setSelectedRowIds(newSelectedRowIds);\n      } else {\n        // keep the ones that are hidden\n        var existing = $.grep(selectedRowIds, function(id){\n          return self.getRowById(id) === undefined;\n        });\n        // add the newly selected ones\n        setSelectedRowIds(existing.concat(newSelectedRowIds));\n      }\n    });\n\n    this.onRowsChanged.subscribe(update);\n\n    this.onRowCountChanged.subscribe(update);\n\n    return onSelectedRowIdsChanged;\n  }\n\n  function syncGridCellCssStyles(grid, key){\n    var hashById;\n    var inHandler;\n\n    // since this method can be called after the cell styles have been set,\n    // get the existing ones right away\n    storeCellCssStyles(grid.getCellCssStyles(key));\n\n    function storeCellCssStyles(hash){\n      hashById = {};\n      for (var row in hash){\n        var id = rows[row][idProperty];\n        hashById[id] = hash[row];\n      }\n    }\n\n    function update(){\n      if (hashById){\n        inHandler = true;\n        ensureRowsByIdCache();\n        var newHash = {};\n        for (var id in hashById){\n          var row = rowsById[id];\n          if (row != undefined){\n            newHash[row] = hashById[id];\n          }\n        }\n        grid.setCellCssStyles(key, newHash);\n        inHandler = false;\n      }\n    }\n\n    grid.onCellCssStylesChanged.subscribe(function(e, args){\n      if (inHandler){\n        return;\n      }\n      if (key != args.key){\n        return;\n      }\n      if (args.hash){\n        storeCellCssStyles(args.hash);\n      }\n    });\n\n    this.onRowsChanged.subscribe(update);\n\n    this.onRowCountChanged.subscribe(update);\n  }\n\n  $.extend(this, {\n    // methods\n    'beginUpdate': beginUpdate,\n    'endUpdate': endUpdate,\n    'setPagingOptions': setPagingOptions,\n    'getPagingInfo': getPagingInfo,\n    'getItems': getItems,\n    'setItems': setItems,\n    'setFilter': setFilter,\n    'sort': sort,\n    'fastSort': fastSort,\n    'reSort': reSort,\n    'setGrouping': setGrouping,\n    'getGrouping': getGrouping,\n    'groupBy': groupBy,\n    'setAggregators': setAggregators,\n    'collapseAllGroups': collapseAllGroups,\n    'expandAllGroups': expandAllGroups,\n    'collapseGroup': collapseGroup,\n    'expandGroup': expandGroup,\n    'getGroups': getGroups,\n    'getIdxById': getIdxById,\n    'getRowById': getRowById,\n    'getItemById': getItemById,\n    'getItemByIdx': getItemByIdx,\n    'mapRowsToIds': mapRowsToIds,\n    'mapIdsToRows': mapIdsToRows,\n    'setRefreshHints': setRefreshHints,\n    'setFilterArgs': setFilterArgs,\n    'refresh': refresh,\n    'updateItem': updateItem,\n    'insertItem': insertItem,\n    'addItem': addItem,\n    'deleteItem': deleteItem,\n    'syncGridSelection': syncGridSelection,\n    'syncGridCellCssStyles': syncGridCellCssStyles,\n\n    // data provider methods\n    'getLength': getLength,\n    'getItem': getItem,\n    'getItemMetadata': getItemMetadata,\n\n    // events\n    'onRowCountChanged': onRowCountChanged,\n    'onRowsChanged': onRowsChanged,\n    'onPagingInfoChanged': onPagingInfoChanged\n  });\n}\n\nfunction AvgAggregator(field){\n  this.field_ = field;\n\n  this.init = function(){\n    this.count_ = 0;\n    this.nonNullCount_ = 0;\n    this.sum_ = 0;\n  };\n\n  this.accumulate = function(item){\n    var val = item[this.field_];\n    this.count_++;\n    if (val != null && val !== '' && !isNaN(val)){\n      this.nonNullCount_++;\n      this.sum_ += parseFloat(val);\n    }\n  };\n\n  this.storeResult = function(groupTotals){\n    if (!groupTotals.avg){\n      groupTotals.avg = {};\n    }\n    if (this.nonNullCount_ != 0){\n      groupTotals.avg[this.field_] = this.sum_ / this.nonNullCount_;\n    }\n  };\n}\n\nfunction MinAggregator(field){\n  this.field_ = field;\n\n  this.init = function(){\n    this.min_ = null;\n  };\n\n  this.accumulate = function(item){\n    var val = item[this.field_];\n    if (val != null && val !== '' && !isNaN(val)){\n      if (this.min_ == null || val < this.min_){\n        this.min_ = val;\n      }\n    }\n  };\n\n  this.storeResult = function(groupTotals){\n    if (!groupTotals.min){\n      groupTotals.min = {};\n    }\n    groupTotals.min[this.field_] = this.min_;\n  };\n}\n\nfunction MaxAggregator(field){\n  this.field_ = field;\n\n  this.init = function(){\n    this.max_ = null;\n  };\n\n  this.accumulate = function(item){\n    var val = item[this.field_];\n    if (val != null && val !== '' && !isNaN(val)){\n      if (this.max_ == null || val > this.max_){\n        this.max_ = val;\n      }\n    }\n  };\n\n  this.storeResult = function(groupTotals){\n    if (!groupTotals.max){\n      groupTotals.max = {};\n    }\n    groupTotals.max[this.field_] = this.max_;\n  };\n}\n\nfunction SumAggregator(field){\n  this.field_ = field;\n\n  this.init = function(){\n    this.sum_ = null;\n  };\n\n  this.accumulate = function(item){\n    var val = item[this.field_];\n    if (val != null && val !== '' && !isNaN(val)){\n      this.sum_ += parseFloat(val);\n    }\n  };\n\n  this.storeResult = function(groupTotals){\n    if (!groupTotals.sum){\n      groupTotals.sum = {};\n    }\n    groupTotals.sum[this.field_] = this.sum_;\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ../src/slick.dataview.js","import Slick from './slick.core';\nimport flatpickr from 'flatpickr';\n//import 'flatpickr/dist/flatpickr.min.css';\nimport $ from 'jquery';\n\nconst { keyCode } = Slick;\n\n/** *\n * Contains basic SlickGrid editors.\n * @module Editors\n * @namespace Slick\n */\n\nconst Editors = {\n  Text: TextEditor,\n  Integer: IntegerEditor,\n  Float: FloatEditor,\n  Date: DateEditor,\n  YesNoSelect: YesNoSelectEditor,\n  Checkbox: CheckboxEditor,\n  LongText: LongTextEditor\n};\n\nSlick.Editors = Editors;\nexport default Editors;\n\nfunction TextEditor(args){\n  let $input;\n  let defaultValue;\n\n  this.init = function(){\n    $input = $(\"<INPUT type=text class='editor-text' />\")\n      .appendTo(args.container)\n      .bind('keydown.nav', function(e){\n        if (e.keyCode === keyCode.LEFT || e.keyCode === keyCode.RIGHT){\n          e.stopImmediatePropagation();\n        }\n      })\n      .focus()\n      .select();\n  };\n\n  this.destroy = function(){\n    $input.remove();\n  };\n\n  this.focus = function(){\n    $input.focus();\n  };\n\n  this.getValue = function(){\n    return $input.val();\n  };\n\n  this.setValue = function(val){\n    $input.val(val);\n  };\n\n  this.loadValue = function(item){\n    defaultValue = item[args.column.field] || '';\n    $input.val(defaultValue);\n    $input[0].defaultValue = defaultValue;\n    $input.select();\n  };\n\n  this.serializeValue = function(){\n    return $input.val();\n  };\n\n  this.applyValue = function(item, state){\n    item[args.column.field] = state;\n  };\n\n  this.isValueChanged = function(){\n    return (!($input.val() == '' && defaultValue == null)) && ($input.val() != defaultValue);\n  };\n\n  this.validate = function(){\n    let valid = true;\n    let msg = null;\n    if (args.column.validator){\n      let validationResults = args.column.validator($input.val(), args);\n      valid = validationResults.valid;\n      msg = validationResults.msg;\n    }\n\n    return {\n      valid: true,\n      msg: null\n    };\n  };\n\n  this.init();\n}\n\nfunction IntegerEditor(args){\n  let $input;\n  let defaultValue;\n\n  this.init = function(){\n    $input = $(\"<INPUT type=text class='editor-text' />\");\n\n    $input.bind('keydown.nav', function(e){\n      if (e.keyCode === keyCode.LEFT || e.keyCode === keyCode.RIGHT){\n        e.stopImmediatePropagation();\n      }\n    });\n\n    $input.appendTo(args.container);\n    $input.focus().select();\n  };\n\n  this.destroy = function(){\n    $input.remove();\n  };\n\n  this.focus = function(){\n    $input.focus();\n  };\n\n  this.loadValue = function(item){\n    defaultValue = item[args.column.field];\n    $input.val(defaultValue);\n    $input[0].defaultValue = defaultValue;\n    $input.select();\n  };\n\n  this.serializeValue = function(){\n    return parseInt($input.val(), 10) || 0;\n  };\n\n  this.applyValue = function(item, state){\n    item[args.column.field] = state;\n  };\n\n  this.isValueChanged = function(){\n    return (!($input.val() == '' && defaultValue == null)) && ($input.val() != defaultValue);\n  };\n\n  this.validate = function(){\n    if (isNaN($input.val())){\n      return {\n        valid: false,\n        msg: 'Please enter a valid integer'\n      };\n    }\n\n    if (args.column.validator){\n      let validationResults = args.column.validator($input.val());\n      if (!validationResults.valid){\n        return validationResults;\n      }\n    }\n\n    return {\n      valid: true,\n      msg: null\n    };\n  };\n\n  this.init();\n}\n\nfunction FloatEditor(args){\n  let $input;\n  let defaultValue;\n  let scope = this;\n\n  this.init = function(){\n    $input = $(\"<INPUT type=text class='editor-text' />\");\n\n    $input.bind('keydown.nav', function(e){\n      if (e.keyCode === keyCode.LEFT || e.keyCode === keyCode.RIGHT){\n        e.stopImmediatePropagation();\n      }\n    });\n\n    $input.appendTo(args.container);\n    $input.focus().select();\n  };\n\n  this.destroy = function(){\n    $input.remove();\n  };\n\n  this.focus = function(){\n    $input.focus();\n  };\n\n  function getDecimalPlaces(){\n    // returns the number of fixed decimal places or null\n    let rtn = args.column.editorFixedDecimalPlaces;\n    if (typeof rtn == 'undefined'){\n      rtn = FloatEditor.DefaultDecimalPlaces;\n    }\n    return (!rtn && rtn !== 0 ? null : rtn);\n  }\n\n  this.loadValue = function(item){\n    defaultValue = item[args.column.field];\n\n    let decPlaces = getDecimalPlaces();\n    if (decPlaces !== null\n      && (defaultValue || defaultValue === 0)\n      && defaultValue.toFixed){\n      defaultValue = defaultValue.toFixed(decPlaces);\n    }\n\n    $input.val(defaultValue);\n    $input[0].defaultValue = defaultValue;\n    $input.select();\n  };\n\n  this.serializeValue = function(){\n    let rtn = parseFloat($input.val()) || 0;\n\n    let decPlaces = getDecimalPlaces();\n    if (decPlaces !== null\n      && (rtn || rtn === 0)\n      && rtn.toFixed){\n      rtn = parseFloat(rtn.toFixed(decPlaces));\n    }\n\n    return rtn;\n  };\n\n  this.applyValue = function(item, state){\n    item[args.column.field] = state;\n  };\n\n  this.isValueChanged = function(){\n    return (!($input.val() == '' && defaultValue == null)) && ($input.val() != defaultValue);\n  };\n\n  this.validate = function(){\n    if (isNaN($input.val())){\n      return {\n        valid: false,\n        msg: 'Please enter a valid number'\n      };\n    }\n\n    if (args.column.validator){\n      let validationResults = args.column.validator($input.val(), args);\n      if (!validationResults.valid){\n        return validationResults;\n      }\n    }\n\n    return {\n      valid: true,\n      msg: null\n    };\n  };\n\n  this.init();\n}\n\nFloatEditor.DefaultDecimalPlaces = null;\n\n/**\n * see https://chmln.github.io/flatpickr/#options - pass as column.options.date = {}\n * @param args\n * @constructor\n */\nfunction DateEditor(args){\n  let $input,\n    flatInstance,\n    defaultDate,\n    options = args.column.options && args.column.options.date ? args.column.options.date : {};\n\n  this.init = function(){\n    defaultDate = options.defaultDate = args.item[args.column.field];\n\n    $input = $('<input type=text data-default-date=\"'+defaultDate+'\" class=\"editor-text\" />');\n    $input.appendTo(args.container);\n    $input.focus().val(defaultDate).select();\n    flatInstance = flatpickr($input[0], options);\n  };\n\n  this.destroy = function(){\n    flatInstance.destroy();\n    $input.remove();\n  };\n\n  this.show = function(){\n    flatInstance.open();\n    flatInstance.positionCalendar();\n  };\n\n  this.hide = function(){\n    flatInstance.close();\n  };\n\n  this.position = function(position){\n    //todo: fix how scrolling is affected\n    flatInstance.positionCalendar();\n  };\n\n  this.focus = function(){\n    $input.focus();\n  };\n\n  this.loadValue = function(item){\n    defaultDate = item[args.column.field];\n    $input.val(defaultDate);\n    $input.select();\n  };\n\n  this.serializeValue = function(){\n    return $input.val();\n  };\n\n  this.applyValue = function(item, state){\n    item[args.column.field] = state;\n  };\n\n  this.isValueChanged = function(){\n    return (!($input.val() == '' && defaultDate == null)) && ($input.val() != defaultDate);\n  };\n\n  this.validate = function(){\n    if (args.column.validator){\n      let validationResults = args.column.validator($input.val(), args);\n      if (!validationResults.valid){\n        return validationResults;\n      }\n    }\n\n    return {\n      valid: true,\n      msg: null\n    };\n  };\n\n  this.init();\n}\n\nfunction YesNoSelectEditor(args){\n  let $select;\n  let defaultValue;\n  let scope = this;\n\n  this.init = function(){\n    $select = $(\"<select tabIndex='0' class='editor-yesno'><option value='yes'>Yes</option><option value='no'>No</option></select>\");\n    $select.appendTo(args.container);\n    $select.focus();\n  };\n\n  this.destroy = function(){\n    $select.remove();\n  };\n\n  this.focus = function(){\n    $select.focus();\n  };\n\n  this.loadValue = function(item){\n    $select.val((defaultValue = item[args.column.field]) ? 'yes' : 'no');\n    $select.select();\n  };\n\n  this.serializeValue = function(){\n    return ($select.val() == 'yes');\n  };\n\n  this.applyValue = function(item, state){\n    item[args.column.field] = state;\n  };\n\n  this.isValueChanged = function(){\n    return ($select.val() != defaultValue);\n  };\n\n  this.validate = function(){\n    let valid = true;\n    let msg = null;\n    if (args.column.validator){\n      let validationResults = args.column.validator($select.val(), args);\n      valid = validationResults.valid;\n      msg = validationResults.msg;\n    }\n\n    return {\n      valid: true,\n      msg: null\n    };\n  };\n\n  this.init();\n}\n\nfunction CheckboxEditor(args){\n  let $select;\n  let defaultValue;\n  let scope = this;\n\n  this.init = function(){\n    $select = $(\"<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>\");\n    $select.appendTo(args.container);\n    $select.focus();\n  };\n\n  this.destroy = function(){\n    $select.remove();\n  };\n\n  this.focus = function(){\n    $select.focus();\n  };\n\n  this.loadValue = function(item){\n    defaultValue = !!item[args.column.field];\n    if (defaultValue){\n      $select.prop('checked', true);\n    } else {\n      $select.prop('checked', false);\n    }\n  };\n\n  this.serializeValue = function(){\n    return $select.prop('checked');\n  };\n\n  this.applyValue = function(item, state){\n    item[args.column.field] = state;\n  };\n\n  this.isValueChanged = function(){\n    return (this.serializeValue() !== defaultValue);\n  };\n\n  this.validate = function(){\n    let valid = true;\n    let msg = null;\n    if (args.column.validator){\n      let validationResults = args.column.validator($select.val(), args);\n      valid = validationResults.valid;\n      msg = validationResults.msg;\n    }\n\n    return {\n      valid: true,\n      msg: null\n    };\n  };\n\n  this.init();\n}\n\nfunction PercentCompleteEditor(args){\n  console.error('PercentCompleteEditor is derecated');\n}\n\n/*\n * An example of a \"detached\" editor.\n * The UI is added onto document BODY and .position(), .show() and .hide() are implemented.\n * KeyDown events are also handled to provide handling for Tab, Shift-Tab, Esc and Ctrl-Enter.\n */\nfunction LongTextEditor(args){\n  let $input, $wrapper;\n  let defaultValue;\n  let scope = this;\n\n  this.init = function(){\n    let $container = $('body');\n\n    $wrapper = $(\"<div class='slick-large-editor-text' />\").appendTo($container);\n    $input = $(\"<textarea hidefocus rows=5 />\").appendTo($wrapper);\n\n    $(\"<div><button>Save</button> <button>Cancel</button></div>\").appendTo($wrapper);\n\n    $wrapper.find('button:first').bind('click', this.save);\n    $wrapper.find('button:last').bind('click', this.cancel);\n    $input.bind('keydown', this.handleKeyDown);\n\n    scope.position(args.position);\n    $input.focus().select();\n  };\n\n  this.handleKeyDown = function(e){\n    if (e.which == keyCode.ENTER && e.ctrlKey){\n      scope.save();\n    } else if (e.which == keyCode.ESCAPE){\n      e.preventDefault();\n      scope.cancel();\n    } else if (e.which == keyCode.TAB && e.shiftKey){\n      e.preventDefault();\n      args.grid.navigatePrev();\n    } else if (e.which == keyCode.TAB){\n      e.preventDefault();\n      args.grid.navigateNext();\n    }\n  };\n\n  this.save = function(){\n    args.commitChanges();\n  };\n\n  this.cancel = function(){\n    $input.val(defaultValue);\n    args.cancelChanges();\n  };\n\n  this.hide = function(){\n    $wrapper.hide();\n  };\n\n  this.show = function(){\n    $wrapper.show();\n  };\n\n  this.position = function(position){\n    $wrapper\n      .css('top', position.top - 5)\n      .css('left', position.left - 5);\n  };\n\n  this.destroy = function(){\n    $wrapper.remove();\n  };\n\n  this.focus = function(){\n    $input.focus();\n  };\n\n  this.loadValue = function(item){\n    $input.val(defaultValue = item[args.column.field]);\n    $input.select();\n  };\n\n  this.serializeValue = function(){\n    return $input.val();\n  };\n\n  this.applyValue = function(item, state){\n    item[args.column.field] = state;\n  };\n\n  this.isValueChanged = function(){\n    return (!($input.val() == '' && defaultValue == null)) && ($input.val() != defaultValue);\n  };\n\n  this.validate = function(){\n    let valid = true;\n    let msg = null;\n    if (args.column.validator){\n      let validationResults = args.column.validator($select.val(), args);\n      valid = validationResults.valid;\n      msg = validationResults.msg;\n    }\n\n    return {\n      valid: true,\n      msg: null\n    };\n  };\n\n  this.init();\n}\n\n\n\n// WEBPACK FOOTER //\n// ../src/slick.editors.js","/** *\n * Contains basic SlickGrid formatters.\n *\n * NOTE:  These are merely examples.  You will most likely need to implement something more\n *        robust/extensible/localizable/etc. for your use!\n *\n * @module Formatters\n * @namespace Slick\n */\n\nimport Slick from './slick.core';\n\nconst Formatters = {\n  PercentComplete: PercentCompleteFormatter,\n  PercentCompleteBar: PercentCompleteBarFormatter,\n  YesNo: YesNoFormatter,\n  Checkmark: CheckmarkFormatter\n};\n\nSlick.Formatters = Formatters;\nexport default Formatters;\n\nfunction PercentCompleteFormatter(row, cell, value, columnDef, dataContext){\n  if (value == null || value === ''){\n    return '-';\n  } else if (value < 50){\n    return \"<span style='color:red;font-weight:bold;'>\" + value + '%</span>';\n  } else {\n    return \"<span style='color:green'>\" + value + '%</span>';\n  }\n}\n\nfunction PercentCompleteBarFormatter(row, cell, value, columnDef, dataContext){\n  if (value == null || value === ''){\n    return '';\n  }\n\n  var color;\n\n  if (value < 30){\n    color = 'red';\n  } else if (value < 70){\n    color = 'silver';\n  } else {\n    color = 'green';\n  }\n\n  return \"<span class='percent-complete-bar' style='background:\" + color + ';width:' + value + \"%'></span>\";\n}\n\nfunction YesNoFormatter(row, cell, value, columnDef, dataContext){\n  return value ? 'Yes' : 'No';\n}\n\nfunction CheckmarkFormatter(row, cell, value, columnDef, dataContext){\n  return value ? '' : '';\n}\n\n\n\n// WEBPACK FOOTER //\n// ../src/slick.formatters.js","/**\n * @license\n * (c) 2009-2013 Michael Leibman\n * michael{dot}leibman{at}gmail{dot}com\n * http://github.com/mleibman/slickgrid\n *\n * Distributed under MIT license.\n * All rights reserved.\n *\n * SlickGrid v2.2\n *\n * NOTES:\n *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.\n *     This increases the speed dramatically, but can only be done safely because there are no event handlers\n *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()\n *     and do proper cleanup.\n */\n\nimport $ from 'jquery';\nimport interact from './interact.js';\n\nimport Slick from './slick.core';\n\n// Slick.Grid globals pretense\nSlick.Grid = SlickGrid;\nglobal.Slick = Slick;\n\nexport default SlickGrid;\n\n// shared across all grids on the page\nvar scrollbarDimensions;\nvar maxSupportedCssHeight;  // browser's breaking point\n\n// ////////////////////////////////////////////////////////////////////////////////////////////\n// SlickGrid class implementation (available as Slick.Grid)\n\n/**\n * Creates a new instance of the grid.\n * @class SlickGrid\n * @constructor\n * @param {Node}              container   Container node to create the grid in.\n * @param {Array,Object}      data        An array of objects for databinding.\n * @param {Array}             columns     An array of column definitions.\n * @param {Object}            options     Grid options.\n **/\nfunction SlickGrid(container, data, columns, options){\n  // settings\n  var defaults = {\n    explicitInitialization: false,\n    rowHeight: 25,\n    defaultColumnWidth: 80,\n    enableAddRow: false,\n    leaveSpaceForNewRows: false,\n    editable: false,\n    autoEdit: true,\n    enableCellNavigation: true,\n    enableColumnReorder: true,\n    asyncEditorLoading: false,\n    asyncEditorLoadDelay: 100,\n    forceFitColumns: false,\n    enableAsyncPostRender: false,\n    asyncPostRenderDelay: 50,\n    enableAsyncPostRenderCleanup: false,\n    asyncPostRenderCleanupDelay: 40,\n    autoHeight: false,\n    editorLock: Slick.GlobalEditorLock,\n    showHeaderRow: false,\n    headerRowHeight: 25,\n    createFooterRow: false,\n    showFooterRow: false,\n    footerRowHeight: 25,\n    showTopPanel: false,\n    topPanelHeight: 25,\n    formatterFactory: null,\n    editorFactory: null,\n    cellFlashingCssClass: 'flashing',\n    selectedCellCssClass: 'selected',\n    multiSelect: true,\n    enableTextSelectionOnCells: false,\n    dataItemColumnValueExtractor: null,\n    fullWidthRows: false,\n    multiColumnSort: false,\n    defaultFormatter: defaultFormatter,\n    forceSyncScrolling: false,\n    addNewRowCssClass: 'new-row'\n  };\n\n  var columnDefaults = {\n    name: '',\n    resizable: true,\n    sortable: false,\n    minWidth: 30,\n    rerenderOnResize: false,\n    headerCssClass: null,\n    defaultSortAsc: true,\n    focusable: true,\n    selectable: true\n  };\n\n  // scroller\n  var th;   // virtual height\n  var h;    // real scrollable height\n  var ph;   // page height\n  var n;    // number of pages\n  var cj;   // \"jumpiness\" coefficient\n\n  var page = 0;       // current page\n  var offset = 0;     // current page offset\n  var vScrollDir = 1;\n\n  // private\n  var initialized = false;\n  var $container;\n  var uid = 'slickgrid_' + Math.round(1000000 * Math.random());\n  var self = this;\n  var $focusSink, $focusSink2;\n  var $headerScroller;\n  var $headers;\n  var $headerRow, $headerRowScroller, $headerRowSpacer;\n  var $footerRow, $footerRowScroller, $footerRowSpacer;\n  var $topPanelScroller;\n  var $topPanel;\n  var $viewport;\n  var $canvas;\n  var $style;\n  var $boundAncestors;\n  var stylesheet, columnCssRulesL, columnCssRulesR;\n  var viewportH, viewportW;\n  var canvasWidth;\n  var viewportHasHScroll, viewportHasVScroll;\n  var headerColumnWidthDiff = 0, headerColumnHeightDiff = 0, // border+padding\n    cellWidthDiff = 0, cellHeightDiff = 0, jQueryNewWidthBehaviour = false;\n  var absoluteColumnMinWidth;\n\n  var tabbingDirection = 1;\n  var activePosX;\n  var activeRow, activeCell;\n  var activeCellNode = null;\n  var currentEditor = null;\n  var serializedEditorValue;\n  var editController;\n\n  var rowsCache = {};\n  var renderedRows = 0;\n  var numVisibleRows;\n  var prevScrollTop = 0;\n  var scrollTop = 0;\n  var lastRenderedScrollTop = 0;\n  var lastRenderedScrollLeft = 0;\n  var prevScrollLeft = 0;\n  var scrollLeft = 0;\n\n  var selectionModel;\n  var selectedRows = [];\n\n  var plugins = [];\n  var cellCssClasses = {};\n\n  var columnsById = {};\n  var sortColumns = [];\n  var columnPosLeft = [];\n  var columnPosRight = [];\n\n  // async call handles\n  var h_editorLoader = null;\n  var h_render = null;\n  var h_postrender = null;\n  var h_postrenderCleanup = null;\n  var postProcessedRows = {};\n  var postProcessToRow = null;\n  var postProcessFromRow = null;\n  var postProcessedCleanupQueue = [];\n  var postProcessgroupId = 0;\n\n  // perf counters\n  var counter_rows_rendered = 0;\n  var counter_rows_removed = 0;\n\n  // These two variables work around a bug with inertial scrolling in Webkit/Blink on Mac.\n  // See http://crbug.com/312427.\n  var rowNodeFromLastMouseWheelEvent;  // this node must not be deleted while inertial scrolling\n  var zombieRowNodeFromLastMouseWheelEvent;  // node that was hidden instead of getting deleted\n  var zombieRowCacheFromLastMouseWheelEvent;  // row cache for above node\n  var zombieRowPostProcessedFromLastMouseWheelEvent;  // post processing references for above node\n\n  // store css attributes if display:none is active in container or parent\n  var cssShow = {position: 'absolute', visibility: 'hidden', display: 'block'};\n  var $hiddenParents;\n  var oldProps = [];\n\n  // ////////////////////////////////////////////////////////////////////////////////////////////\n  // Initialization\n\n  function init(){\n    $container = $(container);\n    if ($container.length < 1){\n      throw new Error('SlickGrid requires a valid container, ' + container + ' does not exist in the DOM.');\n    }\n\n    cacheCssForHiddenInit();\n\n    // calculate these only once and share between grid instances\n    maxSupportedCssHeight = maxSupportedCssHeight || getMaxSupportedCssHeight();\n    scrollbarDimensions = scrollbarDimensions || measureScrollbar();\n\n    options = $.extend({}, defaults, options);\n    validateAndEnforceOptions();\n    columnDefaults.width = options.defaultColumnWidth;\n\n    columnsById = {};\n    for (var i = 0; i < columns.length; i++){\n      var m = columns[i] = $.extend({}, columnDefaults, columns[i]);\n      columnsById[m.id] = i;\n      if (m.minWidth && m.width < m.minWidth){\n        m.width = m.minWidth;\n      }\n      if (m.maxWidth && m.width > m.maxWidth){\n        m.width = m.maxWidth;\n      }\n    }\n\n    editController = {\n      'commitCurrentEdit': commitCurrentEdit,\n      'cancelCurrentEdit': cancelCurrentEdit\n    };\n\n    $container\n      .empty()\n      .css('overflow', 'hidden')\n      .css('outline', 0)\n      .addClass(uid)\n      .addClass('ui-widget');\n\n    // set up a positioning container if needed\n    if (!/relative|absolute|fixed/.test($container.css('position'))){\n      $container.css('position', 'relative');\n    }\n\n    $focusSink = $(\"<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>\").appendTo($container);\n\n    $headerScroller = $(\"<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />\").appendTo($container);\n    $headers = $(\"<div class='slick-header-columns' />\").appendTo($headerScroller);\n    $headers.width(getHeadersWidth());\n\n    $headerRowScroller = $(\"<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />\").appendTo($container);\n    $headerRow = $(\"<div class='slick-headerrow-columns' />\").appendTo($headerRowScroller);\n    $headerRowSpacer = $(\"<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>\")\n      .css('width', getCanvasWidth() + scrollbarDimensions.width + 'px')\n      .appendTo($headerRowScroller);\n\n    $topPanelScroller = $(\"<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />\").appendTo($container);\n    $topPanel = $(\"<div class='slick-top-panel' style='width:10000px' />\").appendTo($topPanelScroller);\n\n    if (!options.showTopPanel){\n      $topPanelScroller.hide();\n    }\n\n    if (!options.showHeaderRow){\n      $headerRowScroller.hide();\n    }\n\n    $viewport = $(\"<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>\").appendTo($container);\n    $viewport.css('overflow-y', options.autoHeight ? 'hidden' : 'auto');\n\n    $canvas = $(\"<div class='grid-canvas' />\").appendTo($viewport);\n\n    if (options.createFooterRow){\n      $footerRowScroller = $(\"<div class='slick-footerrow ui-state-default' style='overflow:hidden;position:relative;' />\").appendTo($container);\n      $footerRow = $(\"<div class='slick-footerrow-columns' />\").appendTo($footerRowScroller);\n      $footerRowSpacer = $(\"<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>\")\n        .css('width', getCanvasWidth() + scrollbarDimensions.width + 'px')\n        .appendTo($footerRowScroller);\n\n      if (!options.showFooterRow){\n        $footerRowScroller.hide();\n      }\n    }\n\n    $focusSink2 = $focusSink.clone().appendTo($container);\n\n    if (!options.explicitInitialization){\n      finishInitialization();\n    }\n  }\n\n  function finishInitialization(){\n    if (!initialized){\n      initialized = true;\n\n      viewportW = parseFloat($.css($container[0], 'width', true));\n\n      // header columns and cells may have different padding/border skewing width calculations (box-sizing, hello?)\n      // calculate the diff so we can set consistent sizes\n      measureCellPaddingAndBorder();\n\n      // for usability reasons, all text selection in SlickGrid is disabled\n      // with the exception of input and textarea elements (selection must\n      // be enabled there so that editors work as expected); note that\n      // selection in grid cells (grid body) is already unavailable in\n      // all browsers except IE\n      disableSelection($headers); // disable all text selection in header (including input and textarea)\n\n      if (!options.enableTextSelectionOnCells){\n        // disable text selection in grid cells except in input and textarea elements\n        // (this is IE-specific, because selectstart event will only fire in IE)\n        $viewport.bind('selectstart.ui', function(event){\n          return $(event.target).is('input,textarea');\n        });\n      }\n\n      updateColumnCaches();\n      createColumnHeaders();\n      setupColumnSort();\n      createCssRules();\n      resizeCanvas();\n      bindAncestorScrollEvents();\n\n      $container\n        .bind('resize.slickgrid', resizeCanvas);\n      $viewport\n      // .bind(\"click\", handleClick)\n        .bind('scroll', handleScroll);\n      $headerScroller\n        .bind('contextmenu', handleHeaderContextMenu)\n        .bind('click', handleHeaderClick)\n        .delegate('.slick-header-column', 'mouseenter', handleHeaderMouseEnter)\n        .delegate('.slick-header-column', 'mouseleave', handleHeaderMouseLeave);\n      $headerRowScroller\n        .bind('scroll', handleHeaderRowScroll);\n\n      if (options.createFooterRow){\n        $footerRowScroller\n          .bind('scroll', handleFooterRowScroll);\n      }\n\n      $focusSink.add($focusSink2)\n        .bind('keydown', handleKeyDown);\n      $canvas\n        .bind('keydown', handleKeyDown)\n        .bind('click', handleClick)\n        .bind('dblclick', handleDblClick)\n        .bind('contextmenu', handleContextMenu)\n        .delegate('.slick-cell', 'mouseenter', handleMouseEnter)\n        .delegate('.slick-cell', 'mouseleave', handleMouseLeave);\n\n      // legacy support for drag events\n      interact($canvas[0]).allowFrom('div.slick-cell').draggable({\n        onmove: handleDrag,\n        onstart: handleDragStart,\n        onend: handleDragEnd\n      });\n\n      // Work around http://crbug.com/312427.\n      if (navigator.userAgent.toLowerCase().match(/webkit/) &&\n        navigator.userAgent.toLowerCase().match(/macintosh/)){\n        $canvas.bind('mousewheel', handleMouseWheel);\n      }\n      restoreCssFromHiddenInit();\n    }\n  }\n\n  function cacheCssForHiddenInit(){\n    // handle display:none on container or container parents\n    $hiddenParents = $container.parents().addBack().not(':visible');\n    $hiddenParents.each(function(){\n      var old = {};\n      for (var name in cssShow){\n        old[name] = this.style[name];\n        this.style[name] = cssShow[name];\n      }\n      oldProps.push(old);\n    });\n  }\n\n  function restoreCssFromHiddenInit(){\n    // finish handle display:none on container or container parents\n    // - put values back the way they were\n    $hiddenParents.each(function(i){\n      var old = oldProps[i];\n      for (var name in cssShow){\n        this.style[name] = old[name];\n      }\n    });\n  }\n\n  function registerPlugin(plugin){\n    plugins.unshift(plugin);\n    plugin.init(self);\n  }\n\n  function unregisterPlugin(plugin){\n    for (var i = plugins.length; i >= 0; i--){\n      if (plugins[i] === plugin){\n        if (plugins[i].destroy){\n          plugins[i].destroy();\n        }\n        plugins.splice(i, 1);\n        break;\n      }\n    }\n  }\n\n  function setSelectionModel(model){\n    if (selectionModel){\n      selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);\n      if (selectionModel.destroy){\n        selectionModel.destroy();\n      }\n    }\n\n    selectionModel = model;\n    if (selectionModel){\n      selectionModel.init(self);\n      selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged);\n    }\n  }\n\n  function getSelectionModel(){\n    return selectionModel;\n  }\n\n  function getCanvasNode(){\n    return $canvas[0];\n  }\n\n  function measureScrollbar(){\n    var $c = $(\"<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>\").appendTo('body');\n    var dim = {\n      width: $c.width() - $c[0].clientWidth,\n      height: $c.height() - $c[0].clientHeight\n    };\n    $c.remove();\n    return dim;\n  }\n\n  function getHeadersWidth(){\n    var headersWidth = 0;\n    for (var i = 0, ii = columns.length; i < ii; i++){\n      var width = columns[i].width;\n      headersWidth += width;\n    }\n    headersWidth += scrollbarDimensions.width;\n    return Math.max(headersWidth, viewportW) + 1000;\n  }\n\n  function getCanvasWidth(){\n    var availableWidth = viewportHasVScroll ? viewportW - scrollbarDimensions.width : viewportW;\n    var rowWidth = 0;\n    var i = columns.length;\n    while (i--){\n      rowWidth += columns[i].width;\n    }\n    return options.fullWidthRows ? Math.max(rowWidth, availableWidth) : rowWidth;\n  }\n\n  function updateCanvasWidth(forceColumnWidthsUpdate){\n    var oldCanvasWidth = canvasWidth;\n    canvasWidth = getCanvasWidth();\n\n    if (canvasWidth != oldCanvasWidth){\n      $canvas.width(canvasWidth);\n      $headerRow.width(canvasWidth);\n      if (options.createFooterRow){\n        $footerRow.width(canvasWidth);\n      }\n      $headers.width(getHeadersWidth());\n      viewportHasHScroll = (canvasWidth > viewportW - scrollbarDimensions.width);\n    }\n\n    var w = canvasWidth + (viewportHasVScroll ? scrollbarDimensions.width : 0);\n    $headerRowSpacer.width(w);\n    if (options.createFooterRow){\n      $footerRowSpacer.width(w);\n    }\n\n    if (canvasWidth != oldCanvasWidth || forceColumnWidthsUpdate){\n      applyColumnWidths();\n    }\n  }\n\n  function disableSelection($target){\n    if ($target && $target.jquery){\n      $target\n        .attr('unselectable', 'on')\n        .css('MozUserSelect', 'none')\n        .bind('selectstart.ui', function(){\n          return false;\n        }); // from jquery:ui.core.js 1.7.2\n    }\n  }\n\n  function getMaxSupportedCssHeight(){\n    var supportedHeight = 1000000;\n    // FF reports the height back but still renders blank after ~6M px\n    var testUpTo = navigator.userAgent.toLowerCase().match(/firefox/) ? 6000000 : 1000000000;\n    var div = $(\"<div style='display:none' />\").appendTo(document.body);\n\n    while (true){\n      var test = supportedHeight * 2;\n      div.css('height', test);\n      if (test > testUpTo || div.height() !== test){\n        break;\n      } else {\n        supportedHeight = test;\n      }\n    }\n\n    div.remove();\n    return supportedHeight;\n  }\n\n  // TODO:  this is static.  need to handle page mutation.\n  function bindAncestorScrollEvents(){\n    var elem = $canvas[0];\n    while ((elem = elem.parentNode) != document.body && elem != null){\n      // bind to scroll containers only\n      if (elem == $viewport[0] || elem.scrollWidth != elem.clientWidth || elem.scrollHeight != elem.clientHeight){\n        var $elem = $(elem);\n        if (!$boundAncestors){\n          $boundAncestors = $elem;\n        } else {\n          $boundAncestors = $boundAncestors.add($elem);\n        }\n        $elem.bind('scroll.' + uid, handleActiveCellPositionChange);\n      }\n    }\n  }\n\n  function unbindAncestorScrollEvents(){\n    if (!$boundAncestors){\n      return;\n    }\n    $boundAncestors.unbind('scroll.' + uid);\n    $boundAncestors = null;\n  }\n\n  function updateColumnHeader(columnId, title, toolTip){\n    if (!initialized){\n      return;\n    }\n    var idx = getColumnIndex(columnId);\n    if (idx == null){\n      return;\n    }\n\n    var columnDef = columns[idx];\n    var $header = $headers.children().eq(idx);\n    if ($header){\n      if (title !== undefined){\n        columns[idx].name = title;\n      }\n      if (toolTip !== undefined){\n        columns[idx].toolTip = toolTip;\n      }\n\n      trigger(self.onBeforeHeaderCellDestroy, {\n        'node': $header[0],\n        'column': columnDef,\n        'grid': self\n      });\n\n      $header\n        .attr('title', toolTip || '')\n        .children().eq(0).html(title);\n\n      trigger(self.onHeaderCellRendered, {\n        'node': $header[0],\n        'column': columnDef,\n        'grid': self\n      });\n    }\n  }\n\n  function getHeaderRow(){\n    return $headerRow[0];\n  }\n\n  function getFooterRow(){\n    return $footerRow[0];\n  }\n\n  function getHeaderRowColumn(columnId){\n    var idx = getColumnIndex(columnId);\n    var $header = $headerRow.children().eq(idx);\n    return $header && $header[0];\n  }\n\n  function getFooterRowColumn(columnId){\n    var idx = getColumnIndex(columnId);\n    var $footer = $footerRow.children().eq(idx);\n    return $footer && $footer[0];\n  }\n\n  function createColumnHeaders(){\n    function onMouseEnter(){\n      $(this).addClass('ui-state-hover');\n    }\n\n    function onMouseLeave(){\n      $(this).removeClass('ui-state-hover');\n    }\n\n    $headers.find('.slick-header-column')\n      .each(function(){\n        var columnDef = $(this).data('column');\n        if (columnDef){\n          trigger(self.onBeforeHeaderCellDestroy, {\n            'node': this,\n            'column': columnDef,\n            'grid': self\n          });\n        }\n      });\n    $headers.empty();\n    $headers.width(getHeadersWidth());\n\n    $headerRow.find('.slick-headerrow-column')\n      .each(function(){\n        var columnDef = $(this).data('column');\n        if (columnDef){\n          trigger(self.onBeforeHeaderRowCellDestroy, {\n            'node': this,\n            'column': columnDef,\n            'grid': self\n          });\n        }\n      });\n    $headerRow.empty();\n\n    if (options.createFooterRow){\n      $footerRow.find('.slick-footerrow-column')\n        .each(function(){\n          var columnDef = $(this).data('column');\n          if (columnDef){\n            trigger(self.onBeforeFooterRowCellDestroy, {\n              'node': this,\n              'column': columnDef\n            });\n          }\n        });\n      $footerRow.empty();\n    }\n\n    for (var i = 0; i < columns.length; i++){\n      var m = columns[i];\n\n      var header = $(\"<div class='ui-state-default slick-header-column' />\")\n        .html(\"<span class='slick-column-name'>\" + m.name + '</span>')\n        .width(m.width - headerColumnWidthDiff)\n        .attr('id', '' + uid + m.id)\n        .attr('title', m.toolTip || '')\n        .data('column', m)\n        .addClass(m.headerCssClass || '')\n        .appendTo($headers);\n\n      if (options.enableColumnReorder || m.sortable){\n        header\n          .on('mouseenter', onMouseEnter)\n          .on('mouseleave', onMouseLeave);\n      }\n\n      if (m.sortable){\n        header.addClass('slick-header-sortable');\n        header.append(\"<span class='slick-sort-indicator' />\");\n      }\n\n      trigger(self.onHeaderCellRendered, {\n        'node': header[0],\n        'column': m,\n        'grid': self\n      });\n\n      if (options.showHeaderRow){\n        var headerRowCell = $(\"<div class='ui-state-default slick-headerrow-column l\" + i + ' r' + i + \"'></div>\")\n          .data('column', m)\n          .appendTo($headerRow);\n\n        trigger(self.onHeaderRowCellRendered, {\n          'node': headerRowCell[0],\n          'column': m,\n          'grid': self\n        });\n      }\n      if (options.createFooterRow && options.showFooterRow){\n        var footerRowCell = $(\"<div class='ui-state-default slick-footerrow-column l\" + i + ' r' + i + \"'></div>\")\n          .data('column', m)\n          .appendTo($footerRow);\n\n        trigger(self.onFooterRowCellRendered, {\n          'node': footerRowCell[0],\n          'column': m\n        });\n      }\n    }\n\n    setSortColumns(sortColumns);\n    setupColumnResize();\n    if (options.enableColumnReorder){\n      setupColumnReorder();\n    }\n  }\n\n  function setupColumnSort(){\n    $headers.click(function(e){\n      // temporary workaround for a bug in jQuery 1.7.1 (http://bugs.jquery.com/ticket/11328)\n      e.metaKey = e.metaKey || e.ctrlKey;\n\n      if ($(e.target).hasClass('slick-resizable-handle')){\n        return;\n      }\n\n      var $col = $(e.target).closest('.slick-header-column');\n      if (!$col.length){\n        return;\n      }\n\n      var column = $col.data('column');\n      if (column.sortable){\n        if (!getEditorLock().commitCurrentEdit()){\n          return;\n        }\n\n        var sortOpts = null;\n        var i = 0;\n        for (; i < sortColumns.length; i++){\n          if (sortColumns[i].columnId == column.id){\n            sortOpts = sortColumns[i];\n            sortOpts.sortAsc = !sortOpts.sortAsc;\n            break;\n          }\n        }\n\n        if (e.metaKey && options.multiColumnSort){\n          if (sortOpts){\n            sortColumns.splice(i, 1);\n          }\n        }\n        else {\n          if ((!e.shiftKey && !e.metaKey) || !options.multiColumnSort){\n            sortColumns = [];\n          }\n\n          if (!sortOpts){\n            sortOpts = {columnId: column.id, sortAsc: column.defaultSortAsc};\n            sortColumns.push(sortOpts);\n          } else if (sortColumns.length == 0){\n            sortColumns.push(sortOpts);\n          }\n        }\n\n        setSortColumns(sortColumns);\n\n        if (!options.multiColumnSort){\n          trigger(self.onSort, {\n            multiColumnSort: false,\n            sortCol: column,\n            sortAsc: sortOpts.sortAsc,\n            grid: self\n          }, e);\n        } else {\n          trigger(self.onSort, {\n            multiColumnSort: true,\n            sortCols: $.map(sortColumns, function(col){\n              return {sortCol: columns[getColumnIndex(col.columnId)], sortAsc: col.sortAsc};\n            }),\n            grid: self\n          }, e);\n        }\n      }\n    });\n  }\n\n  /**\n   * Refactored to use interactjs\n   */\n  function setupColumnReorder(){\n    let x = 0;\n    let delta = 0;\n    let placeholder = document.createElement('div');\n\n    placeholder.className = 'interact-placeholder';\n\n    interact('.slick-header-column')\n      .ignoreFrom('.slick-resizable-handle')\n      .draggable({\n        inertia: true,\n        // keep the element within the area of it's parent\n        restrict: {\n          restriction: 'parent',\n          endOnly: true,\n          elementRect: {top: 0, left: 0, bottom: 0, right: 0}\n        },\n        // enable autoScroll\n        autoScroll: true,\n        axis: 'x',\n        onstart: event => {\n          x = 0;\n          delta = event.target.offsetWidth;\n\n          // get old order\n          $headers.find('.slick-header-column').each(function(index){\n            $(this).data('index', index);\n          });\n\n          placeholder.style.height = event.target.offsetHeight + 'px';\n          placeholder.style.width = delta + 'px';\n\n          $(event.target).after(placeholder).css({\n            position: 'absolute',\n            zIndex: 1000,\n            marginLeft: $(event.target).position().left\n          });\n        },\n\n        onmove: event => {\n          x += event.dx;\n          event.target.style.transform = `translate3d(${x}px, -3px, 100px)`;\n          // event.target.style.marginLeft = x + 'px';\n        },\n\n        onend: event => {\n          x = 0;\n          delta = 0;\n          $(event.target).css({\n            position: 'relative',\n            zIndex: '',\n            marginLeft: 0,\n            transform: 'none'\n          });\n\n          placeholder.parentNode.removeChild(placeholder);\n          const newColumns = [];\n\n          $headers.find('.slick-header-column').each(function(index){\n            newColumns.push(columns[$(this).data('index')]);\n            $(this).removeData('index');\n          });\n\n          setColumns(newColumns);\n          trigger(self.onColumnsReordered, {grid: self});\n          setupColumnResize();\n        }\n      })\n      .dropzone({\n        accept: '.slick-header-column',\n\n        ondragenter: event => {\n          event.target.classList.add('interact-drop-active');\n          event.relatedTarget.classList.add('interact-can-drop');\n        },\n\n        ondragleave: event => {\n          event.target.classList.remove('interact-drop-active');\n          event.relatedTarget.classList.remove('interact-can-drop');\n        },\n\n        ondrop: event => {\n          event.target.classList.remove('interact-drop-active');\n          event.relatedTarget.classList.remove('interact-can-drop');\n          $(event.target)[x > 0 ? 'after' : 'before'](event.relatedTarget);\n        }\n      });\n  }\n\n  function setupColumnResize(){\n    var $col, j, c, pageX, columnElements, minPageX, maxPageX, firstResizable, lastResizable;\n    columnElements = $headers.children();\n    columnElements.find('.slick-resizable-handle').remove();\n    columnElements.each(function(i, e){\n      if (columns[i].resizable){\n        if (firstResizable === undefined){\n          firstResizable = i;\n        }\n        lastResizable = i;\n      }\n    });\n    if (firstResizable === undefined){\n      return;\n    }\n    columnElements.each(function(i, element){\n      if (i < firstResizable || (options.forceFitColumns && i >= lastResizable)){\n        return;\n      }\n      $col = $(element);\n\n      const $handle = $(\"<div class='slick-resizable-handle' />\");\n      $handle.appendTo(element);\n\n      if ($col.data('resizable'))\n        return;\n\n      const activeColumn = columns[i];\n      if (activeColumn.resizable){\n        $col.data('resizable', true);\n        interact(element).resizable({\n          preserveAspectRatio: false,\n          edges: { left: true, right: true, bottom: false, top: false }\n        }).on('resizestart', function(event){\n          if (!getEditorLock().commitCurrentEdit()){\n            return false;\n          }\n          activeColumn.previousWidth = event.rect.width;\n          event.target.classList.add('slick-header-column-active');\n        }).on('resizemove', function(event){\n          let x = event.dx;\n          let width = activeColumn.width += x;\n\n          if (activeColumn.minWidth > 0 && activeColumn.minWidth > width)\n            width = activeColumn.minWidth;\n          else if (activeColumn.maxWidth > 0 && activeColumn.maxWidth < width)\n            width = activeColumn.maxWidth;\n\n          activeColumn.width = width;\n\n          if (options.forceFitColumns){\n            autosizeColumns();\n          }\n          applyColumnHeaderWidths();\n          if (options.syncColumnCellResize){\n            applyColumnWidths();\n          }\n        }).on('resizeend', function(event){\n          event.target.classList.remove('slick-header-column-active');\n          invalidateAllRows();\n          updateCanvasWidth(true);\n          render();\n          trigger(self.onColumnsResized, {grid: self});\n        });\n      }\n    });\n  }\n\n  function getVBoxDelta($el){\n    var p = ['borderTopWidth', 'borderBottomWidth', 'paddingTop', 'paddingBottom'];\n    var delta = 0;\n    $.each(p, function(n, val){\n      delta += parseFloat($el.css(val)) || 0;\n    });\n    return delta;\n  }\n\n  function measureCellPaddingAndBorder(){\n    var el;\n    var h = ['borderLeftWidth', 'borderRightWidth', 'paddingLeft', 'paddingRight'];\n    var v = ['borderTopWidth', 'borderBottomWidth', 'paddingTop', 'paddingBottom'];\n\n    // jquery prior to version 1.8 handles .width setter/getter as a direct css write/read\n    // jquery 1.8 changed .width to read the true inner element width if box-sizing is set to border-box, and introduced a setter for .outerWidth\n    // so for equivalent functionality, prior to 1.8 use .width, and after use .outerWidth\n    var verArray = $.fn.jquery.split('.');\n    jQueryNewWidthBehaviour = (verArray[0] == 1 && verArray[1] >= 8) || verArray[0] >= 2;\n\n    el = $(\"<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>\").appendTo($headers);\n    headerColumnWidthDiff = headerColumnHeightDiff = 0;\n    if (el.css('box-sizing') != 'border-box' && el.css('-moz-box-sizing') != 'border-box' && el.css('-webkit-box-sizing') != 'border-box'){\n      $.each(h, function(n, val){\n        headerColumnWidthDiff += parseFloat(el.css(val)) || 0;\n      });\n      $.each(v, function(n, val){\n        headerColumnHeightDiff += parseFloat(el.css(val)) || 0;\n      });\n    }\n    el.remove();\n\n    var r = $(\"<div class='slick-row' />\").appendTo($canvas);\n    el = $(\"<div class='slick-cell' id='' style='visibility:hidden'>-</div>\").appendTo(r);\n    cellWidthDiff = cellHeightDiff = 0;\n    if (el.css('box-sizing') != 'border-box' && el.css('-moz-box-sizing') != 'border-box' && el.css('-webkit-box-sizing') != 'border-box'){\n      $.each(h, function(n, val){\n        cellWidthDiff += parseFloat(el.css(val)) || 0;\n      });\n      $.each(v, function(n, val){\n        cellHeightDiff += parseFloat(el.css(val)) || 0;\n      });\n    }\n    r.remove();\n\n    absoluteColumnMinWidth = Math.max(headerColumnWidthDiff, cellWidthDiff);\n  }\n\n  function createCssRules(){\n    $style = $(\"<style type='text/css' rel='stylesheet' />\").appendTo($('head'));\n    var rowHeight = (options.rowHeight - cellHeightDiff);\n    var rules = [\n      '.' + uid + ' .slick-header-column { left: 0; }',\n      '.' + uid + ' .slick-top-panel { height:' + options.topPanelHeight + 'px; }',\n      '.' + uid + ' .slick-headerrow-columns { height:' + options.headerRowHeight + 'px; }',\n      '.' + uid + ' .slick-footerrow-columns { height:' + options.footerRowHeight + 'px; }',\n      '.' + uid + ' .slick-cell { height:' + rowHeight + 'px; }',\n      '.' + uid + ' .slick-row { height:' + options.rowHeight + 'px; }'\n    ];\n\n    for (var i = 0; i < columns.length; i++){\n      rules.push('.' + uid + ' .l' + i + ' { }');\n      rules.push('.' + uid + ' .r' + i + ' { }');\n    }\n\n    if ($style[0].styleSheet){ // IE\n      $style[0].styleSheet.cssText = rules.join(' ');\n    } else {\n      $style[0].appendChild(document.createTextNode(rules.join(' ')));\n    }\n  }\n\n  function getColumnCssRules(idx){\n    if (!stylesheet){\n      var sheets = document.styleSheets;\n      for (var i = 0; i < sheets.length; i++){\n        if ((sheets[i].ownerNode || sheets[i].owningElement) == $style[0]){\n          stylesheet = sheets[i];\n          break;\n        }\n      }\n\n      if (!stylesheet){\n        throw new Error('Cannot find stylesheet.');\n      }\n\n      // find and cache column CSS rules\n      columnCssRulesL = [];\n      columnCssRulesR = [];\n      var cssRules = (stylesheet.cssRules || stylesheet.rules);\n      var matches, columnIdx;\n      for (var i = 0; i < cssRules.length; i++){\n        var selector = cssRules[i].selectorText;\n        if (matches = /\\.l\\d+/.exec(selector)){\n          columnIdx = parseInt(matches[0].substr(2, matches[0].length - 2), 10);\n          columnCssRulesL[columnIdx] = cssRules[i];\n        } else if (matches = /\\.r\\d+/.exec(selector)){\n          columnIdx = parseInt(matches[0].substr(2, matches[0].length - 2), 10);\n          columnCssRulesR[columnIdx] = cssRules[i];\n        }\n      }\n    }\n\n    return {\n      'left': columnCssRulesL[idx],\n      'right': columnCssRulesR[idx]\n    };\n  }\n\n  function removeCssRules(){\n    $style.remove();\n    stylesheet = null;\n  }\n\n  function destroy(){\n    getEditorLock().cancelCurrentEdit();\n\n    trigger(self.onBeforeDestroy, {grid: self});\n\n    var i = plugins.length;\n    while (i--){\n      unregisterPlugin(plugins[i]);\n    }\n\n    if (options.enableColumnReorder){\n      $headers.filter(':ui-sortable').sortable('destroy');\n    }\n\n    unbindAncestorScrollEvents();\n    $container.unbind('.slickgrid');\n    removeCssRules();\n\n    $canvas.unbind('draginit dragstart dragend drag');\n    $container.empty().removeClass(uid);\n  }\n\n  // ////////////////////////////////////////////////////////////////////////////////////////////\n  // General\n\n  function trigger(evt, args, e){\n    e = e || new Slick.EventData();\n    args = args || {};\n    args.grid = self;\n    return evt.notify(args, e, self);\n  }\n\n  function getEditorLock(){\n    return options.editorLock;\n  }\n\n  function getEditController(){\n    return editController;\n  }\n\n  function getColumnIndex(id){\n    return columnsById[id];\n  }\n\n  function autosizeColumns(){\n    var i, c,\n      widths = [],\n      shrinkLeeway = 0,\n      total = 0,\n      prevTotal,\n      availWidth = viewportHasVScroll ? viewportW - scrollbarDimensions.width : viewportW;\n\n    for (i = 0; i < columns.length; i++){\n      c = columns[i];\n      widths.push(c.width);\n      total += c.width;\n      if (c.resizable){\n        shrinkLeeway += c.width - Math.max(c.minWidth, absoluteColumnMinWidth);\n      }\n    }\n\n    // shrink\n    prevTotal = total;\n    while (total > availWidth && shrinkLeeway){\n      var shrinkProportion = (total - availWidth) / shrinkLeeway;\n      for (i = 0; i < columns.length && total > availWidth; i++){\n        c = columns[i];\n        var width = widths[i];\n        if (!c.resizable || width <= c.minWidth || width <= absoluteColumnMinWidth){\n          continue;\n        }\n        var absMinWidth = Math.max(c.minWidth, absoluteColumnMinWidth);\n        var shrinkSize = Math.floor(shrinkProportion * (width - absMinWidth)) || 1;\n        shrinkSize = Math.min(shrinkSize, width - absMinWidth);\n        total -= shrinkSize;\n        shrinkLeeway -= shrinkSize;\n        widths[i] -= shrinkSize;\n      }\n      if (prevTotal <= total){  // avoid infinite loop\n        break;\n      }\n      prevTotal = total;\n    }\n\n    // grow\n    prevTotal = total;\n    while (total < availWidth){\n      var growProportion = availWidth / total;\n      for (i = 0; i < columns.length && total < availWidth; i++){\n        c = columns[i];\n        var currentWidth = widths[i];\n        var growSize;\n\n        if (!c.resizable || c.maxWidth <= currentWidth){\n          growSize = 0;\n        } else {\n          growSize = Math.min(Math.floor(growProportion * currentWidth) - currentWidth, (c.maxWidth - currentWidth) || 1000000) || 1;\n        }\n        total += growSize;\n        widths[i] += (total <= availWidth ? growSize : 0);\n      }\n      if (prevTotal >= total){  // avoid infinite loop\n        break;\n      }\n      prevTotal = total;\n    }\n\n    var reRender = false;\n    for (i = 0; i < columns.length; i++){\n      if (columns[i].rerenderOnResize && columns[i].width != widths[i]){\n        reRender = true;\n      }\n      columns[i].width = widths[i];\n    }\n\n    applyColumnHeaderWidths();\n    updateCanvasWidth(true);\n    if (reRender){\n      invalidateAllRows();\n      render();\n    }\n  }\n\n  function applyColumnHeaderWidths(){\n    if (!initialized){\n      return;\n    }\n    var h;\n    for (var i = 0, headers = $headers.children('[id]'), ii = headers.length; i < ii; i++){\n      h = $(headers[i]);\n      if (jQueryNewWidthBehaviour){\n        if (h.outerWidth() !== columns[i].width){\n          h.outerWidth(columns[i].width);\n        }\n      } else {\n        if (h.width() !== columns[i].width - headerColumnWidthDiff){\n          h.width(columns[i].width - headerColumnWidthDiff);\n        }\n      }\n    }\n\n    updateColumnCaches();\n  }\n\n  function applyColumnWidths(){\n    var x = 0, w, rule;\n    for (var i = 0; i < columns.length; i++){\n      w = columns[i].width;\n\n      rule = getColumnCssRules(i);\n      rule.left.style.left = x + 'px';\n      rule.right.style.right = (canvasWidth - x - w) + 'px';\n\n      x += columns[i].width;\n    }\n  }\n\n  function setSortColumn(columnId, ascending){\n    setSortColumns([{columnId: columnId, sortAsc: ascending}]);\n  }\n\n  function setSortColumns(cols){\n    sortColumns = cols;\n\n    var headerColumnEls = $headers.children();\n    headerColumnEls\n      .removeClass('slick-header-column-sorted')\n      .find('.slick-sort-indicator')\n      .removeClass('slick-sort-indicator-asc slick-sort-indicator-desc');\n\n    $.each(sortColumns, function(i, col){\n      if (col.sortAsc == null){\n        col.sortAsc = true;\n      }\n      var columnIndex = getColumnIndex(col.columnId);\n      if (columnIndex != null){\n        headerColumnEls.eq(columnIndex)\n          .addClass('slick-header-column-sorted')\n          .find('.slick-sort-indicator')\n          .addClass(col.sortAsc ? 'slick-sort-indicator-asc' : 'slick-sort-indicator-desc');\n      }\n    });\n  }\n\n  function getSortColumns(){\n    return sortColumns;\n  }\n\n  function handleSelectedRangesChanged(e, ranges){\n    selectedRows = [];\n    var hash = {};\n    for (var i = 0; i < ranges.length; i++){\n      for (var j = ranges[i].fromRow; j <= ranges[i].toRow; j++){\n        if (!hash[j]){  // prevent duplicates\n          selectedRows.push(j);\n          hash[j] = {};\n        }\n        for (var k = ranges[i].fromCell; k <= ranges[i].toCell; k++){\n          if (canCellBeSelected(j, k)){\n            hash[j][columns[k].id] = options.selectedCellCssClass;\n          }\n        }\n      }\n    }\n\n    setCellCssStyles(options.selectedCellCssClass, hash);\n\n    trigger(self.onSelectedRowsChanged, {rows: getSelectedRows(), grid: self}, e);\n  }\n\n  function getColumns(){\n    return columns;\n  }\n\n  function updateColumnCaches(){\n    // Pre-calculate cell boundaries.\n    columnPosLeft = [];\n    columnPosRight = [];\n    var x = 0;\n    for (var i = 0, ii = columns.length; i < ii; i++){\n      columnPosLeft[i] = x;\n      columnPosRight[i] = x + columns[i].width;\n      x += columns[i].width;\n    }\n  }\n\n  function setColumns(columnDefinitions){\n    columns = columnDefinitions;\n\n    columnsById = {};\n    for (var i = 0; i < columns.length; i++){\n      var m = columns[i] = $.extend({}, columnDefaults, columns[i]);\n      columnsById[m.id] = i;\n      if (m.minWidth && m.width < m.minWidth){\n        m.width = m.minWidth;\n      }\n      if (m.maxWidth && m.width > m.maxWidth){\n        m.width = m.maxWidth;\n      }\n    }\n\n    updateColumnCaches();\n\n    if (initialized){\n      invalidateAllRows();\n      createColumnHeaders();\n      removeCssRules();\n      createCssRules();\n      resizeCanvas();\n      applyColumnWidths();\n      handleScroll();\n    }\n  }\n\n  function getOptions(){\n    return options;\n  }\n\n  function setOptions(args){\n    if (!getEditorLock().commitCurrentEdit()){\n      return;\n    }\n\n    makeActiveCellNormal();\n\n    if (options.enableAddRow !== args.enableAddRow){\n      invalidateRow(getDataLength());\n    }\n\n    options = $.extend(options, args);\n    validateAndEnforceOptions();\n\n    $viewport.css('overflow-y', options.autoHeight ? 'hidden' : 'auto');\n    render();\n  }\n\n  function validateAndEnforceOptions(){\n    if (options.autoHeight){\n      options.leaveSpaceForNewRows = false;\n    }\n  }\n\n  function setData(newData, scrollToTop){\n    data = newData;\n    invalidateAllRows();\n    updateRowCount();\n    if (scrollToTop){\n      scrollTo(0);\n    }\n  }\n\n  function getData(){\n    return data;\n  }\n\n  function getDataLength(){\n    if (data.getLength){\n      return data.getLength();\n    } else {\n      return data.length;\n    }\n  }\n\n  function getDataLengthIncludingAddNew(){\n    return getDataLength() + (options.enableAddRow ? 1 : 0);\n  }\n\n  function getDataItem(i){\n    if (data.getItem){\n      return data.getItem(i);\n    } else {\n      return data[i];\n    }\n  }\n\n  function getTopPanel(){\n    return $topPanel[0];\n  }\n\n  function setTopPanelVisibility(visible){\n    if (options.showTopPanel != visible){\n      options.showTopPanel = visible;\n      if (visible){\n        $topPanelScroller.slideDown('fast', resizeCanvas);\n      } else {\n        $topPanelScroller.slideUp('fast', resizeCanvas);\n      }\n    }\n  }\n\n  function setHeaderRowVisibility(visible){\n    if (options.showHeaderRow != visible){\n      options.showHeaderRow = visible;\n      if (visible){\n        $headerRowScroller.slideDown('fast', resizeCanvas);\n      } else {\n        $headerRowScroller.slideUp('fast', resizeCanvas);\n      }\n    }\n  }\n\n  function setFooterRowVisibility(visible){\n    if (options.showFooterRow != visible){\n      options.showFooterRow = visible;\n      if (visible){\n        $footerRowScroller.slideDown('fast', resizeCanvas);\n      } else {\n        $footerRowScroller.slideUp('fast', resizeCanvas);\n      }\n    }\n  }\n\n  function getContainerNode(){\n    return $container.get(0);\n  }\n\n  // ////////////////////////////////////////////////////////////////////////////////////////////\n  // Rendering / Scrolling\n\n  function getRowTop(row){\n    return options.rowHeight * row - offset;\n  }\n\n  function getRowFromPosition(y){\n    return Math.floor((y + offset) / options.rowHeight);\n  }\n\n  function scrollTo(y){\n    y = Math.max(y, 0);\n    y = Math.min(y, th - viewportH + (viewportHasHScroll ? scrollbarDimensions.height : 0));\n\n    var oldOffset = offset;\n\n    page = Math.min(n - 1, Math.floor(y / ph));\n    offset = Math.round(page * cj);\n    var newScrollTop = y - offset;\n\n    if (offset != oldOffset){\n      var range = getVisibleRange(newScrollTop);\n      cleanupRows(range);\n      updateRowPositions();\n    }\n\n    if (prevScrollTop != newScrollTop){\n      vScrollDir = (prevScrollTop + oldOffset < newScrollTop + offset) ? 1 : -1;\n      $viewport[0].scrollTop = (lastRenderedScrollTop = scrollTop = prevScrollTop = newScrollTop);\n\n      trigger(self.onViewportChanged, {grid: self});\n    }\n  }\n\n  function defaultFormatter(row, cell, value, columnDef, dataContext){\n    if (value == null){\n      return '';\n    } else {\n      return (value + '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    }\n  }\n\n  function getFormatter(row, column){\n    var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);\n\n    // look up by id, then index\n    var columnOverrides = rowMetadata &&\n      rowMetadata.columns &&\n      (rowMetadata.columns[column.id] || rowMetadata.columns[getColumnIndex(column.id)]);\n\n    return (columnOverrides && columnOverrides.formatter) ||\n      (rowMetadata && rowMetadata.formatter) ||\n      column.formatter ||\n      (options.formatterFactory && options.formatterFactory.getFormatter(column)) ||\n      options.defaultFormatter;\n  }\n\n  function getEditor(row, cell){\n    var column = columns[cell];\n    var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);\n    var columnMetadata = rowMetadata && rowMetadata.columns;\n\n    if (columnMetadata && columnMetadata[column.id] && columnMetadata[column.id].editor !== undefined){\n      return columnMetadata[column.id].editor;\n    }\n    if (columnMetadata && columnMetadata[cell] && columnMetadata[cell].editor !== undefined){\n      return columnMetadata[cell].editor;\n    }\n\n    return column.editor || (options.editorFactory && options.editorFactory.getEditor(column));\n  }\n\n  function getDataItemValueForColumn(item, columnDef){\n    if (options.dataItemColumnValueExtractor){\n      return options.dataItemColumnValueExtractor(item, columnDef);\n    }\n    return item[columnDef.field];\n  }\n\n  function appendRowHtml(stringArray, row, range, dataLength){\n    var d = getDataItem(row);\n    var dataLoading = row < dataLength && !d;\n    var rowCss = 'slick-row' +\n      (dataLoading ? ' loading' : '') +\n      (row === activeRow ? ' active' : '') +\n      (row % 2 == 1 ? ' odd' : ' even');\n\n    if (!d){\n      rowCss += ' ' + options.addNewRowCssClass;\n    }\n\n    var metadata = data.getItemMetadata && data.getItemMetadata(row);\n\n    if (metadata && metadata.cssClasses){\n      rowCss += ' ' + metadata.cssClasses;\n    }\n\n    stringArray.push(\"<div class='ui-widget-content \" + rowCss + \"' style='top:\" + getRowTop(row) + \"px'>\");\n\n    var colspan, m;\n    for (var i = 0, ii = columns.length; i < ii; i++){\n      m = columns[i];\n      colspan = 1;\n      if (metadata && metadata.columns){\n        var columnData = metadata.columns[m.id] || metadata.columns[i];\n        colspan = (columnData && columnData.colspan) || 1;\n        if (colspan === '*'){\n          colspan = ii - i;\n        }\n      }\n\n      // Do not render cells outside of the viewport.\n      if (columnPosRight[Math.min(ii - 1, i + colspan - 1)] > range.leftPx){\n        if (columnPosLeft[i] > range.rightPx){\n          // All columns to the right are outside the range.\n          break;\n        }\n\n        appendCellHtml(stringArray, row, i, colspan, d);\n      }\n\n      if (colspan > 1){\n        i += (colspan - 1);\n      }\n    }\n\n    stringArray.push('</div>');\n  }\n\n  function appendCellHtml(stringArray, row, cell, colspan, item){\n    // stringArray: stringBuilder containing the HTML parts\n    // row, cell: row and column index\n    // colspan: HTML colspan\n    // item: grid data for row\n\n    var m = columns[cell];\n    var cellCss = 'slick-cell l' + cell + ' r' + Math.min(columns.length - 1, cell + colspan - 1) +\n      (m.cssClass ? ' ' + m.cssClass : '');\n    if (row === activeRow && cell === activeCell){\n      cellCss += (' active');\n    }\n\n    // TODO:  merge them together in the setter\n    for (var key in cellCssClasses){\n      if (cellCssClasses[key][row] && cellCssClasses[key][row][m.id]){\n        cellCss += (' ' + cellCssClasses[key][row][m.id]);\n      }\n    }\n\n    stringArray.push(\"<div class='\" + cellCss + \"'>\");\n\n    // if there is a corresponding row (if not, this is the Add New row or this data hasn't been loaded yet)\n    if (item){\n      var value = getDataItemValueForColumn(item, m);\n      stringArray.push(getFormatter(row, m)(row, cell, value, m, item));\n    }\n\n    stringArray.push('</div>');\n\n    rowsCache[row].cellRenderQueue.push(cell);\n    rowsCache[row].cellColSpans[cell] = colspan;\n  }\n\n  function cleanupRows(rangeToKeep){\n    for (var i in rowsCache){\n      if (((i = parseInt(i, 10)) !== activeRow) && (i < rangeToKeep.top || i > rangeToKeep.bottom)){\n        removeRowFromCache(i);\n      }\n    }\n    if (options.enableAsyncPostRenderCleanup){\n      startPostProcessingCleanup();\n    }\n  }\n\n  function invalidate(){\n    updateRowCount();\n    invalidateAllRows();\n    render();\n  }\n\n  function invalidateAllRows(){\n    if (currentEditor){\n      makeActiveCellNormal();\n    }\n    for (var row in rowsCache){\n      removeRowFromCache(row);\n    }\n    if (options.enableAsyncPostRenderCleanup){\n      startPostProcessingCleanup();\n    }\n  }\n\n  function queuePostProcessedRowForCleanup(cacheEntry, postProcessedRow, rowIdx){\n    postProcessgroupId++;\n\n    // store and detach node for later async cleanup\n    for (var columnIdx in postProcessedRow){\n      if (postProcessedRow.hasOwnProperty(columnIdx)){\n        postProcessedCleanupQueue.push({\n          actionType: 'C',\n          groupId: postProcessgroupId,\n          node: cacheEntry.cellNodesByColumnIdx[columnIdx | 0],\n          columnIdx: columnIdx | 0,\n          rowIdx: rowIdx\n        });\n      }\n    }\n    postProcessedCleanupQueue.push({\n      actionType: 'R',\n      groupId: postProcessgroupId,\n      node: cacheEntry.rowNode\n    });\n    $(cacheEntry.rowNode).detach();\n  }\n\n  function queuePostProcessedCellForCleanup(cellnode, columnIdx, rowIdx){\n    postProcessedCleanupQueue.push({\n      actionType: 'C',\n      groupId: postProcessgroupId,\n      node: cellnode,\n      columnIdx: columnIdx,\n      rowIdx: rowIdx\n    });\n    $(cellnode).detach();\n  }\n\n  function removeRowFromCache(row){\n    var cacheEntry = rowsCache[row];\n    if (!cacheEntry){\n      return;\n    }\n\n    if (rowNodeFromLastMouseWheelEvent === cacheEntry.rowNode){\n      cacheEntry.rowNode.style.display = 'none';\n      zombieRowNodeFromLastMouseWheelEvent = rowNodeFromLastMouseWheelEvent;\n      zombieRowCacheFromLastMouseWheelEvent = cacheEntry;\n      zombieRowPostProcessedFromLastMouseWheelEvent = postProcessedRows[row];\n      // ignore post processing cleanup in this case - it will be dealt with later\n    } else {\n      if (options.enableAsyncPostRenderCleanup && postProcessedRows[row]){\n        queuePostProcessedRowForCleanup(cacheEntry, postProcessedRows[row], row);\n      } else {\n        $canvas[0].removeChild(cacheEntry.rowNode);\n      }\n    }\n\n    delete rowsCache[row];\n    delete postProcessedRows[row];\n    renderedRows--;\n    counter_rows_removed++;\n  }\n\n  function invalidateRows(rows){\n    var i, rl;\n    if (!rows || !rows.length){\n      return;\n    }\n    vScrollDir = 0;\n    for (i = 0, rl = rows.length; i < rl; i++){\n      if (currentEditor && activeRow === rows[i]){\n        makeActiveCellNormal();\n      }\n      if (rowsCache[rows[i]]){\n        removeRowFromCache(rows[i]);\n      }\n    }\n    if (options.enableAsyncPostRenderCleanup){\n      startPostProcessingCleanup();\n    }\n  }\n\n  function invalidateRow(row){\n    invalidateRows([row]);\n  }\n\n  function updateCell(row, cell){\n    var cellNode = getCellNode(row, cell);\n    if (!cellNode){\n      return;\n    }\n\n    var m = columns[cell], d = getDataItem(row);\n    if (currentEditor && activeRow === row && activeCell === cell){\n      currentEditor.loadValue(d);\n    } else {\n      cellNode.innerHTML = d ? getFormatter(row, m)(row, cell, getDataItemValueForColumn(d, m), m, d) : '';\n      invalidatePostProcessingResults(row);\n    }\n  }\n\n  function updateRow(row){\n    var cacheEntry = rowsCache[row];\n    if (!cacheEntry){\n      return;\n    }\n\n    ensureCellNodesInRowsCache(row);\n\n    var d = getDataItem(row);\n\n    for (var columnIdx in cacheEntry.cellNodesByColumnIdx){\n      if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)){\n        continue;\n      }\n\n      columnIdx = columnIdx | 0;\n      var m = columns[columnIdx],\n        node = cacheEntry.cellNodesByColumnIdx[columnIdx];\n\n      if (row === activeRow && columnIdx === activeCell && currentEditor){\n        currentEditor.loadValue(d);\n      } else if (d){\n        node.innerHTML = getFormatter(row, m)(row, columnIdx, getDataItemValueForColumn(d, m), m, d);\n      } else {\n        node.innerHTML = '';\n      }\n    }\n\n    invalidatePostProcessingResults(row);\n  }\n\n  function getViewportHeight(){\n    return parseFloat($.css($container[0], 'height', true)) -\n      parseFloat($.css($container[0], 'paddingTop', true)) -\n      parseFloat($.css($container[0], 'paddingBottom', true)) -\n      parseFloat($.css($headerScroller[0], 'height')) - getVBoxDelta($headerScroller) -\n      (options.showTopPanel ? options.topPanelHeight + getVBoxDelta($topPanelScroller) : 0) -\n      (options.showHeaderRow ? options.headerRowHeight + getVBoxDelta($headerRowScroller) : 0) -\n      (options.createFooterRow && options.showFooterRow ? options.footerRowHeight + getVBoxDelta($footerRowScroller) : 0);\n  }\n\n  function resizeCanvas(){\n    if (!initialized){\n      return;\n    }\n    if (options.autoHeight){\n      viewportH = options.rowHeight * getDataLengthIncludingAddNew();\n    } else {\n      viewportH = getViewportHeight();\n    }\n\n    numVisibleRows = Math.ceil(viewportH / options.rowHeight);\n    viewportW = parseFloat($.css($container[0], 'width', true));\n    if (!options.autoHeight){\n      $viewport.height(viewportH);\n    }\n\n    if (options.forceFitColumns){\n      autosizeColumns();\n    }\n\n    updateRowCount();\n    handleScroll();\n    // Since the width has changed, force the render() to reevaluate virtually rendered cells.\n    lastRenderedScrollLeft = -1;\n    render();\n  }\n\n  function updateRowCount(){\n    if (!initialized){\n      return;\n    }\n\n    var dataLengthIncludingAddNew = getDataLengthIncludingAddNew();\n    var numberOfRows = dataLengthIncludingAddNew +\n      (options.leaveSpaceForNewRows ? numVisibleRows - 1 : 0);\n\n    var oldViewportHasVScroll = viewportHasVScroll;\n    // with autoHeight, we do not need to accommodate the vertical scroll bar\n    viewportHasVScroll = !options.autoHeight && (numberOfRows * options.rowHeight > viewportH);\n    viewportHasHScroll = (canvasWidth > viewportW - scrollbarDimensions.width);\n\n    makeActiveCellNormal();\n\n    // remove the rows that are now outside of the data range\n    // this helps avoid redundant calls to .removeRow() when the size of the data decreased by thousands of rows\n    var l = dataLengthIncludingAddNew - 1;\n    for (var i in rowsCache){\n      if (i > l){\n        removeRowFromCache(i);\n      }\n    }\n    if (options.enableAsyncPostRenderCleanup){\n      startPostProcessingCleanup();\n    }\n\n    if (activeCellNode && activeRow > l){\n      resetActiveCell();\n    }\n\n    var oldH = h;\n    th = Math.max(options.rowHeight * numberOfRows, viewportH - scrollbarDimensions.height);\n    if (th < maxSupportedCssHeight){\n      // just one page\n      h = ph = th;\n      n = 1;\n      cj = 0;\n    } else {\n      // break into pages\n      h = maxSupportedCssHeight;\n      ph = h / 100;\n      n = Math.floor(th / ph);\n      cj = (th - h) / (n - 1);\n    }\n\n    if (h !== oldH){\n      $canvas.css('height', h);\n      scrollTop = $viewport[0].scrollTop;\n    }\n\n    var oldScrollTopInRange = (scrollTop + offset <= th - viewportH);\n\n    if (th == 0 || scrollTop == 0){\n      page = offset = 0;\n    } else if (oldScrollTopInRange){\n      // maintain virtual position\n      scrollTo(scrollTop + offset);\n    } else {\n      // scroll to bottom\n      scrollTo(th - viewportH);\n    }\n\n    if (h != oldH && options.autoHeight){\n      resizeCanvas();\n    }\n\n    if (options.forceFitColumns && oldViewportHasVScroll != viewportHasVScroll){\n      autosizeColumns();\n    }\n    updateCanvasWidth(false);\n  }\n\n  function getVisibleRange(viewportTop, viewportLeft){\n    if (viewportTop == null){\n      viewportTop = scrollTop;\n    }\n    if (viewportLeft == null){\n      viewportLeft = scrollLeft;\n    }\n\n    return {\n      top: getRowFromPosition(viewportTop),\n      bottom: getRowFromPosition(viewportTop + viewportH) + 1,\n      leftPx: viewportLeft,\n      rightPx: viewportLeft + viewportW\n    };\n  }\n\n  function getRenderedRange(viewportTop, viewportLeft){\n    var range = getVisibleRange(viewportTop, viewportLeft);\n    var buffer = Math.round(viewportH / options.rowHeight);\n    var minBuffer = 3;\n\n    if (vScrollDir == -1){\n      range.top -= buffer;\n      range.bottom += minBuffer;\n    } else if (vScrollDir == 1){\n      range.top -= minBuffer;\n      range.bottom += buffer;\n    } else {\n      range.top -= minBuffer;\n      range.bottom += minBuffer;\n    }\n\n    range.top = Math.max(0, range.top);\n    range.bottom = Math.min(getDataLengthIncludingAddNew() - 1, range.bottom);\n\n    range.leftPx -= viewportW;\n    range.rightPx += viewportW;\n\n    range.leftPx = Math.max(0, range.leftPx);\n    range.rightPx = Math.min(canvasWidth, range.rightPx);\n\n    return range;\n  }\n\n  function ensureCellNodesInRowsCache(row){\n    var cacheEntry = rowsCache[row];\n    if (cacheEntry){\n      if (cacheEntry.cellRenderQueue.length){\n        var lastChild = cacheEntry.rowNode.lastChild;\n        while (cacheEntry.cellRenderQueue.length){\n          var columnIdx = cacheEntry.cellRenderQueue.pop();\n          cacheEntry.cellNodesByColumnIdx[columnIdx] = lastChild;\n          lastChild = lastChild.previousSibling;\n        }\n      }\n    }\n  }\n\n  function cleanUpCells(range, row){\n    var totalCellsRemoved = 0;\n    var cacheEntry = rowsCache[row];\n\n    // Remove cells outside the range.\n    var cellsToRemove = [];\n    for (var i in cacheEntry.cellNodesByColumnIdx){\n      // I really hate it when people mess with Array.prototype.\n      if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(i)){\n        continue;\n      }\n\n      // This is a string, so it needs to be cast back to a number.\n      i = i | 0;\n\n      var colspan = cacheEntry.cellColSpans[i];\n      if (columnPosLeft[i] > range.rightPx ||\n        columnPosRight[Math.min(columns.length - 1, i + colspan - 1)] < range.leftPx){\n        if (!(row == activeRow && i == activeCell)){\n          cellsToRemove.push(i);\n        }\n      }\n    }\n\n    var cellToRemove, node;\n    postProcessgroupId++;\n    while ((cellToRemove = cellsToRemove.pop()) != null){\n      node = cacheEntry.cellNodesByColumnIdx[cellToRemove];\n      if (options.enableAsyncPostRenderCleanup && postProcessedRows[row] && postProcessedRows[row][cellToRemove]){\n        queuePostProcessedCellForCleanup(node, cellToRemove, row);\n      } else {\n        cacheEntry.rowNode.removeChild(node);\n      }\n\n      delete cacheEntry.cellColSpans[cellToRemove];\n      delete cacheEntry.cellNodesByColumnIdx[cellToRemove];\n      if (postProcessedRows[row]){\n        delete postProcessedRows[row][cellToRemove];\n      }\n      totalCellsRemoved++;\n    }\n  }\n\n  function cleanUpAndRenderCells(range){\n    var cacheEntry;\n    var stringArray = [];\n    var processedRows = [];\n    var cellsAdded;\n    var totalCellsAdded = 0;\n    var colspan;\n\n    for (var row = range.top, btm = range.bottom; row <= btm; row++){\n      cacheEntry = rowsCache[row];\n      if (!cacheEntry){\n        continue;\n      }\n\n      // cellRenderQueue populated in renderRows() needs to be cleared first\n      ensureCellNodesInRowsCache(row);\n\n      cleanUpCells(range, row);\n\n      // Render missing cells.\n      cellsAdded = 0;\n\n      var metadata = data.getItemMetadata && data.getItemMetadata(row);\n      metadata = metadata && metadata.columns;\n\n      var d = getDataItem(row);\n\n      // TODO:  shorten this loop (index? heuristics? binary search?)\n      for (var i = 0, ii = columns.length; i < ii; i++){\n        // Cells to the right are outside the range.\n        if (columnPosLeft[i] > range.rightPx){\n          break;\n        }\n\n        // Already rendered.\n        if ((colspan = cacheEntry.cellColSpans[i]) != null){\n          i += (colspan > 1 ? colspan - 1 : 0);\n          continue;\n        }\n\n        colspan = 1;\n        if (metadata){\n          var columnData = metadata[columns[i].id] || metadata[i];\n          colspan = (columnData && columnData.colspan) || 1;\n          if (colspan === '*'){\n            colspan = ii - i;\n          }\n        }\n\n        if (columnPosRight[Math.min(ii - 1, i + colspan - 1)] > range.leftPx){\n          appendCellHtml(stringArray, row, i, colspan, d);\n          cellsAdded++;\n        }\n\n        i += (colspan > 1 ? colspan - 1 : 0);\n      }\n\n      if (cellsAdded){\n        totalCellsAdded += cellsAdded;\n        processedRows.push(row);\n      }\n    }\n\n    if (!stringArray.length){\n      return;\n    }\n\n    var x = document.createElement('div');\n    x.innerHTML = stringArray.join('');\n\n    var processedRow;\n    var node;\n    while ((processedRow = processedRows.pop()) != null){\n      cacheEntry = rowsCache[processedRow];\n      var columnIdx;\n      while ((columnIdx = cacheEntry.cellRenderQueue.pop()) != null){\n        node = x.lastChild;\n        cacheEntry.rowNode.appendChild(node);\n        cacheEntry.cellNodesByColumnIdx[columnIdx] = node;\n      }\n    }\n  }\n\n  function renderRows(range){\n    var parentNode = $canvas[0],\n      stringArray = [],\n      rows = [],\n      needToReselectCell = false,\n      dataLength = getDataLength();\n\n    for (var i = range.top, ii = range.bottom; i <= ii; i++){\n      if (rowsCache[i]){\n        continue;\n      }\n      renderedRows++;\n      rows.push(i);\n\n      // Create an entry right away so that appendRowHtml() can\n      // start populatating it.\n      rowsCache[i] = {\n        'rowNode': null,\n\n        // ColSpans of rendered cells (by column idx).\n        // Can also be used for checking whether a cell has been rendered.\n        'cellColSpans': [],\n\n        // Cell nodes (by column idx).  Lazy-populated by ensureCellNodesInRowsCache().\n        'cellNodesByColumnIdx': [],\n\n        // Column indices of cell nodes that have been rendered, but not yet indexed in\n        // cellNodesByColumnIdx.  These are in the same order as cell nodes added at the\n        // end of the row.\n        'cellRenderQueue': []\n      };\n\n      appendRowHtml(stringArray, i, range, dataLength);\n      if (activeCellNode && activeRow === i){\n        needToReselectCell = true;\n      }\n      counter_rows_rendered++;\n    }\n\n    if (!rows.length){\n      return;\n    }\n\n    var x = document.createElement('div');\n    x.innerHTML = stringArray.join('');\n\n    for (var i = 0, ii = rows.length; i < ii; i++){\n      rowsCache[rows[i]].rowNode = parentNode.appendChild(x.firstChild);\n    }\n\n    if (needToReselectCell){\n      activeCellNode = getCellNode(activeRow, activeCell);\n    }\n  }\n\n  function startPostProcessing(){\n    if (!options.enableAsyncPostRender){\n      return;\n    }\n    clearTimeout(h_postrender);\n    h_postrender = setTimeout(asyncPostProcessRows, options.asyncPostRenderDelay);\n  }\n\n  function startPostProcessingCleanup(){\n    if (!options.enableAsyncPostRenderCleanup){\n      return;\n    }\n    clearTimeout(h_postrenderCleanup);\n    h_postrenderCleanup = setTimeout(asyncPostProcessCleanupRows, options.asyncPostRenderCleanupDelay);\n  }\n\n  function invalidatePostProcessingResults(row){\n    // change status of columns to be re-rendered\n    for (var columnIdx in postProcessedRows[row]){\n      if (postProcessedRows[row].hasOwnProperty(columnIdx)){\n        postProcessedRows[row][columnIdx] = 'C';\n      }\n    }\n    postProcessFromRow = Math.min(postProcessFromRow, row);\n    postProcessToRow = Math.max(postProcessToRow, row);\n    startPostProcessing();\n  }\n\n  function updateRowPositions(){\n    for (var row in rowsCache){\n      rowsCache[row].rowNode.style.top = getRowTop(row) + 'px';\n    }\n  }\n\n  function render(){\n    if (!initialized){\n      return;\n    }\n    var visible = getVisibleRange();\n    var rendered = getRenderedRange();\n\n    // remove rows no longer in the viewport\n    cleanupRows(rendered);\n\n    // add new rows & missing cells in existing rows\n    if (lastRenderedScrollLeft != scrollLeft){\n      cleanUpAndRenderCells(rendered);\n    }\n\n    // render missing rows\n    renderRows(rendered);\n\n    postProcessFromRow = visible.top;\n    postProcessToRow = Math.min(getDataLengthIncludingAddNew() - 1, visible.bottom);\n    startPostProcessing();\n\n    lastRenderedScrollTop = scrollTop;\n    lastRenderedScrollLeft = scrollLeft;\n    h_render = null;\n  }\n\n  function handleHeaderRowScroll(){\n    var scrollLeft = $headerRowScroller[0].scrollLeft;\n    if (scrollLeft != $viewport[0].scrollLeft){\n      $viewport[0].scrollLeft = scrollLeft;\n    }\n  }\n\n  function handleFooterRowScroll(){\n    var scrollLeft = $footerRowScroller[0].scrollLeft;\n    if (scrollLeft != $viewport[0].scrollLeft){\n      $viewport[0].scrollLeft = scrollLeft;\n    }\n  }\n\n  function handleScroll(){\n    scrollTop = $viewport[0].scrollTop;\n    scrollLeft = $viewport[0].scrollLeft;\n    var vScrollDist = Math.abs(scrollTop - prevScrollTop);\n    var hScrollDist = Math.abs(scrollLeft - prevScrollLeft);\n\n    if (hScrollDist){\n      prevScrollLeft = scrollLeft;\n      $headerScroller[0].scrollLeft = scrollLeft;\n      $topPanelScroller[0].scrollLeft = scrollLeft;\n      $headerRowScroller[0].scrollLeft = scrollLeft;\n      if (options.createFooterRow){\n        $footerRowScroller[0].scrollLeft = scrollLeft;\n      }\n    }\n\n    if (vScrollDist){\n      vScrollDir = prevScrollTop < scrollTop ? 1 : -1;\n      prevScrollTop = scrollTop;\n\n      // switch virtual pages if needed\n      if (vScrollDist < viewportH){\n        scrollTo(scrollTop + offset);\n      } else {\n        var oldOffset = offset;\n        if (h == viewportH){\n          page = 0;\n        } else {\n          page = Math.min(n - 1, Math.floor(scrollTop * ((th - viewportH) / (h - viewportH)) * (1 / ph)));\n        }\n        offset = Math.round(page * cj);\n        if (oldOffset != offset){\n          invalidateAllRows();\n        }\n      }\n    }\n\n    if (hScrollDist || vScrollDist){\n      if (h_render){\n        clearTimeout(h_render);\n      }\n\n      if (Math.abs(lastRenderedScrollTop - scrollTop) > 20 ||\n        Math.abs(lastRenderedScrollLeft - scrollLeft) > 20){\n        if (options.forceSyncScrolling || (\n          Math.abs(lastRenderedScrollTop - scrollTop) < viewportH &&\n          Math.abs(lastRenderedScrollLeft - scrollLeft) < viewportW)){\n          render();\n        } else {\n          h_render = setTimeout(render, 50);\n        }\n\n        trigger(self.onViewportChanged, {grid: self});\n      }\n    }\n\n    trigger(self.onScroll, {scrollLeft: scrollLeft, scrollTop: scrollTop, grid: self});\n  }\n\n  function asyncPostProcessRows(){\n    var dataLength = getDataLength();\n    while (postProcessFromRow <= postProcessToRow){\n      var row = (vScrollDir >= 0) ? postProcessFromRow++ : postProcessToRow--;\n      var cacheEntry = rowsCache[row];\n      if (!cacheEntry || row >= dataLength){\n        continue;\n      }\n\n      if (!postProcessedRows[row]){\n        postProcessedRows[row] = {};\n      }\n\n      ensureCellNodesInRowsCache(row);\n      for (var columnIdx in cacheEntry.cellNodesByColumnIdx){\n        if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)){\n          continue;\n        }\n\n        columnIdx = columnIdx | 0;\n\n        var m = columns[columnIdx];\n        var processedStatus = postProcessedRows[row][columnIdx]; // C=cleanup and re-render, R=rendered\n        if (m.asyncPostRender && processedStatus !== 'R'){\n          var node = cacheEntry.cellNodesByColumnIdx[columnIdx];\n          if (node){\n            m.asyncPostRender(node, row, getDataItem(row), m, (processedStatus === 'C'));\n          }\n          postProcessedRows[row][columnIdx] = 'R';\n        }\n      }\n\n      h_postrender = setTimeout(asyncPostProcessRows, options.asyncPostRenderDelay);\n      return;\n    }\n  }\n\n  function asyncPostProcessCleanupRows(){\n    if (postProcessedCleanupQueue.length > 0){\n      var groupId = postProcessedCleanupQueue[0].groupId;\n\n      // loop through all queue members with this groupID\n      while (postProcessedCleanupQueue.length > 0 && postProcessedCleanupQueue[0].groupId == groupId){\n        var entry = postProcessedCleanupQueue.shift();\n        if (entry.actionType == 'R'){\n          $(entry.node).remove();\n        }\n        if (entry.actionType == 'C'){\n          var column = columns[entry.columnIdx];\n          if (column.asyncPostRenderCleanup && entry.node){\n            // cleanup must also remove element\n            column.asyncPostRenderCleanup(entry.node, entry.rowIdx, column);\n          }\n        }\n      }\n\n      // call this function again after the specified delay\n      h_postrenderCleanup = setTimeout(asyncPostProcessCleanupRows, options.asyncPostRenderCleanupDelay);\n    }\n  }\n\n  function updateCellCssStylesOnRenderedRows(addedHash, removedHash){\n    var node, columnId, addedRowHash, removedRowHash;\n    for (var row in rowsCache){\n      removedRowHash = removedHash && removedHash[row];\n      addedRowHash = addedHash && addedHash[row];\n\n      if (removedRowHash){\n        for (columnId in removedRowHash){\n          if (!addedRowHash || removedRowHash[columnId] != addedRowHash[columnId]){\n            node = getCellNode(row, getColumnIndex(columnId));\n            if (node){\n              $(node).removeClass(removedRowHash[columnId]);\n            }\n          }\n        }\n      }\n\n      if (addedRowHash){\n        for (columnId in addedRowHash){\n          if (!removedRowHash || removedRowHash[columnId] != addedRowHash[columnId]){\n            node = getCellNode(row, getColumnIndex(columnId));\n            if (node){\n              $(node).addClass(addedRowHash[columnId]);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  function addCellCssStyles(key, hash){\n    if (cellCssClasses[key]){\n      throw \"addCellCssStyles: cell CSS hash with key '\" + key + \"' already exists.\";\n    }\n\n    cellCssClasses[key] = hash;\n    updateCellCssStylesOnRenderedRows(hash, null);\n\n    trigger(self.onCellCssStylesChanged, {'key': key, 'hash': hash, 'grid': self});\n  }\n\n  function removeCellCssStyles(key){\n    if (!cellCssClasses[key]){\n      return;\n    }\n\n    updateCellCssStylesOnRenderedRows(null, cellCssClasses[key]);\n    delete cellCssClasses[key];\n\n    trigger(self.onCellCssStylesChanged, {'key': key, 'hash': null, 'grid': self});\n  }\n\n  function setCellCssStyles(key, hash){\n    var prevHash = cellCssClasses[key];\n\n    cellCssClasses[key] = hash;\n    updateCellCssStylesOnRenderedRows(hash, prevHash);\n\n    trigger(self.onCellCssStylesChanged, {'key': key, 'hash': hash, 'grid': self});\n  }\n\n  function getCellCssStyles(key){\n    return cellCssClasses[key];\n  }\n\n  function flashCell(row, cell, speed){\n    speed = speed || 100;\n    if (rowsCache[row]){\n      var $cell = $(getCellNode(row, cell));\n\n      function toggleCellClass(times){\n        if (!times){\n          return;\n        }\n        setTimeout(function(){\n          $cell.queue(function(){\n            $cell.toggleClass(options.cellFlashingCssClass).dequeue();\n            toggleCellClass(times - 1);\n          });\n        },\n          speed);\n      }\n\n      toggleCellClass(4);\n    }\n  }\n\n  // ////////////////////////////////////////////////////////////////////////////////////////////\n  // Interactivity\n\n  function handleMouseWheel(e){\n    var rowNode = $(e.target).closest('.slick-row')[0];\n    if (rowNode != rowNodeFromLastMouseWheelEvent){\n      if (zombieRowNodeFromLastMouseWheelEvent && zombieRowNodeFromLastMouseWheelEvent != rowNode){\n        if (options.enableAsyncPostRenderCleanup && zombieRowPostProcessedFromLastMouseWheelEvent){\n          queuePostProcessedRowForCleanup(zombieRowCacheFromLastMouseWheelEvent,\n            zombieRowPostProcessedFromLastMouseWheelEvent);\n        } else {\n          $canvas[0].removeChild(zombieRowNodeFromLastMouseWheelEvent);\n        }\n        zombieRowNodeFromLastMouseWheelEvent = null;\n        zombieRowCacheFromLastMouseWheelEvent = null;\n        zombieRowPostProcessedFromLastMouseWheelEvent = null;\n\n        if (options.enableAsyncPostRenderCleanup){\n          startPostProcessingCleanup();\n        }\n      }\n      rowNodeFromLastMouseWheelEvent = rowNode;\n    }\n  }\n\n  function handleDragStart(interactEvent){\n    var event = $.Event(interactEvent.originalEvent.type, interactEvent.originalEvent);\n    var cell = getCellFromEvent(event);\n    if (!cell || !cellExists(cell.row, cell.cell)){\n      return false;\n    }\n\n    var retval = trigger(self.onDragStart, interactEvent, event);\n    if (event.isImmediatePropagationStopped()){\n      return retval;\n    }\n\n    return false;\n  }\n\n  function handleDrag(interactEvent){\n    var event = $.Event(interactEvent.originalEvent.type, interactEvent.originalEvent);\n    return trigger(self.onDrag, interactEvent, event);\n  }\n\n  function handleDragEnd(interactEvent){\n    trigger(self.onDragEnd, interactEvent, $.Event('mousedown'));\n  }\n\n  function handleKeyDown(e){\n    trigger(self.onKeyDown, {row: activeRow, cell: activeCell, grid: self}, e);\n    var handled = e.isImmediatePropagationStopped();\n    var keyCode = Slick.keyCode;\n\n    if (!handled){\n      if (!e.shiftKey && !e.altKey && !e.ctrlKey){\n        // editor may specify an array of keys to bubble\n        if (options.editable && currentEditor && currentEditor.keyCaptureList){\n          if (currentEditor.keyCaptureList.indexOf(e.which) > -1){\n            return;\n          }\n        }\n        if (e.which == keyCode.ESCAPE){\n          if (!getEditorLock().isActive()){\n            return; // no editing mode to cancel, allow bubbling and default processing (exit without cancelling the event)\n          }\n          cancelEditAndSetFocus();\n        } else if (e.which == keyCode.PAGE_DOWN){\n          navigatePageDown();\n          handled = true;\n        } else if (e.which == keyCode.PAGE_UP){\n          navigatePageUp();\n          handled = true;\n        } else if (e.which == keyCode.LEFT){\n          handled = navigateLeft();\n        } else if (e.which == keyCode.RIGHT){\n          handled = navigateRight();\n        } else if (e.which == keyCode.UP){\n          handled = navigateUp();\n        } else if (e.which == keyCode.DOWN){\n          handled = navigateDown();\n        } else if (e.which == keyCode.TAB){\n          handled = navigateNext();\n        } else if (e.which == keyCode.ENTER){\n          if (options.editable){\n            if (currentEditor){\n              // adding new row\n              if (activeRow === getDataLength()){\n                navigateDown();\n              } else {\n                commitEditAndSetFocus();\n              }\n            } else {\n              if (getEditorLock().commitCurrentEdit()){\n                makeActiveCellEditable();\n              }\n            }\n          }\n          handled = true;\n        }\n      } else if (e.which == keyCode.TAB && e.shiftKey && !e.ctrlKey && !e.altKey){\n        handled = navigatePrev();\n      }\n    }\n\n    if (handled){\n      // the event has been handled so don't let parent element (bubbling/propagation) or browser (default) handle it\n      e.stopPropagation();\n      e.preventDefault();\n      try {\n        e.originalEvent.keyCode = 0; // prevent default behaviour for special keys in IE browsers (F3, F5, etc.)\n      }\n        // ignore exceptions - setting the original event's keycode throws access denied exception for \"Ctrl\"\n        // (hitting control key only, nothing else), \"Shift\" (maybe others)\n      catch (error){\n      }\n    }\n  }\n\n  function handleClick(e){\n    if (!currentEditor){\n      // if this click resulted in some cell child node getting focus,\n      // don't steal it back - keyboard events will still bubble up\n      // IE9+ seems to default DIVs to tabIndex=0 instead of -1, so check for cell clicks directly.\n      if (e.target != document.activeElement || $(e.target).hasClass('slick-cell')){\n        setFocus();\n      }\n    }\n\n    var cell = getCellFromEvent(e);\n    if (!cell || (currentEditor !== null && activeRow == cell.row && activeCell == cell.cell)){\n      return;\n    }\n\n    trigger(self.onClick, {row: cell.row, cell: cell.cell, grid: self}, e);\n    if (e.isImmediatePropagationStopped()){\n      return;\n    }\n\n    if ((activeCell != cell.cell || activeRow != cell.row) && canCellBeActive(cell.row, cell.cell)){\n      if (!getEditorLock().isActive() || getEditorLock().commitCurrentEdit()){\n        scrollRowIntoView(cell.row, false);\n        setActiveCellInternal(getCellNode(cell.row, cell.cell));\n      }\n    }\n  }\n\n  function handleContextMenu(e){\n    var $cell = $(e.target).closest('.slick-cell', $canvas);\n    if ($cell.length === 0){\n      return;\n    }\n\n    // are we editing this cell?\n    if (activeCellNode === $cell[0] && currentEditor !== null){\n      return;\n    }\n\n    trigger(self.onContextMenu, {grid: self}, e);\n  }\n\n  function handleDblClick(e){\n    var cell = getCellFromEvent(e);\n    if (!cell || (currentEditor !== null && activeRow == cell.row && activeCell == cell.cell)){\n      return;\n    }\n\n    trigger(self.onDblClick, {row: cell.row, cell: cell.cell, grid: self}, e);\n    if (e.isImmediatePropagationStopped()){\n      return;\n    }\n\n    if (options.editable){\n      gotoCell(cell.row, cell.cell, true);\n    }\n  }\n\n  function handleHeaderMouseEnter(e){\n    trigger(self.onHeaderMouseEnter, {\n      'column': $(this).data('column'),\n      'grid': self\n    }, e);\n  }\n\n  function handleHeaderMouseLeave(e){\n    trigger(self.onHeaderMouseLeave, {\n      'column': $(this).data('column'),\n      'grid': self\n    }, e);\n  }\n\n  function handleHeaderContextMenu(e){\n    var $header = $(e.target).closest('.slick-header-column', '.slick-header-columns');\n    var column = $header && $header.data('column');\n    trigger(self.onHeaderContextMenu, {column: column, grid: self}, e);\n  }\n\n  function handleHeaderClick(e){\n    var $header = $(e.target).closest('.slick-header-column', '.slick-header-columns');\n    var column = $header && $header.data('column');\n    if (column){\n      trigger(self.onHeaderClick, {column: column, grid: self}, e);\n    }\n  }\n\n  function handleMouseEnter(e){\n    trigger(self.onMouseEnter, {grid: self}, e);\n  }\n\n  function handleMouseLeave(e){\n    trigger(self.onMouseLeave, {grid: self}, e);\n  }\n\n  function cellExists(row, cell){\n    return !(row < 0 || row >= getDataLength() || cell < 0 || cell >= columns.length);\n  }\n\n  function getCellFromPoint(x, y){\n    var row = getRowFromPosition(y);\n    var cell = 0;\n\n    var w = 0;\n    for (var i = 0; i < columns.length && w < x; i++){\n      w += columns[i].width;\n      cell++;\n    }\n\n    if (cell < 0){\n      cell = 0;\n    }\n\n    return {row: row, cell: cell - 1};\n  }\n\n  function getCellFromNode(cellNode){\n    // read column number from .l<columnNumber> CSS class\n    var cls = /l\\d+/.exec(cellNode.className);\n    if (!cls){\n      throw 'getCellFromNode: cannot get cell - ' + cellNode.className;\n    }\n    return parseInt(cls[0].substr(1, cls[0].length - 1), 10);\n  }\n\n  function getRowFromNode(rowNode){\n    for (var row in rowsCache){\n      if (rowsCache[row].rowNode === rowNode){\n        return row | 0;\n      }\n    }\n\n    return null;\n  }\n\n  function getCellFromEvent(e){\n    var $cell = $(e.target).closest('.slick-cell', $canvas);\n    if (!$cell.length){\n      return null;\n    }\n\n    var row = getRowFromNode($cell[0].parentNode);\n    var cell = getCellFromNode($cell[0]);\n\n    if (row == null || cell == null){\n      return null;\n    } else {\n      return {\n        'row': row,\n        'cell': cell\n      };\n    }\n  }\n\n  function getCellNodeBox(row, cell){\n    if (!cellExists(row, cell)){\n      return null;\n    }\n\n    var y1 = getRowTop(row);\n    var y2 = y1 + options.rowHeight - 1;\n    var x1 = 0;\n    for (var i = 0; i < cell; i++){\n      x1 += columns[i].width;\n    }\n    var x2 = x1 + columns[cell].width;\n\n    return {\n      top: y1,\n      left: x1,\n      bottom: y2,\n      right: x2\n    };\n  }\n\n  // ////////////////////////////////////////////////////////////////////////////////////////////\n  // Cell switching\n\n  function resetActiveCell(){\n    setActiveCellInternal(null, false);\n  }\n\n  function setFocus(){\n    if (tabbingDirection == -1){\n      $focusSink[0].focus();\n    } else {\n      $focusSink2[0].focus();\n    }\n  }\n\n  function scrollCellIntoView(row, cell, doPaging){\n    scrollRowIntoView(row, doPaging);\n\n    var colspan = getColspan(row, cell);\n    var left = columnPosLeft[cell],\n      right = columnPosRight[cell + (colspan > 1 ? colspan - 1 : 0)],\n      scrollRight = scrollLeft + viewportW;\n\n    if (left < scrollLeft){\n      $viewport.scrollLeft(left);\n      handleScroll();\n      render();\n    } else if (right > scrollRight){\n      $viewport.scrollLeft(Math.min(left, right - $viewport[0].clientWidth));\n      handleScroll();\n      render();\n    }\n  }\n\n  function setActiveCellInternal(newCell, opt_editMode){\n    if (activeCellNode !== null){\n      makeActiveCellNormal();\n      $(activeCellNode).removeClass('active');\n      if (rowsCache[activeRow]){\n        $(rowsCache[activeRow].rowNode).removeClass('active');\n      }\n    }\n\n    var activeCellChanged = (activeCellNode !== newCell);\n    activeCellNode = newCell;\n\n    if (activeCellNode != null){\n      activeRow = getRowFromNode(activeCellNode.parentNode);\n      activeCell = activePosX = getCellFromNode(activeCellNode);\n\n      if (opt_editMode == null){\n        opt_editMode = (activeRow == getDataLength()) || options.autoEdit;\n      }\n\n      $(activeCellNode).addClass('active');\n      $(rowsCache[activeRow].rowNode).addClass('active');\n\n      if (options.editable && opt_editMode && isCellPotentiallyEditable(activeRow, activeCell)){\n        clearTimeout(h_editorLoader);\n\n        if (options.asyncEditorLoading){\n          h_editorLoader = setTimeout(function(){\n            makeActiveCellEditable();\n          }, options.asyncEditorLoadDelay);\n        } else {\n          makeActiveCellEditable();\n        }\n      }\n    } else {\n      activeRow = activeCell = null;\n    }\n\n    if (activeCellChanged){\n      trigger(self.onActiveCellChanged, getActiveCell());\n    }\n  }\n\n  function clearTextSelection(){\n    if (document.selection && document.selection.empty){\n      try {\n        // IE fails here if selected element is not in dom\n        document.selection.empty();\n      } catch (e){\n      }\n    } else if (window.getSelection){\n      var sel = window.getSelection();\n      if (sel && sel.removeAllRanges){\n        sel.removeAllRanges();\n      }\n    }\n  }\n\n  function isCellPotentiallyEditable(row, cell){\n    var dataLength = getDataLength();\n    // is the data for this row loaded?\n    if (row < dataLength && !getDataItem(row)){\n      return false;\n    }\n\n    // are we in the Add New row?  can we create new from this cell?\n    if (columns[cell].cannotTriggerInsert && row >= dataLength){\n      return false;\n    }\n\n    // does this cell have an editor?\n    if (!getEditor(row, cell)){\n      return false;\n    }\n\n    return true;\n  }\n\n  function makeActiveCellNormal(){\n    if (!currentEditor){\n      return;\n    }\n    trigger(self.onBeforeCellEditorDestroy, {editor: currentEditor, grid: self});\n    currentEditor.destroy();\n    currentEditor = null;\n\n    if (activeCellNode){\n      var d = getDataItem(activeRow);\n      $(activeCellNode).removeClass('editable invalid');\n      if (d){\n        var column = columns[activeCell];\n        var formatter = getFormatter(activeRow, column);\n        activeCellNode.innerHTML = formatter(activeRow, activeCell, getDataItemValueForColumn(d, column), column, d, self);\n        invalidatePostProcessingResults(activeRow);\n      }\n    }\n\n    // if there previously was text selected on a page (such as selected text in the edit cell just removed),\n    // IE can't set focus to anything else correctly\n    if (navigator.userAgent.toLowerCase().match(/msie/)){\n      clearTextSelection();\n    }\n\n    getEditorLock().deactivate(editController);\n  }\n\n  function makeActiveCellEditable(editor){\n    if (!activeCellNode){\n      return;\n    }\n    if (!options.editable){\n      throw 'Grid : makeActiveCellEditable : should never get called when options.editable is false';\n    }\n\n    // cancel pending async call if there is one\n    clearTimeout(h_editorLoader);\n\n    if (!isCellPotentiallyEditable(activeRow, activeCell)){\n      return;\n    }\n\n    var columnDef = columns[activeCell];\n    var item = getDataItem(activeRow);\n\n    if (trigger(self.onBeforeEditCell, {\n      row: activeRow,\n      cell: activeCell,\n      item: item,\n      column: columnDef,\n      grid: self\n    }) === false){\n      setFocus();\n      return;\n    }\n\n    getEditorLock().activate(editController);\n    $(activeCellNode).addClass('editable');\n\n    var useEditor = editor || getEditor(activeRow, activeCell);\n\n    // don't clear the cell if a custom editor is passed through\n    if (!editor && !useEditor.suppressClearOnEdit){\n      activeCellNode.innerHTML = '';\n    }\n\n    currentEditor = new useEditor({\n      grid: self,\n      gridPosition: absBox($container[0]),\n      position: absBox(activeCellNode),\n      container: activeCellNode,\n      column: columnDef,\n      item: item || {},\n      commitChanges: commitEditAndSetFocus,\n      cancelChanges: cancelEditAndSetFocus\n    });\n\n    if (item){\n      currentEditor.loadValue(item);\n    }\n\n    serializedEditorValue = currentEditor.serializeValue();\n\n    if (currentEditor.position){\n      handleActiveCellPositionChange();\n    }\n  }\n\n  function commitEditAndSetFocus(){\n    // if the commit fails, it would do so due to a validation error\n    // if so, do not steal the focus from the editor\n    if (getEditorLock().commitCurrentEdit()){\n      setFocus();\n      if (options.autoEdit){\n        navigateDown();\n      }\n    }\n  }\n\n  function cancelEditAndSetFocus(){\n    if (getEditorLock().cancelCurrentEdit()){\n      setFocus();\n    }\n  }\n\n  function absBox(elem){\n    var box = {\n      top: elem.offsetTop,\n      left: elem.offsetLeft,\n      bottom: 0,\n      right: 0,\n      width: $(elem).outerWidth(),\n      height: $(elem).outerHeight(),\n      visible: true\n    };\n    box.bottom = box.top + box.height;\n    box.right = box.left + box.width;\n\n    // walk up the tree\n    var offsetParent = elem.offsetParent;\n    while ((elem = elem.parentNode) != document.body){\n      if (elem == null) break;\n\n      if (box.visible && elem.scrollHeight != elem.offsetHeight && $(elem).css('overflowY') != 'visible'){\n        box.visible = box.bottom > elem.scrollTop && box.top < elem.scrollTop + elem.clientHeight;\n      }\n\n      if (box.visible && elem.scrollWidth != elem.offsetWidth && $(elem).css('overflowX') != 'visible'){\n        box.visible = box.right > elem.scrollLeft && box.left < elem.scrollLeft + elem.clientWidth;\n      }\n\n      box.left -= elem.scrollLeft;\n      box.top -= elem.scrollTop;\n\n      if (elem === offsetParent){\n        box.left += elem.offsetLeft;\n        box.top += elem.offsetTop;\n        offsetParent = elem.offsetParent;\n      }\n\n      box.bottom = box.top + box.height;\n      box.right = box.left + box.width;\n    }\n\n    return box;\n  }\n\n  function getActiveCellPosition(){\n    return absBox(activeCellNode);\n  }\n\n  function getGridPosition(){\n    return absBox($container[0]);\n  }\n\n  function handleActiveCellPositionChange(){\n    if (!activeCellNode){\n      return;\n    }\n\n    trigger(self.onActiveCellPositionChanged, {grid: self});\n\n    if (currentEditor){\n      var cellBox = getActiveCellPosition();\n      if (currentEditor.show && currentEditor.hide){\n        if (!cellBox.visible){\n          currentEditor.hide();\n        } else {\n          currentEditor.show();\n        }\n      }\n\n      if (currentEditor.position){\n        currentEditor.position(cellBox);\n      }\n    }\n  }\n\n  function getCellEditor(){\n    return currentEditor;\n  }\n\n  function getActiveCell(){\n    if (!activeCellNode){\n      return null;\n    } else {\n      return {row: activeRow, cell: activeCell, grid: self};\n    }\n  }\n\n  function getActiveCellNode(){\n    return activeCellNode;\n  }\n\n  function scrollRowIntoView(row, doPaging){\n    var rowAtTop = row * options.rowHeight;\n    var rowAtBottom = (row + 1) * options.rowHeight - viewportH + (viewportHasHScroll ? scrollbarDimensions.height : 0);\n\n    // need to page down?\n    if ((row + 1) * options.rowHeight > scrollTop + viewportH + offset){\n      scrollTo(doPaging ? rowAtTop : rowAtBottom);\n      render();\n    }\n    // or page up?\n    else if (row * options.rowHeight < scrollTop + offset){\n      scrollTo(doPaging ? rowAtBottom : rowAtTop);\n      render();\n    }\n  }\n\n  function scrollRowToTop(row){\n    scrollTo(row * options.rowHeight);\n    render();\n  }\n\n  function scrollPage(dir){\n    var deltaRows = dir * numVisibleRows;\n    scrollTo((getRowFromPosition(scrollTop) + deltaRows) * options.rowHeight);\n    render();\n\n    if (options.enableCellNavigation && activeRow != null){\n      var row = activeRow + deltaRows;\n      var dataLengthIncludingAddNew = getDataLengthIncludingAddNew();\n      if (row >= dataLengthIncludingAddNew){\n        row = dataLengthIncludingAddNew - 1;\n      }\n      if (row < 0){\n        row = 0;\n      }\n\n      var cell = 0, prevCell = null;\n      var prevActivePosX = activePosX;\n      while (cell <= activePosX){\n        if (canCellBeActive(row, cell)){\n          prevCell = cell;\n        }\n        cell += getColspan(row, cell);\n      }\n\n      if (prevCell !== null){\n        setActiveCellInternal(getCellNode(row, prevCell));\n        activePosX = prevActivePosX;\n      } else {\n        resetActiveCell();\n      }\n    }\n  }\n\n  function navigatePageDown(){\n    scrollPage(1);\n  }\n\n  function navigatePageUp(){\n    scrollPage(-1);\n  }\n\n  function getColspan(row, cell){\n    var metadata = data.getItemMetadata && data.getItemMetadata(row);\n    if (!metadata || !metadata.columns){\n      return 1;\n    }\n\n    var columnData = metadata.columns[columns[cell].id] || metadata.columns[cell];\n    var colspan = (columnData && columnData.colspan);\n    if (colspan === '*'){\n      colspan = columns.length - cell;\n    } else {\n      colspan = colspan || 1;\n    }\n\n    return colspan;\n  }\n\n  function findFirstFocusableCell(row){\n    var cell = 0;\n    while (cell < columns.length){\n      if (canCellBeActive(row, cell)){\n        return cell;\n      }\n      cell += getColspan(row, cell);\n    }\n    return null;\n  }\n\n  function findLastFocusableCell(row){\n    var cell = 0;\n    var lastFocusableCell = null;\n    while (cell < columns.length){\n      if (canCellBeActive(row, cell)){\n        lastFocusableCell = cell;\n      }\n      cell += getColspan(row, cell);\n    }\n    return lastFocusableCell;\n  }\n\n  function gotoRight(row, cell, posX){\n    if (cell >= columns.length){\n      return null;\n    }\n\n    do {\n      cell += getColspan(row, cell);\n    }\n    while (cell < columns.length && !canCellBeActive(row, cell));\n\n    if (cell < columns.length){\n      return {\n        'row': row,\n        'cell': cell,\n        'posX': cell\n      };\n    }\n    return null;\n  }\n\n  function gotoLeft(row, cell, posX){\n    if (cell <= 0){\n      return null;\n    }\n\n    var firstFocusableCell = findFirstFocusableCell(row);\n    if (firstFocusableCell === null || firstFocusableCell >= cell){\n      return null;\n    }\n\n    var prev = {\n      'row': row,\n      'cell': firstFocusableCell,\n      'posX': firstFocusableCell\n    };\n    var pos;\n    while (true){\n      pos = gotoRight(prev.row, prev.cell, prev.posX);\n      if (!pos){\n        return null;\n      }\n      if (pos.cell >= cell){\n        return prev;\n      }\n      prev = pos;\n    }\n  }\n\n  function gotoDown(row, cell, posX){\n    var prevCell;\n    var dataLengthIncludingAddNew = getDataLengthIncludingAddNew();\n    while (true){\n      if (++row >= dataLengthIncludingAddNew){\n        return null;\n      }\n\n      prevCell = cell = 0;\n      while (cell <= posX){\n        prevCell = cell;\n        cell += getColspan(row, cell);\n      }\n\n      if (canCellBeActive(row, prevCell)){\n        return {\n          'row': row,\n          'cell': prevCell,\n          'posX': posX\n        };\n      }\n    }\n  }\n\n  function gotoUp(row, cell, posX){\n    var prevCell;\n    while (true){\n      if (--row < 0){\n        return null;\n      }\n\n      prevCell = cell = 0;\n      while (cell <= posX){\n        prevCell = cell;\n        cell += getColspan(row, cell);\n      }\n\n      if (canCellBeActive(row, prevCell)){\n        return {\n          'row': row,\n          'cell': prevCell,\n          'posX': posX\n        };\n      }\n    }\n  }\n\n  function gotoNext(row, cell, posX){\n    if (row == null && cell == null){\n      row = cell = posX = 0;\n      if (canCellBeActive(row, cell)){\n        return {\n          'row': row,\n          'cell': cell,\n          'posX': cell\n        };\n      }\n    }\n\n    var pos = gotoRight(row, cell, posX);\n    if (pos){\n      return pos;\n    }\n\n    var firstFocusableCell = null;\n    var dataLengthIncludingAddNew = getDataLengthIncludingAddNew();\n    while (++row < dataLengthIncludingAddNew){\n      firstFocusableCell = findFirstFocusableCell(row);\n      if (firstFocusableCell !== null){\n        return {\n          'row': row,\n          'cell': firstFocusableCell,\n          'posX': firstFocusableCell\n        };\n      }\n    }\n    return null;\n  }\n\n  function gotoPrev(row, cell, posX){\n    if (row == null && cell == null){\n      row = getDataLengthIncludingAddNew() - 1;\n      cell = posX = columns.length - 1;\n      if (canCellBeActive(row, cell)){\n        return {\n          'row': row,\n          'cell': cell,\n          'posX': cell\n        };\n      }\n    }\n\n    var pos;\n    var lastSelectableCell;\n    while (!pos){\n      pos = gotoLeft(row, cell, posX);\n      if (pos){\n        break;\n      }\n      if (--row < 0){\n        return null;\n      }\n\n      cell = 0;\n      lastSelectableCell = findLastFocusableCell(row);\n      if (lastSelectableCell !== null){\n        pos = {\n          'row': row,\n          'cell': lastSelectableCell,\n          'posX': lastSelectableCell\n        };\n      }\n    }\n    return pos;\n  }\n\n  function navigateRight(){\n    return navigate('right');\n  }\n\n  function navigateLeft(){\n    return navigate('left');\n  }\n\n  function navigateDown(){\n    return navigate('down');\n  }\n\n  function navigateUp(){\n    return navigate('up');\n  }\n\n  function navigateNext(){\n    return navigate('next');\n  }\n\n  function navigatePrev(){\n    return navigate('prev');\n  }\n\n  /**\n   * @param {string} dir Navigation direction.\n   * @return {boolean} Whether navigation resulted in a change of active cell.\n   */\n  function navigate(dir){\n    if (!options.enableCellNavigation){\n      return false;\n    }\n\n    if (!activeCellNode && dir != 'prev' && dir != 'next'){\n      return false;\n    }\n\n    if (!getEditorLock().commitCurrentEdit()){\n      return true;\n    }\n    setFocus();\n\n    var tabbingDirections = {\n      'up': -1,\n      'down': 1,\n      'left': -1,\n      'right': 1,\n      'prev': -1,\n      'next': 1\n    };\n    tabbingDirection = tabbingDirections[dir];\n\n    var stepFunctions = {\n      'up': gotoUp,\n      'down': gotoDown,\n      'left': gotoLeft,\n      'right': gotoRight,\n      'prev': gotoPrev,\n      'next': gotoNext\n    };\n    var stepFn = stepFunctions[dir];\n    var pos = stepFn(activeRow, activeCell, activePosX);\n    if (pos){\n      var isAddNewRow = (pos.row == getDataLength());\n      scrollCellIntoView(pos.row, pos.cell, !isAddNewRow);\n      setActiveCellInternal(getCellNode(pos.row, pos.cell));\n      activePosX = pos.posX;\n      return true;\n    } else {\n      setActiveCellInternal(getCellNode(activeRow, activeCell));\n      return false;\n    }\n  }\n\n  function getCellNode(row, cell){\n    if (rowsCache[row]){\n      ensureCellNodesInRowsCache(row);\n      return rowsCache[row].cellNodesByColumnIdx[cell];\n    }\n    return null;\n  }\n\n  function setActiveCell(row, cell){\n    if (!initialized){\n      return;\n    }\n    if (row > getDataLength() || row < 0 || cell >= columns.length || cell < 0){\n      return;\n    }\n\n    if (!options.enableCellNavigation){\n      return;\n    }\n\n    scrollCellIntoView(row, cell, false);\n    setActiveCellInternal(getCellNode(row, cell), false);\n  }\n\n  function canCellBeActive(row, cell){\n    if (!options.enableCellNavigation || row >= getDataLengthIncludingAddNew() ||\n      row < 0 || cell >= columns.length || cell < 0){\n      return false;\n    }\n\n    var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);\n    if (rowMetadata && typeof rowMetadata.focusable === 'boolean'){\n      return rowMetadata.focusable;\n    }\n\n    var columnMetadata = rowMetadata && rowMetadata.columns;\n    if (columnMetadata && columnMetadata[columns[cell].id] && typeof columnMetadata[columns[cell].id].focusable === 'boolean'){\n      return columnMetadata[columns[cell].id].focusable;\n    }\n    if (columnMetadata && columnMetadata[cell] && typeof columnMetadata[cell].focusable === 'boolean'){\n      return columnMetadata[cell].focusable;\n    }\n\n    return columns[cell].focusable;\n  }\n\n  function canCellBeSelected(row, cell){\n    if (row >= getDataLength() || row < 0 || cell >= columns.length || cell < 0){\n      return false;\n    }\n\n    var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);\n    if (rowMetadata && typeof rowMetadata.selectable === 'boolean'){\n      return rowMetadata.selectable;\n    }\n\n    var columnMetadata = rowMetadata && rowMetadata.columns && (rowMetadata.columns[columns[cell].id] || rowMetadata.columns[cell]);\n    if (columnMetadata && typeof columnMetadata.selectable === 'boolean'){\n      return columnMetadata.selectable;\n    }\n\n    return columns[cell].selectable;\n  }\n\n  function gotoCell(row, cell, forceEdit){\n    if (!initialized){\n      return;\n    }\n    if (!canCellBeActive(row, cell)){\n      return;\n    }\n\n    if (!getEditorLock().commitCurrentEdit()){\n      return;\n    }\n\n    scrollCellIntoView(row, cell, false);\n\n    var newCell = getCellNode(row, cell);\n\n    // if selecting the 'add new' row, start editing right away\n    setActiveCellInternal(newCell, forceEdit || (row === getDataLength()) || options.autoEdit);\n\n    // if no editor was created, set the focus back on the grid\n    if (!currentEditor){\n      setFocus();\n    }\n  }\n\n  // ////////////////////////////////////////////////////////////////////////////////////////////\n  // IEditor implementation for the editor lock\n\n  function commitCurrentEdit(){\n    var item = getDataItem(activeRow);\n    var column = columns[activeCell];\n\n    if (currentEditor){\n      if (currentEditor.isValueChanged()){\n        var validationResults = currentEditor.validate();\n\n        if (validationResults.valid){\n          if (activeRow < getDataLength()){\n            var editCommand = {\n              row: activeRow,\n              cell: activeCell,\n              editor: currentEditor,\n              serializedValue: currentEditor.serializeValue(),\n              prevSerializedValue: serializedEditorValue,\n              execute: function(){\n                this.editor.applyValue(item, this.serializedValue);\n                updateRow(this.row);\n                trigger(self.onCellChange, {\n                  row: activeRow,\n                  cell: activeCell,\n                  item: item,\n                  grid: self\n                });\n              },\n              undo: function(){\n                this.editor.applyValue(item, this.prevSerializedValue);\n                updateRow(this.row);\n                trigger(self.onCellChange, {\n                  row: activeRow,\n                  cell: activeCell,\n                  item: item,\n                  grid: self\n                });\n              }\n            };\n\n            if (options.editCommandHandler){\n              makeActiveCellNormal();\n              options.editCommandHandler(item, column, editCommand);\n            } else {\n              editCommand.execute();\n              makeActiveCellNormal();\n            }\n          } else {\n            var newItem = {};\n            currentEditor.applyValue(newItem, currentEditor.serializeValue());\n            makeActiveCellNormal();\n            trigger(self.onAddNewRow, {item: newItem, column: column, grid: self});\n          }\n\n          // check whether the lock has been re-acquired by event handlers\n          return !getEditorLock().isActive();\n        } else {\n          // Re-add the CSS class to trigger transitions, if any.\n          $(activeCellNode).removeClass('invalid');\n          $(activeCellNode).width();  // force layout\n          $(activeCellNode).addClass('invalid');\n\n          trigger(self.onValidationError, {\n            editor: currentEditor,\n            cellNode: activeCellNode,\n            validationResults: validationResults,\n            row: activeRow,\n            cell: activeCell,\n            column: column,\n            grid: self\n          });\n\n          currentEditor.focus();\n          return false;\n        }\n      }\n\n      makeActiveCellNormal();\n    }\n    return true;\n  }\n\n  function cancelCurrentEdit(){\n    makeActiveCellNormal();\n    return true;\n  }\n\n  function rowsToRanges(rows){\n    var ranges = [];\n    var lastCell = columns.length - 1;\n    for (var i = 0; i < rows.length; i++){\n      ranges.push(new Slick.Range(rows[i], 0, rows[i], lastCell));\n    }\n    return ranges;\n  }\n\n  function getSelectedRows(){\n    if (!selectionModel){\n      throw 'Selection model is not set';\n    }\n    return selectedRows;\n  }\n\n  function setSelectedRows(rows){\n    if (!selectionModel){\n      throw 'Selection model is not set';\n    }\n    selectionModel.setSelectedRanges(rowsToRanges(rows));\n  }\n\n  // ////////////////////////////////////////////////////////////////////////////////////////////\n  // Debug\n\n  this.debug = function(){\n    var s = '';\n\n    s += ('\\n' + 'counter_rows_rendered:  ' + counter_rows_rendered);\n    s += ('\\n' + 'counter_rows_removed:  ' + counter_rows_removed);\n    s += ('\\n' + 'renderedRows:  ' + renderedRows);\n    s += ('\\n' + 'numVisibleRows:  ' + numVisibleRows);\n    s += ('\\n' + 'maxSupportedCssHeight:  ' + maxSupportedCssHeight);\n    s += ('\\n' + 'n(umber of pages):  ' + n);\n    s += ('\\n' + '(current) page:  ' + page);\n    s += ('\\n' + 'page height (ph):  ' + ph);\n    s += ('\\n' + 'vScrollDir:  ' + vScrollDir);\n\n    alert(s);\n  };\n\n  // a debug helper to be able to access private members\n  this.eval = function(expr){\n    return eval(expr);\n  };\n\n  // ////////////////////////////////////////////////////////////////////////////////////////////\n  // Public API\n\n  $.extend(this, {\n    'slickGridVersion': '2.2.4',\n\n    // Events\n    'onScroll': new Slick.Event(),\n    'onSort': new Slick.Event(),\n    'onHeaderMouseEnter': new Slick.Event(),\n    'onHeaderMouseLeave': new Slick.Event(),\n    'onHeaderContextMenu': new Slick.Event(),\n    'onHeaderClick': new Slick.Event(),\n    'onHeaderCellRendered': new Slick.Event(),\n    'onBeforeHeaderCellDestroy': new Slick.Event(),\n    'onHeaderRowCellRendered': new Slick.Event(),\n    'onFooterRowCellRendered': new Slick.Event(),\n    'onBeforeHeaderRowCellDestroy': new Slick.Event(),\n    'onBeforeFooterRowCellDestroy': new Slick.Event(),\n    'onMouseEnter': new Slick.Event(),\n    'onMouseLeave': new Slick.Event(),\n    'onClick': new Slick.Event(),\n    'onDblClick': new Slick.Event(),\n    'onContextMenu': new Slick.Event(),\n    'onKeyDown': new Slick.Event(),\n    'onAddNewRow': new Slick.Event(),\n    'onValidationError': new Slick.Event(),\n    'onViewportChanged': new Slick.Event(),\n    'onColumnsReordered': new Slick.Event(),\n    'onColumnsResized': new Slick.Event(),\n    'onCellChange': new Slick.Event(),\n    'onBeforeEditCell': new Slick.Event(),\n    'onBeforeCellEditorDestroy': new Slick.Event(),\n    'onBeforeDestroy': new Slick.Event(),\n    'onActiveCellChanged': new Slick.Event(),\n    'onActiveCellPositionChanged': new Slick.Event(),\n    'onDragInit': new Slick.Event(),\n    'onDragStart': new Slick.Event(),\n    'onDrag': new Slick.Event(),\n    'onDragEnd': new Slick.Event(),\n    'onSelectedRowsChanged': new Slick.Event(),\n    'onCellCssStylesChanged': new Slick.Event(),\n\n    // Methods\n    'registerPlugin': registerPlugin,\n    'unregisterPlugin': unregisterPlugin,\n    'getColumns': getColumns,\n    'setColumns': setColumns,\n    'getColumnIndex': getColumnIndex,\n    'updateColumnHeader': updateColumnHeader,\n    'setSortColumn': setSortColumn,\n    'setSortColumns': setSortColumns,\n    'getSortColumns': getSortColumns,\n    'autosizeColumns': autosizeColumns,\n    'getOptions': getOptions,\n    'setOptions': setOptions,\n    'getData': getData,\n    'getDataLength': getDataLength,\n    'getDataItem': getDataItem,\n    'setData': setData,\n    'getSelectionModel': getSelectionModel,\n    'setSelectionModel': setSelectionModel,\n    'getSelectedRows': getSelectedRows,\n    'setSelectedRows': setSelectedRows,\n    'getContainerNode': getContainerNode,\n\n    'render': render,\n    'invalidate': invalidate,\n    'invalidateRow': invalidateRow,\n    'invalidateRows': invalidateRows,\n    'invalidateAllRows': invalidateAllRows,\n    'updateCell': updateCell,\n    'updateRow': updateRow,\n    'getViewport': getVisibleRange,\n    'getRenderedRange': getRenderedRange,\n    'resizeCanvas': resizeCanvas,\n    'updateRowCount': updateRowCount,\n    'scrollRowIntoView': scrollRowIntoView,\n    'scrollRowToTop': scrollRowToTop,\n    'scrollCellIntoView': scrollCellIntoView,\n    'getCanvasNode': getCanvasNode,\n    'focus': setFocus,\n\n    'getCellFromPoint': getCellFromPoint,\n    'getCellFromEvent': getCellFromEvent,\n    'getActiveCell': getActiveCell,\n    'setActiveCell': setActiveCell,\n    'getActiveCellNode': getActiveCellNode,\n    'getActiveCellPosition': getActiveCellPosition,\n    'resetActiveCell': resetActiveCell,\n    'editActiveCell': makeActiveCellEditable,\n    'getCellEditor': getCellEditor,\n    'getCellNode': getCellNode,\n    'getCellNodeBox': getCellNodeBox,\n    'canCellBeSelected': canCellBeSelected,\n    'canCellBeActive': canCellBeActive,\n    'navigatePrev': navigatePrev,\n    'navigateNext': navigateNext,\n    'navigateUp': navigateUp,\n    'navigateDown': navigateDown,\n    'navigateLeft': navigateLeft,\n    'navigateRight': navigateRight,\n    'navigatePageUp': navigatePageUp,\n    'navigatePageDown': navigatePageDown,\n    'gotoCell': gotoCell,\n    'getTopPanel': getTopPanel,\n    'setTopPanelVisibility': setTopPanelVisibility,\n    'setHeaderRowVisibility': setHeaderRowVisibility,\n    'getHeaderRow': getHeaderRow,\n    'getHeaderRowColumn': getHeaderRowColumn,\n    'setFooterRowVisibility': setFooterRowVisibility,\n    'getFooterRow': getFooterRow,\n    'getFooterRowColumn': getFooterRowColumn,\n    'getGridPosition': getGridPosition,\n    'flashCell': flashCell,\n    'addCellCssStyles': addCellCssStyles,\n    'setCellCssStyles': setCellCssStyles,\n    'removeCellCssStyles': removeCellCssStyles,\n    'getCellCssStyles': getCellCssStyles,\n\n    'init': finishInitialization,\n    'destroy': destroy,\n\n    // IEditor implementation\n    'getEditorLock': getEditorLock,\n    'getEditController': getEditController\n  });\n\n  init();\n}\n\n\n\n// WEBPACK FOOTER //\n// ../src/slick.grid.js","module.exports = require(\"flatpickr\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"flatpickr\"\n// module id = 31\n// module chunks = 0"],"sourceRoot":""}